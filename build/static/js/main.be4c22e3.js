/*! For license information please see main.be4c22e3.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(202)},153:(e,t,r)=>{var n=r(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:o.current}}t.jsx=c,t.jsxs=c},202:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}function v(){}function b(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,n){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)_.call(t,a)&&!S.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:r,type:e,key:i,ref:o,props:s,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return i=i(l=e),e=""===s?"."+C(l,0):s,x(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),T(i,t,a,"",function(e){return e})):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+C(o=e[c],c);l+=T(o,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,a,u=s+C(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,r){if(null==e)return e;var n=[],a=0;return T(e,n,"","",function(e){return t.call(r,e,a++)}),n}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},A={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,r){I(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:r,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,r){return R.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,r){return R.current.useReducer(e,t,r)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return R.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(326),a=n.__importDefault(r(829)),s=n.__importDefault(r(736));class i{constructor(e){let{headers:t={},schema:r,fetch:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:n=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?"{".concat(r.join(","),"}"):"".concat(r)]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(o="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer","count=".concat(a)),new s.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,r))c<a&&0>s(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function x(e){if(g=!1,w(e),!m)if(null!==n(c))m=!0,P(_);else{var t=n(u);null!==t&&A(x,t.startTime-e)}}function _(e,r){m=!1,g&&(g=!1,v(N),N=-1),p=!0;var s=f;try{for(w(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!T());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===n(c)&&a(c),w(r)}else a(c);h=n(c)}if(null!==h)var l=!0;else{var d=n(u);null!==d&&A(x,d.startTime-r),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,j=null,N=-1,E=5,C=-1;function T(){return!(t.unstable_now()-C<E)}function I(){if(null!==j){var e=t.unstable_now();C=e;var r=!0;try{r=j(!0,e)}finally{r?k():(S=!1,j=null)}}else S=!1}if("function"===typeof b)k=function(){b(I)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=I,k=function(){R.postMessage(null)}}else k=function(){y(I,0)};function P(e){j=e,S||(S=!0,k())}function A(e,r){N=y(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,r(u,e),null===n(c)&&e===n(u)&&(g?(v(N),N=-1):g=!0,A(x,s-i))):(e.sortIndex=o,r(c,e),m||p||(m=!0,P(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},286:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(326).__importDefault(r(611));t.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,a,s;let i=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const n=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),s=null===(a=e.headers.get("content-range"))||void 0===a?void 0:a.split("/");n&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,u="OK")}catch(d){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(s=null===i||void 0===i?void 0:i.details)||void 0===s?void 0:s.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new n.default(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""),hint:"",code:"".concat(null!==(n=null===e||void 0===e?void 0:e.code)&&void 0!==n?n:"")},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},326:(e,t,r)=>{r.r(t),r.d(t,{__addDisposableResource:()=>L,__assign:()=>s,__asyncDelegator:()=>j,__asyncGenerator:()=>S,__asyncValues:()=>N,__await:()=>k,__awaiter:()=>p,__classPrivateFieldGet:()=>R,__classPrivateFieldIn:()=>A,__classPrivateFieldSet:()=>P,__createBinding:()=>g,__decorate:()=>o,__disposeResources:()=>U,__esDecorate:()=>c,__exportStar:()=>y,__extends:()=>a,__generator:()=>m,__importDefault:()=>O,__importStar:()=>I,__makeTemplateObject:()=>E,__metadata:()=>f,__param:()=>l,__propKey:()=>d,__read:()=>b,__rest:()=>i,__rewriteRelativeImportExtension:()=>M,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>w,__spreadArray:()=>_,__spreadArrays:()=>x,__values:()=>v,default:()=>z});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function o(e,t,r,n){var a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t,r,n,a,s){function i(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var o,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,f=r.length-1;f>=0;f--){var p={};for(var m in n)p[m]="access"===m?{}:n[m];for(var m in n.access)p.access[m]=n.access[m];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var g=(0,r[f])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(o=i(g.get))&&(d.get=o),(o=i(g.set))&&(d.set=o),(o=i(g.init))&&a.unshift(o)}else(o=i(g))&&("field"===l?a.unshift(o):d[c]=o)}u&&Object.defineProperty(u,n.name,d),h=!0}function u(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function d(e){return"symbol"===typeof e?e:"".concat(e)}function h(e,t,r){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})}function m(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(l){o=[6,l],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var g=Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function y(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||g(t,e,r)}function v(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function x(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,a++)n[a]=s[i];return n}function _(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function S(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),s=[];return n=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function i(e,t){a[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||o(e,t)})},t&&(n[e]=t(n[e])))}function o(e,t){try{(r=a[e](t)).value instanceof k?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(n){u(s[0][3],n)}var r}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function j(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:k(e[n](t)),done:!1}:a?a(t):t}:a}}function N(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,a){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,a,(t=e[r](t)).done,t.value)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var C=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},T=function(e){return T=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},T(e)};function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=T(e),n=0;n<r.length;n++)"default"!==r[n]&&g(t,e,r[n]);return C(t,e),t}function O(e){return e&&e.__esModule?e:{default:e}}function R(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function P(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}function A(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function L(e,t,r){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!==typeof n)throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var D="function"===typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function U(e){function t(t){e.error=e.hasError?new D(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function a(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(a,function(e){return t(e),a()})}else n|=1}catch(i){t(i)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function M(e,t){return"string"===typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,a,s){return r?t?".jsx":".js":!n||a&&s?n+a+"."+s.toLowerCase()+"js":e}):e}const z={__extends:a,__assign:s,__rest:i,__decorate:o,__param:l,__esDecorate:c,__runInitializers:u,__propKey:d,__setFunctionName:h,__metadata:f,__awaiter:p,__generator:m,__createBinding:g,__exportStar:y,__values:v,__read:b,__spread:w,__spreadArrays:x,__spreadArray:_,__await:k,__asyncGenerator:S,__asyncDelegator:j,__asyncValues:N,__makeTemplateObject:E,__importStar:I,__importDefault:O,__classPrivateFieldGet:R,__classPrivateFieldSet:P,__classPrivateFieldIn:A,__addDisposableResource:L,__disposeResources:U,__rewriteRelativeImportExtension:M}},374:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(326).__importDefault(r(286));class a extends n.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=a?"".concat(a,".order"):"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===r?"":r?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this}range(e,t){let{foreignTable:r,referencedTable:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof n?"offset":"".concat(n,".offset"),s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=a},391:(e,t,r)=>{var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579:(e,t,r)=>{e.exports=r(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},730:(e,t,r)=>{var n=r(43),a=r(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,r,n,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,r,n){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var D,U=Object.assign;function M(e){if(void 0===D)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function F(e,t){if(!e||z)return"";z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=n.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case j:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(r){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=H(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var r=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&G(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function se(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function je(e){if(e=ba(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=xa(t),_e(e.stateNode,e.type,t))}}function Ne(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ee(){if(ke){var e=ke,t=Se;if(Se=ke=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Ce(e,t){return e(t)}function Te(){}var Ie=!1;function Oe(e,t,r){if(Ie)return e(t,r);Ie=!0;try{return Ce(e,t,r)}finally{Ie=!1,(null!==ke||null!==Se)&&(Te(),Ee())}}function Re(e,t){var r=e.stateNode;if(null===r)return null;var n=xa(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Pe=!1;if(u)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ue){Pe=!1}function Le(e,t,r,n,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var De=!1,Ue=null,Me=!1,ze=null,Fe={onError:function(e){De=!0,Ue=e}};function Be(e,t,r,n,a,s,i,o,l){De=!1,Ue=null,Le.apply(Fe,arguments)}function qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return We(a),e;if(i===n)return We(a),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Je=a.unstable_scheduleCallback,Ge=a.unstable_cancelCallback,$e=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~a;0!==o?n=dt(o):0!==(s&=i)&&(n=dt(s))}else 0!==(i=r&~a)?n=dt(i):0!==s&&(n=dt(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-it(t)),n|=e[r],t&=~a;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,kt,St,jt,Nt=!1,Et=[],Ct=null,Tt=null,It=null,Ot=new Map,Rt=new Map,Pt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&_t(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ut(e){var t=va(e.target);if(null!==t){var r=qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ve(r)))return e.blockedOn=t,void jt(e.priority,function(){kt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ba(r))&&_t(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);we=n,r.target.dispatchEvent(n),we=null,t.shift()}return!0}function zt(e,t,r){Mt(e)&&r.delete(t)}function Ft(){Nt=!1,null!==Ct&&Mt(Ct)&&(Ct=null),null!==Tt&&Mt(Tt)&&(Tt=null),null!==It&&Mt(It)&&(It=null),Ot.forEach(zt),Rt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ft)))}function qt(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var r=1;r<Et.length;r++){var n=Et[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Tt&&Bt(Tt,e),null!==It&&Bt(It,e),Ot.forEach(t),Rt.forEach(t),r=0;r<Pt.length;r++)(n=Pt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Pt.length&&null===(r=Pt[0]).blockedOn;)Ut(r),null===r.blockedOn&&Pt.shift()}var Vt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,r,n){var a=bt,s=Vt.transition;Vt.transition=null;try{bt=1,Jt(e,t,r,n)}finally{bt=a,Vt.transition=s}}function Kt(e,t,r,n){var a=bt,s=Vt.transition;Vt.transition=null;try{bt=4,Jt(e,t,r,n)}finally{bt=a,Vt.transition=s}}function Jt(e,t,r,n){if(Wt){var a=$t(e,t,r,n);if(null===a)Wn(e,t,n,Gt,r),Lt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Ct=Dt(Ct,e,t,r,n,a),!0;case"dragenter":return Tt=Dt(Tt,e,t,r,n,a),!0;case"mouseover":return It=Dt(It,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return Ot.set(s,Dt(Ot.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Rt.set(s,Dt(Rt.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<At.indexOf(e)){for(;null!==a;){var s=ba(a);if(null!==s&&xt(s),null===(s=$t(e,t,r,n))&&Wn(e,t,n,Gt,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var Gt=null;function $t(e,t,r,n){if(Gt=null,null!==(e=va(e=xe(n))))if(null===(t=qe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,n=r.length,a="value"in Yt?Yt.value:Yt.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),ur=U({},lr,{view:0,detail:0}),dr=ar(ur),hr=U({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),fr=ar(hr),pr=ar(U({},hr,{dataTransfer:0})),mr=ar(U({},ur,{relatedTarget:0})),gr=ar(U({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=U({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=ar(yr),br=ar(U({},lr,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function Sr(){return kr}var jr=U({},ur,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nr=ar(jr),Er=ar(U({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cr=ar(U({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Tr=ar(U({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ir=U({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Or=ar(Ir),Rr=[9,13,27,32],Pr=u&&"CompositionEvent"in window,Ar=null;u&&"documentMode"in document&&(Ar=document.documentMode);var Lr=u&&"TextEvent"in window&&!Ar,Dr=u&&(!Pr||Ar&&8<Ar&&11>=Ar),Ur=String.fromCharCode(32),Mr=!1;function zr(e,t){switch(e){case"keyup":return-1!==Rr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1;var qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Wr(e,t,r,n){Ne(n),0<(t=Kn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Kr=null;function Jr(e){Mn(e,0)}function Gr(e){if(J(wa(e)))return e}function $r(e,t){if("change"===e)return t}var Qr=!1;if(u){var Yr;if(u){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}Yr=Xr}else Yr=!1;Qr=Yr&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Kr=Hr=null)}function tn(e){if("value"===e.propertyName&&Gr(Kr)){var t=[];Wr(t,Kr,e,xe(e)),Oe(Jr,t)}}function rn(e,t,r){"focusin"===e?(en(),Kr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Kr)}function an(e,t){if("click"===e)return Gr(t)}function sn(e,t){if("input"===e||"change"===e)return Gr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!d.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=G((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=un(r,s);var i=un(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,vn=null,bn=!1;function wn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==gn||gn!==G(n)||("selectionStart"in(n=gn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Kn(yn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function xn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _n={animationend:xn("Animation","AnimationEnd"),animationiteration:xn("Animation","AnimationIteration"),animationstart:xn("Animation","AnimationStart"),transitionend:xn("Transition","TransitionEnd")},kn={},Sn={};function jn(e){if(kn[e])return kn[e];if(!_n[e])return e;var t,r=_n[e];for(t in r)if(r.hasOwnProperty(t)&&t in Sn)return kn[e]=r[t];return e}u&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);var Nn=jn("animationend"),En=jn("animationiteration"),Cn=jn("animationstart"),Tn=jn("transitionend"),In=new Map,On="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(e,t){In.set(e,t),l(t,[e])}for(var Pn=0;Pn<On.length;Pn++){var An=On[Pn];Rn(An.toLowerCase(),"on"+(An[0].toUpperCase()+An.slice(1)))}Rn(Nn,"onAnimationEnd"),Rn(En,"onAnimationIteration"),Rn(Cn,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(Tn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Un(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,i,o,l,c){if(Be.apply(this,arguments),De){if(!De)throw Error(s(198));var u=Ue;De=!1,Ue=null,Me||(Me=!0,ze=u)}}(n,t,void 0,e),e.currentTarget=null}function Mn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Un(a,o,c),s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Un(a,o,c),s=l}}}if(Me)throw e=ze,Me=!1,ze=null,e}function zn(e,t){var r=t[ma];void 0===r&&(r=t[ma]=new Set);var n=e+"__bubble";r.has(n)||(Vn(t,e,2,!1),r.add(n))}function Fn(e,t,r){var n=0;t&&(n|=4),Vn(r,e,n,t)}var Bn="_reactListening"+Math.random().toString(36).slice(2);function qn(e){if(!e[Bn]){e[Bn]=!0,i.forEach(function(t){"selectionchange"!==t&&(Dn.has(t)||Fn(t,!1,e),Fn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bn]||(t[Bn]=!0,Fn("selectionchange",!1,t))}}function Vn(e,t,r,n){switch(Qt(t)){case 1:var a=Ht;break;case 4:a=Kt;break;default:a=Jt}r=a.bind(null,t,r,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=va(o)))return;if(5===(l=i.tag)||6===l){n=s=i;continue e}o=o.parentNode}}n=n.return}Oe(function(){var n=s,a=xe(r),i=[];e:{var o=In.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Nr;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cr;break;case Nn:case En:case Cn:l=gr;break;case Tn:l=Tr;break;case"scroll":l=dr;break;case"wheel":l=Or;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Er}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=n;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&u.push(Hn(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,r,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===we||!(c=r.relatedTarget||r.fromElement)||!va(c)&&!c[pa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?va(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=fr,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Er,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:wa(l),f=null==c?o:wa(c),(o=new u(m,p+"leave",l,r,a)).target=d,o.relatedTarget=f,m=null,va(a)===n&&((u=new u(h,p+"enter",c,r,a)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Jn(f))p++;for(f=0,m=h;m;m=Jn(m))f++;for(;0<p-f;)u=Jn(u),p--;for(;0<f-p;)h=Jn(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Jn(u),h=Jn(h)}u=null}else u=null;null!==l&&Gn(i,o,l,u,!1),null!==c&&null!==d&&Gn(i,d,c,u,!0)}if("select"===(l=(o=n?wa(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$r;else if(Vr(o))if(Qr)g=sn;else{g=nn;var y=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=an);switch(g&&(g=g(e,n))?Wr(i,g,r,a):(y&&y(e,o,n),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=n?wa(n):window,e){case"focusin":(Vr(y)||"true"===y.contentEditable)&&(gn=y,yn=n,vn=null);break;case"focusout":vn=yn=gn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,wn(i,r,a);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":wn(i,r,a)}var v;if(Pr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Br?zr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Dr&&"ko"!==r.locale&&(Br||"onCompositionStart"!==b?"onCompositionEnd"===b&&Br&&(v=er()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,Br=!0)),0<(y=Kn(n,b)).length&&(b=new br(b,e,null,r,a),i.push({event:b,listeners:y}),v?b.data=v:null!==(v=Fr(r))&&(b.data=v))),(v=Lr?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Mr=!0,Ur);case"textInput":return(e=t.data)===Ur&&Mr?null:e;default:return null}}(e,r):function(e,t){if(Br)return"compositionend"===e||!Pr&&zr(e,t)?(e=er(),Zt=Xt=Yt=null,Br=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Kn(n,"onBeforeInput")).length&&(a=new br("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=v))}Mn(i,t)})}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Re(e,r))&&n.unshift(Hn(e,s,a)),null!=(s=Re(e,t))&&n.push(Hn(e,s,a))),e=e.return}return n}function Jn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gn(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Re(r,s))&&i.unshift(Hn(r,l,o)):a||null!=(l=Re(r,s))&&i.push(Hn(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var $n=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function Yn(e){return("string"===typeof e?e:""+e).replace($n,"\n").replace(Qn,"")}function Xn(e,t,r){if(t=Yn(t),Yn(e)!==t&&r)throw Error(s(425))}function Zn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout(function(){throw e})}function la(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void qt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);qt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,ya="__reactHandles$"+da;function va(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pa]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ua(e);null!==e;){if(r=e[ha])return r;e=ua(e)}return t}r=(e=r).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xa(e){return e[fa]||null}var _a=[],ka=-1;function Sa(e){return{current:e}}function ja(e){0>ka||(e.current=_a[ka],_a[ka]=null,ka--)}function Na(e,t){ka++,_a[ka]=e.current,e.current=t}var Ea={},Ca=Sa(Ea),Ta=Sa(!1),Ia=Ea;function Oa(e,t){var r=e.type.contextTypes;if(!r)return Ea;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ra(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pa(){ja(Ta),ja(Ca)}function Aa(e,t,r){if(Ca.current!==Ea)throw Error(s(168));Na(Ca,t),Na(Ta,r)}function La(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(s(108,V(e)||"Unknown",a));return U({},r,n)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Ia=Ca.current,Na(Ca,e),Na(Ta,Ta.current),!0}function Ua(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=La(e,t,Ia),n.__reactInternalMemoizedMergedChildContext=e,ja(Ta),ja(Ca),Na(Ca,e)):ja(Ta),Na(Ta,r)}var Ma=null,za=!1,Fa=!1;function Ba(e){null===Ma?Ma=[e]:Ma.push(e)}function qa(){if(!Fa&&null!==Ma){Fa=!0;var e=0,t=bt;try{var r=Ma;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ma=null,za=!1}catch(a){throw null!==Ma&&(Ma=Ma.slice(e+1)),Je(Ze,qa),a}finally{bt=t,Fa=!1}}return null}var Va=[],Wa=0,Ha=null,Ka=0,Ja=[],Ga=0,$a=null,Qa=1,Ya="";function Xa(e,t){Va[Wa++]=Ka,Va[Wa++]=Ha,Ha=e,Ka=t}function Za(e,t,r){Ja[Ga++]=Qa,Ja[Ga++]=Ya,Ja[Ga++]=$a,$a=e;var n=Qa;e=Ya;var a=32-it(n)-1;n&=~(1<<a),r+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Qa=1<<32-it(t)+a|r<<a|n,Ya=s+e}else Qa=1<<s|r<<a|n,Ya=e}function es(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function ts(e){for(;e===Ha;)Ha=Va[--Wa],Va[Wa]=null,Ka=Va[--Wa],Va[Wa]=null;for(;e===$a;)$a=Ja[--Ga],Ja[Ga]=null,Ya=Ja[--Ga],Ja[Ga]=null,Qa=Ja[--Ga],Ja[Ga]=null}var rs=null,ns=null,as=!1,ss=null;function is(e,t){var r=Oc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==$a?{id:Qa,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Oc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=ns;if(t){var r=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(r.nextSibling);var n=rs;t&&os(e,t)?is(n,r):(e.flags=-4097&e.flags|2,as=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,rs=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!as)return us(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=ns;e;)e=ca(e.nextSibling)}function fs(){ns=rs=null,as=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Uc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===k?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&vs(s)===t.type)?((n=a(t,r.props)).ref=gs(e,t,r),n.return=e,n):((n=Ac(r.type,r.key,r.props,null,e.mode,n)).ref=gs(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Mc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function d(e,t,r,n,s){return null===t||7!==t.tag?((t=Lc(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(r=Ac(t.type,t.key,t.props,null,e.mode,r)).ref=gs(e,null,t),r.return=e,r;case _:return(t=Mc(t,e.mode,r)).return=e,t;case R:return h(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Lc(t,e.mode,r,null)).return=e,t;ys(e,t)}return null}function f(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return r.key===a?c(e,t,r,n):null;case _:return r.key===a?u(e,t,r,n):null;case R:return f(e,t,(a=r._init)(r._payload),n)}if(te(r)||L(r))return null!==a?null:d(e,t,r,n,null);ys(e,r)}return null}function p(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case _:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a);case R:return p(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||L(n))return d(t,e=e.get(r)||null,n,a,null);ys(t,n)}return null}function m(a,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(a,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(a,d),s=i(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return r(a,d),as&&Xa(a,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(s=i(d,s,m),null===u?c=d:u.sibling=d,u=d);return as&&Xa(a,m),c}for(d=n(a,d);m<o.length;m++)null!==(g=p(d,a,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=i(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),as&&Xa(a,m),c}function g(a,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(a,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(a,m),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return r(a,m),as&&Xa(a,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(a,v.value,c))&&(o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return as&&Xa(a,g),u}for(m=n(a,m);!v.done;g++,v=l.next())null!==(v=p(m,a,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),as&&Xa(a,g),u}return function e(n,s,i,l){if("object"===typeof i&&null!==i&&i.type===k&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var c=i.key,u=s;null!==u;){if(u.key===c){if((c=i.type)===k){if(7===u.tag){r(n,u.sibling),(s=a(u,i.props.children)).return=n,n=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vs(c)===u.type){r(n,u.sibling),(s=a(u,i.props)).ref=gs(n,u,i),s.return=n,n=s;break e}r(n,u);break}t(n,u),u=u.sibling}i.type===k?((s=Lc(i.props.children,n.mode,l,i.key)).return=n,n=s):((l=Ac(i.type,i.key,i.props,null,n.mode,l)).ref=gs(n,s,i),l.return=n,n=l)}return o(n);case _:e:{for(u=i.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){r(n,s.sibling),(s=a(s,i.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Mc(i,n.mode,l)).return=n,n=s}return o(n);case R:return e(n,s,(u=i._init)(i._payload),l)}if(te(i))return m(n,s,i,l);if(L(i))return g(n,s,i,l);ys(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(r(n,s.sibling),(s=a(s,i)).return=n,n=s):(r(n,s),(s=Uc(i,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var ws=bs(!0),xs=bs(!1),_s=Sa(null),ks=null,Ss=null,js=null;function Ns(){js=Ss=ks=null}function Es(e){var t=_s.current;ja(_s),e._currentValue=t}function Cs(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ts(e,t){ks=e,js=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(js!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===ks)throw Error(s(308));Ss=e,ks.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Os=null;function Rs(e){null===Os?Os=[e]:Os.push(e)}function Ps(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Rs(t)):(r.next=a.next,a.next=r),t.interleaved=r,As(e,n)}function As(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ls=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Us(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Cl)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,As(e,r)}return null===(a=n.interleaved)?(t.next=t,Rs(n)):(t.next=a.next,a.next=t),n.interleaved=t,As(e,r)}function Fs(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Bs(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qs(e,t,r,n){var a=e.updateQueue;Ls=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=r,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=U({},d,h);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=d}}function Vs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(s(191,a));a.call(n)}}}var Ws={},Hs=Sa(Ws),Ks=Sa(Ws),Js=Sa(Ws);function Gs(e){if(e===Ws)throw Error(s(174));return e}function $s(e,t){switch(Na(Js,t),Na(Ks,e),Na(Hs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ja(Hs),Na(Hs,t)}function Qs(){ja(Hs),ja(Ks),ja(Js)}function Ys(e){Gs(Js.current);var t=Gs(Hs.current),r=le(t,e.type);t!==r&&(Na(Ks,e),Na(Hs,r))}function Xs(e){Ks.current===e&&(ja(Hs),ja(Ks))}var Zs=Sa(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=w.ReactCurrentDispatcher,ai=w.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,ui=!1,di=0,hi=0;function fi(){throw Error(s(321))}function pi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function mi(e,t,r,n,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Xi:Zi,e=r(n,a),ui){i=0;do{if(ui=!1,di=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ni.current=eo,e=r(n,a)}while(ui)}if(ni.current=Yi,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==di;return di=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=vi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=oi,a=n.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((si&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=n):c=c.next=h,ii.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==i);null===c?o=n:c.next=l,on(n,t.memoizedState)||(bo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Dl|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function xi(e){var t=vi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);on(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function _i(){}function ki(e,t){var r=ii,n=vi(),a=t(),i=!on(n.memoizedState,a);if(i&&(n.memoizedState=a,bo=!0),n=n.queue,Li(Ni.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Ii(9,ji.bind(null,r,n,a,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&si)||Si(r,t,a)}return a}function Si(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function ji(e,t,r,n){t.value=r,t.getSnapshot=n,Ei(t)&&Ci(e)}function Ni(e,t,r){return r(function(){Ei(t)&&Ci(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Ci(e){var t=As(e,1);null!==t&&rc(t,e,1,-1)}function Ti(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ji.bind(null,ii,e),[t.memoizedState,e]}function Ii(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Oi(){return vi().memoizedState}function Ri(e,t,r,n){var a=yi();ii.flags|=e,a.memoizedState=Ii(1|t,r,void 0,void 0===n?null:n)}function Pi(e,t,r,n){var a=vi();n=void 0===n?null:n;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==n&&pi(n,i.deps))return void(a.memoizedState=Ii(t,r,s,n))}ii.flags|=e,a.memoizedState=Ii(1|t,r,s,n)}function Ai(e,t){return Ri(8390656,8,e,t)}function Li(e,t){return Pi(2048,8,e,t)}function Di(e,t){return Pi(4,2,e,t)}function Ui(e,t){return Pi(4,4,e,t)}function Mi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Pi(4,4,Mi.bind(null,t,e),r)}function Fi(){}function Bi(e,t){var r=vi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qi(e,t){var r=vi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Vi(e,t,r){return 0===(21&si)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=r):(on(r,t)||(r=mt(),ii.lanes|=r,Dl|=r,e.baseState=!0),t)}function Wi(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=ai.transition;ai.transition={};try{e(!1),t()}finally{bt=r,ai.transition=n}}function Hi(){return vi().memoizedState}function Ki(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Gi(e))$i(t,r);else if(null!==(r=Ps(e,t,r,n))){rc(r,e,n,ec()),Qi(r,t,n)}}function Ji(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Gi(e))$i(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,on(o,i)){var l=t.interleaved;return null===l?(a.next=a,Rs(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Ps(e,t,a,n))&&(rc(r,e,n,a=ec()),Qi(r,t,n))}}function Gi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function $i(e,t){ui=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qi(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var Yi={readContext:Is,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},Xi={readContext:Is,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:Ai,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ri(4194308,4,Mi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ri(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ri(4,2,e,t)},useMemo:function(e,t){var r=yi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=yi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Ti,useDebugValue:Fi,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=Wi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,a=yi();if(as){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Tl)throw Error(s(349));0!==(30&si)||Si(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Ai(Ni.bind(null,n,i,e),[e]),n.flags|=2048,Ii(9,ji.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=yi(),t=Tl.identifierPrefix;if(as){var r=Ya;t=":"+t+"R"+(r=(Qa&~(1<<32-it(Qa)-1)).toString(32)+r),0<(r=di++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Is,useCallback:Bi,useContext:Is,useEffect:Li,useImperativeHandle:zi,useInsertionEffect:Di,useLayoutEffect:Ui,useMemo:qi,useReducer:wi,useRef:Oi,useState:function(){return wi(bi)},useDebugValue:Fi,useDeferredValue:function(e){return Vi(vi(),oi.memoizedState,e)},useTransition:function(){return[wi(bi)[0],vi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ki,useId:Hi,unstable_isNewReconciler:!1},eo={readContext:Is,useCallback:Bi,useContext:Is,useEffect:Li,useImperativeHandle:zi,useInsertionEffect:Di,useLayoutEffect:Ui,useMemo:qi,useReducer:xi,useRef:Oi,useState:function(){return xi(bi)},useDebugValue:Fi,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:Vi(t,oi.memoizedState,e)},useTransition:function(){return[xi(bi)[0],vi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ki,useId:Hi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=U({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:U({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Ms(n,a);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=zs(e,s,a))&&(rc(t,e,a,n),Fs(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Ms(n,a);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=zs(e,s,a))&&(rc(t,e,a,n),Fs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Ms(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zs(e,a,n))&&(rc(t,e,n,r),Fs(t,e,n))}};function ao(e,t,r,n,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(a,s))}function so(e,t,r){var n=!1,a=Ea,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(a=Ra(t)?Ia:Ca.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Oa(e,a):Ea),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Is(s):(s=Ra(t)?Ia:Ca.current,a.context=Oa(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),qs(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=B(n),n=n.return}while(n);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,r){(r=Ms(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wl||(Wl=!0,Hl=n),uo(0,t)},r}function po(e,t,r){(r=Ms(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function mo(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=jc.bind(null,e,t,r),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ms(-1,1)).tag=2,zs(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vo=w.ReactCurrentOwner,bo=!1;function wo(e,t,r,n){t.child=null===e?xs(t,null,r,n):ws(t,e.child,r,n)}function xo(e,t,r,n,a){r=r.render;var s=t.ref;return Ts(t,a),n=mi(e,t,r,n,s,a),r=gi(),null===e||bo?(as&&r&&es(t),t.flags|=1,wo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function _o(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ac(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,n,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(i,n)&&e.ref===t.ref)return Wo(e,t,a)}return t.flags|=1,(e=Pc(s,n)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(bo=!1,t.pendingProps=n=s,0===(e.lanes&a))return t.lanes=e.lanes,Wo(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return No(e,t,r,n,a)}function So(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Na(Pl,Rl),Rl|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Na(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Na(Pl,Rl),Rl|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Na(Pl,Rl),Rl|=n;return wo(e,t,a,r),t.child}function jo(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,r,n,a){var s=Ra(r)?Ia:Ca.current;return s=Oa(t,s),Ts(t,a),r=mi(e,t,r,n,s,a),n=gi(),null===e||bo?(as&&n&&es(t),t.flags|=1,wo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function Eo(e,t,r,n,a){if(Ra(r)){var s=!0;Da(t)}else s=!1;if(Ts(t,a),null===t.stateNode)Vo(e,t),so(t,r,n),oo(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Is(c):c=Oa(t,c=Ra(r)?Ia:Ca.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==n||l!==c)&&io(t,i,n,c),Ls=!1;var h=t.memoizedState;i.state=h,qs(t,n,i,a),l=t.memoizedState,o!==n||h!==l||Ta.current||Ls?("function"===typeof u&&(ro(t,r,u,n),l=t.memoizedState),(o=Ls||ao(t,r,o,n,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Us(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=Is(l):l=Oa(t,l=Ra(r)?Ia:Ca.current);var f=r.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&io(t,i,n,l),Ls=!1,h=t.memoizedState,i.state=h,qs(t,n,i,a);var p=t.memoizedState;o!==d||h!==p||Ta.current||Ls?("function"===typeof f&&(ro(t,r,f,n),p=t.memoizedState),(c=Ls||ao(t,r,c,n,h,p,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=l,n=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Co(e,t,r,n,s,a)}function Co(e,t,r,n,a,s){jo(e,t);var i=0!==(128&t.flags);if(!n&&!i)return a&&Ua(t,r,!1),Wo(e,t,s);n=t.stateNode,vo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=n.state,a&&Ua(t,r,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Aa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Aa(0,t.context,!1),$s(e,t.containerInfo)}function Io(e,t,r,n,a){return fs(),ps(a),t.flags|=256,wo(e,t,r,n),t.child}var Oo,Ro,Po,Ao,Lo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,r){var n,a=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Na(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,a,0,null),e=Lc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(r),t.memoizedState=Lo,e):Mo(t,l));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,a,i,o){if(r)return 256&t.flags?(t.flags&=-257,zo(e,t,o,n=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Dc({mode:"visible",children:n.children},a,0,null),(i=Lc(i,a,o,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Lo,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,zo(e,t,o,n=co(i=Error(s(419)),n,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(n=Tl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,As(e,a),rc(n,e,a,-1))}return mc(),zo(e,t,o,n=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ns=ca(a.nextSibling),rs=t,as=!0,ss=null,null!==e&&(Ja[Ga++]=Qa,Ja[Ga++]=Ya,Ja[Ga++]=$a,Qa=e.id,Ya=e.overflow,$a=t),t=Mo(t,n.children),t.flags|=4096,t)}(e,t,l,a,n,i,r);if(o){o=a.fallback,l=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Pc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?o=Pc(n,o):(o=Lc(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Lo,a}return e=(o=e.child).sibling,a=Pc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Mo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,r,n){return null!==n&&ps(n),ws(t,e.child,null,r),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Cs(e.return,t,r)}function Bo(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function qo(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(wo(e,t,n.children,r),0!==(2&(n=Zs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fo(e,r,t);else if(19===e.tag)Fo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Na(Zs,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Bo(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Bo(t,!0,r,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Pc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Pc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ho(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Jo(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ra(t.type)&&Pa(),Ko(t),null;case 3:return n=t.stateNode,Qs(),ja(Ta),ja(Ca),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Ro(e,t),Ko(t),null;case 5:Xs(t);var a=Gs(Js.current);if(r=t.type,null!==e&&null!=t.stateNode)Po(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=Gs(Hs.current),ds(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ha]=t,n[fa]=i,e=0!==(1&t.mode),r){case"dialog":zn("cancel",n),zn("close",n);break;case"iframe":case"object":case"embed":zn("load",n);break;case"video":case"audio":for(a=0;a<Ln.length;a++)zn(Ln[a],n);break;case"source":zn("error",n);break;case"img":case"image":case"link":zn("error",n),zn("load",n);break;case"details":zn("toggle",n);break;case"input":Q(n,i),zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},zn("invalid",n);break;case"textarea":ae(n,i),zn("invalid",n)}for(var l in ve(r,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zn("scroll",n)}switch(r){case"input":K(n),Z(n,i,!0);break;case"textarea":K(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Zn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ha]=t,e[fa]=n,Oo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,n),r){case"dialog":zn("cancel",e),zn("close",e),a=n;break;case"iframe":case"object":case"embed":zn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ln.length;a++)zn(Ln[a],e);a=n;break;case"source":zn("error",e),a=n;break;case"img":case"image":case"link":zn("error",e),zn("load",e),a=n;break;case"details":zn("toggle",e),a=n;break;case"input":Q(e,n),a=$(e,n),zn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=U({},n,{value:void 0}),zn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),zn("invalid",e)}for(i in ve(r,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==r||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&zn("scroll",e):null!=u&&b(e,i,u,l))}switch(r){case"input":K(e),Z(e,n,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Ao(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=Gs(Js.current),Gs(Hs.current),ds(t)){if(n=t.stateNode,r=t.memoizedProps,n[ha]=t,(i=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ha]=t,t.stateNode=n}return Ko(t),null;case 13:if(ja(Zs),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,i=!1;else if(i=ds(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Al&&(Al=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Qs(),Ro(e,t),null===e&&qn(t.stateNode.containerInfo),Ko(t),null;case 10:return Es(t.type._context),Ko(t),null;case 19:if(ja(Zs),null===(i=t.memoizedState))return Ko(t),null;if(n=0!==(128&t.flags),null===(l=i.rendering))if(n)Ho(i,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Ho(i,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Na(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>ql&&(t.flags|=128,n=!0,Ho(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Ho(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Ko(t),null}else 2*Ye()-i.renderingStartTime>ql&&1073741824!==r&&(t.flags|=128,n=!0,Ho(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,r=Zs.current,Na(Zs,n?1&r|2:1&r),t):(Ko(t),null);case 22:case 23:return dc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Go(e,t){switch(ts(t),t.tag){case 1:return Ra(t.type)&&Pa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),ja(Ta),ja(Ca),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(ja(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ja(Zs),null;case 4:return Qs(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Oo=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ro=function(){},Po=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Gs(Hs.current);var s,i=null;switch(r){case"input":a=$(e,a),n=$(e,n),i=[];break;case"select":a=U({},a,{value:void 0}),n=U({},n,{value:void 0}),i=[];break;case"textarea":a=ne(e,a),n=ne(e,n),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(u in ve(r,n),r=null,a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=a?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Ao=function(e,t,r,n){r!==n&&(t.flags|=4)};var $o=!1,Qo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Sc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){Sc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,r,s)}a=a.next}while(a!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[ga],delete t[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var ul=null,dl=!1;function hl(e,t,r){for(r=r.child;null!==r;)fl(e,t,r),r=r.sibling}function fl(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Qo||Zo(r,t);case 6:var n=ul,a=dl;ul=null,hl(e,t,r),dl=a,null!==(ul=n)&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),qt(e)):la(ul,r.stateNode));break;case 4:n=ul,a=dl,ul=r.stateNode.containerInfo,dl=!0,hl(e,t,r),ul=n,dl=a;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(r,t,i),a=a.next}while(a!==n)}hl(e,t,r);break;case 1:if(!Qo&&(Zo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Sc(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Qo=(n=Qo)||null!==r.memoizedState,hl(e,t,r),Qo=n):hl(e,t,r);break;default:hl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Yo),t.forEach(function(t){var n=Cc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function ml(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(i,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Sc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){Sc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&n&&null!==r&&Zo(r,r.return);break;case 5:if(ml(t,e),yl(e),512&n&&null!==r&&Zo(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){Sc(e,e.return,g)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(a,i),be(l,o);var u=be(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":X(a,i);break;case"textarea":se(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?re(a,!!i.multiple,p,!1):f!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&n){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=Ye())),4&n&&pl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Qo=(u=Qo)||d,ml(t,e),Qo=u):ml(t,e),yl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(p=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(n,r,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Xo=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&n&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(he(a,""),n.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,r){Xo=e,bl(e,t,r)}function bl(e,t,r){for(var n=0!==(1&e.mode);null!==Xo;){var a=Xo,s=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||$o;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=$o;var c=Qo;if($o=i,(Qo=l)&&!c)for(Xo=a;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?_l(a):null!==l?(l.return=i,Xo=l):_l(a);for(;null!==s;)Xo=s,bl(s,t,r),s=s.sibling;Xo=a,$o=o,Qo=c}wl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Xo=s):wl(e)}}function wl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Vs(t,i,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Vs(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&al(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xo=r;break}Xo=t.return}}function xl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xo=r;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){Sc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){Sc(t,a,l)}}var s=t.return;try{al(t)}catch(l){Sc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var kl,Sl=Math.ceil,jl=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,El=w.ReactCurrentBatchConfig,Cl=0,Tl=null,Il=null,Ol=0,Rl=0,Pl=Sa(0),Al=0,Ll=null,Dl=0,Ul=0,Ml=0,zl=null,Fl=null,Bl=0,ql=1/0,Vl=null,Wl=!1,Hl=null,Kl=null,Jl=!1,Gl=null,$l=0,Ql=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Cl)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Ol?Ol&-Ol:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,r,n){if(50<Ql)throw Ql=0,Yl=null,Error(s(185));yt(e,r,n),0!==(2&Cl)&&e===Tl||(e===Tl&&(0===(2&Cl)&&(Ul|=r),4===Al&&oc(e,Ol)),nc(e,n),1===r&&0===Cl&&0===(1&t.mode)&&(ql=Ye()+500,za&&qa()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&r)&&0===(o&n)||(a[i]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=ht(e,e===Tl?Ol:0);if(0===n)null!==r&&Ge(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ge(r),1===t)0===e.tag?function(e){za=!0,Ba(e)}(lc.bind(null,e)):Ba(lc.bind(null,e)),ia(function(){0===(6&Cl)&&qa()}),r=null;else{switch(wt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Tc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Xl=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var r=e.callbackNode;if(_c()&&e.callbackNode!==r)return null;var n=ht(e,e===Tl?Ol:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var a=Cl;Cl|=2;var i=pc();for(Tl===e&&Ol===t||(Vl=null,ql=Ye()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ns(),jl.current=i,Cl=a,null!==Il?t=0:(Tl=null,Ol=0,t=Al)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(n=a,t=sc(e,a))),1===t)throw r=Ll,hc(e,0),oc(e,n),nc(e,Ye()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!on(s(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,n))&&(0!==(i=pt(e))&&(n=i,t=sc(e,i))),1===t))throw r=Ll,hc(e,0),oc(e,n),nc(e,Ye()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Fl,Vl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(xc.bind(null,e,Fl,Vl),t);break}xc(e,Fl,Vl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-it(n);i=1<<o,(o=t[o])>a&&(a=o),n&=~i}if(n=a,10<(n=(120>(n=Ye()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sl(n/1960))-n)){e.timeoutHandle=na(xc.bind(null,e,Fl,Vl),n);break}xc(e,Fl,Vl);break;default:throw Error(s(329))}}}return nc(e,Ye()),e.callbackNode===r?ac.bind(null,e):null}function sc(e,t){var r=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Fl,Fl=r,null!==t&&ic(t)),e}function ic(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function oc(e,t){for(t&=~Ml,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Cl))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return nc(e,Ye()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=sc(e,n))}if(1===r)throw r=Ll,hc(e,0),oc(e,t),nc(e,Ye()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Fl,Vl),nc(e,Ye()),null}function cc(e,t){var r=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=r)&&(ql=Ye()+500,za&&qa())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Cl)&&_c();var t=Cl;Cl|=1;var r=El.transition,n=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=n,El.transition=r,0===(6&(Cl=t))&&qa()}}function dc(){Rl=Pl.current,ja(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Il)for(r=Il.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Pa();break;case 3:Qs(),ja(Ta),ja(Ca),ri();break;case 5:Xs(n);break;case 4:Qs();break;case 13:case 19:ja(Zs);break;case 10:Es(n.type._context);break;case 22:case 23:dc()}r=r.return}if(Tl=e,Il=e=Pc(e.current,null),Ol=Rl=t,Al=0,Ll=null,Ml=Ul=Dl=0,Fl=zl=null,null!==Os){for(t=0;t<Os.length;t++)if(null!==(n=(r=Os[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var i=s.next;s.next=a,n.next=i}r.pending=n}Os=null}return e}function fc(e,t){for(;;){var r=Il;try{if(Ns(),ni.current=Yi,ci){for(var n=ii.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}ci=!1}if(si=0,li=oi=ii=null,ui=!1,di=0,Nl.current=null,null===r||null===r.return){Al=1,Ll=t,Il=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&mo(i,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(i,u,t),mc();break e}c=Error(s(426))}else if(as&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),ps(lo(c,l));break e}}i=c=lo(c,l),4!==Al&&(Al=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,fo(0,c,t));break e;case 1:l=c;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,po(i,l,t));break e}}i=i.return}while(null!==i)}wc(r)}catch(w){t=w,Il===r&&null!==r&&(Il=r=r.return);continue}break}}function pc(){var e=jl.current;return jl.current=Yi,null===e?Yi:e}function mc(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Tl||0===(268435455&Dl)&&0===(268435455&Ul)||oc(Tl,Ol)}function gc(e,t){var r=Cl;Cl|=2;var n=pc();for(Tl===e&&Ol===t||(Vl=null,hc(e,t));;)try{yc();break}catch(a){fc(e,a)}if(Ns(),Cl=r,jl.current=n,null!==Il)throw Error(s(261));return Tl=null,Ol=0,Al}function yc(){for(;null!==Il;)bc(Il)}function vc(){for(;null!==Il&&!$e();)bc(Il)}function bc(e){var t=kl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?wc(e):Il=t,Nl.current=null}function wc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Jo(r,t,Rl)))return void(Il=r)}else{if(null!==(r=Go(r,t)))return r.flags&=32767,void(Il=r);if(null===e)return Al=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Al&&(Al=5)}function xc(e,t,r){var n=bt,a=El.transition;try{El.transition=null,bt=1,function(e,t,r,n){do{_c()}while(null!==Gl);if(0!==(6&Cl))throw Error(s(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-it(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,i),e===Tl&&(Il=Tl=null,Ol=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Jl||(Jl=!0,Tc(tt,function(){return _c(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=El.transition,El.transition=null;var o=bt;bt=1;var l=Cl;Cl|=4,Nl.current=null,function(e,t){if(ea=Wt,fn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(x){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===a&&(l=o),f===i&&++d===n&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Wt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=tl,tl=!1}(e,r),gl(r,e),pn(ta),Wt=!!ea,ta=ea=null,e.current=r,vl(r,e,a),Qe(),Cl=l,bt=o,El.transition=i}else e.current=r;if(Jl&&(Jl=!1,Gl=e,$l=a),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Ye()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&$l)&&0!==e.tag&&_c(),i=e.pendingLanes,0!==(1&i)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,qa()}(e,t,r,n)}finally{El.transition=a,bt=n}return null}function _c(){if(null!==Gl){var e=wt($l),t=El.transition,r=bt;try{if(El.transition=null,bt=16>e?16:e,null===Gl)var n=!1;else{if(e=Gl,Gl=null,$l=0,0!==(6&Cl))throw Error(s(331));var a=Cl;for(Cl|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:rl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,p=d.return;if(sl(d),d===u){Xo=null;break}if(null!==f){f.return=p,Xo=f;break}Xo=p}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Xo=v;break e}Xo=i.return}}var b=e.current;for(Xo=b;null!==Xo;){var w=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Xo=w;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===o){Xo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xo=x;break e}Xo=l.return}}if(Cl=a,qa(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(_){}n=!0}return n}finally{bt=r,El.transition=t}}return!1}function kc(e,t,r){e=zs(e,t=fo(0,t=lo(r,t),1),1),t=ec(),null!==e&&(yt(e,1,t),nc(e,t))}function Sc(e,t,r){if(3===e.tag)kc(e,e,r);else for(;null!==t;){if(3===t.tag){kc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Kl||!Kl.has(n))){t=zs(t,e=po(t,e=lo(r,e),1),1),e=ec(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function jc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Tl===e&&(Ol&r)===r&&(4===Al||3===Al&&(130023424&Ol)===Ol&&500>Ye()-Bl?hc(e,0):Ml|=r),nc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=ec();null!==(e=As(e,t))&&(yt(e,t,r),nc(e,r))}function Ec(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Nc(e,r)}function Cc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Nc(e,r)}function Tc(e,t){return Je(e,t)}function Ic(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,r,n){return new Ic(e,t,r,n)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var r=e.alternate;return null===r?((r=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ac(e,t,r,n,a,i){var o=2;if(n=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Lc(r.children,a,i,t);case S:o=8,a|=8;break;case j:return(e=Oc(12,r,t,2|a)).elementType=j,e.lanes=i,e;case T:return(e=Oc(13,r,t,a)).elementType=T,e.lanes=i,e;case I:return(e=Oc(19,r,t,a)).elementType=I,e.lanes=i,e;case P:return Dc(r,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case E:o=9;break e;case C:o=11;break e;case O:o=14;break e;case R:o=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(o,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Lc(e,t,r,n){return(e=Oc(7,e,n,t)).lanes=r,e}function Dc(e,t,r,n){return(e=Oc(22,e,n,t)).elementType=P,e.lanes=r,e.stateNode={isHidden:!1},e}function Uc(e,t,r){return(e=Oc(6,e,null,t)).lanes=r,e}function Mc(e,t,r){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Fc(e,t,r,n,a,s,i,o,l){return e=new zc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Bc(e){if(!e)return Ea;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ra(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Ra(r))return La(e,r,t)}return t}function qc(e,t,r,n,a,s,i,o,l){return(e=Fc(r,n,!0,e,0,s,0,o,l)).context=Bc(null),r=e.current,(s=Ms(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,zs(r,s,a),e.current.lanes=a,yt(e,a,n),nc(e,n),e}function Vc(e,t,r,n){var a=t.current,s=ec(),i=tc(a);return r=Bc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ms(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=zs(a,t,i))&&(rc(e,a,i,s),Fs(e,a,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)bo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bo=!1,function(e,t,r){switch(t.tag){case 3:To(t),fs();break;case 5:Ys(t);break;case 1:Ra(t.type)&&Da(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Na(_s,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Na(Zs,1&Zs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Uo(e,t,r):(Na(Zs,1&Zs.current),null!==(e=Wo(e,t,r))?e.sibling:null);Na(Zs,1&Zs.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return qo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Na(Zs,Zs.current),n)break;return null;case 22:case 23:return t.lanes=0,So(e,t,r)}return Wo(e,t,r)}(e,t,r);bo=0!==(131072&e.flags)}else bo=!1,as&&0!==(1048576&t.flags)&&Za(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vo(e,t),e=t.pendingProps;var a=Oa(t,Ca.current);Ts(t,r),a=mi(null,t,n,e,a,r);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ra(n)?(i=!0,Da(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ds(t),a.updater=no,t.stateNode=a,a._reactInternals=t,oo(t,n,e,r),t=Co(null,t,n,!0,i,r)):(t.tag=0,as&&i&&es(t),wo(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===O)return 14}return 2}(n),e=to(n,e),a){case 0:t=No(null,t,n,e,r);break e;case 1:t=Eo(null,t,n,e,r);break e;case 11:t=xo(null,t,n,e,r);break e;case 14:t=_o(null,t,n,to(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,No(e,t,n,a=t.elementType===n?a:to(n,a),r);case 1:return n=t.type,a=t.pendingProps,Eo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 3:e:{if(To(t),null===e)throw Error(s(387));n=t.pendingProps,a=(i=t.memoizedState).element,Us(e,t),qs(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Io(e,t,n,r,a=lo(Error(s(423)),t));break e}if(n!==a){t=Io(e,t,n,r,a=lo(Error(s(424)),t));break e}for(ns=ca(t.stateNode.containerInfo.firstChild),rs=t,as=!0,ss=null,r=xs(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fs(),n===a){t=Wo(e,t,r);break e}wo(e,t,n,r)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==i&&ra(n,i)&&(t.flags|=32),jo(e,t),wo(e,t,o,r),t.child;case 6:return null===e&&cs(t),null;case 13:return Uo(e,t,r);case 4:return $s(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ws(t,null,n,r):wo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,xo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 7:return wo(e,t,t.pendingProps,r),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Na(_s,n._currentValue),n._currentValue=o,null!==i)if(on(i.value,o)){if(i.children===a.children&&!Ta.current){t=Wo(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Ms(-1,r&-r)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Cs(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Cs(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}wo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ts(t,r),n=n(a=Is(a)),t.flags|=1,wo(e,t,n,r),t.child;case 14:return a=to(n=t.type,t.pendingProps),_o(e,t,n,a=to(n.type,a),r);case 15:return ko(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:to(n,a),Vo(e,t),t.tag=1,Ra(n)?(e=!0,Da(t)):e=!1,Ts(t,r),so(t,n,a),oo(t,n,a,r),Co(null,t,n,!0,e,r);case 19:return qo(e,t,r);case 22:return So(e,t,r)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Wc(i);o.call(e)}}Vc(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"===typeof n){var s=n;n=function(){var e=Wc(i);s.call(e)}}var i=qc(t,n,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[pa]=i.current,qn(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=Wc(l);o.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pa]=l.current,qn(8===e.nodeType?e.parentNode:e),uc(function(){Vc(t,l,r,n)}),l}(r,t,e,a,n);return Wc(i)}$c.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Vc(e,t,null,null)},$c.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Vc(null,e,null,null)}),t[pa]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Pt.length&&0!==t&&t<Pt[r].priority;r++);Pt.splice(r,0,e),0===r&&Ut(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(vt(t,1|r),nc(t,Ye()),0===(6&Cl)&&(ql=Ye()+500,qa()))}break;case 13:uc(function(){var t=As(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)rc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),r=As(e,t);if(null!==r)rc(r,e,t,ec());Kc(e,t)}},St=function(){return bt},jt=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},_e=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=xa(n);if(!a)throw Error(s(90));J(n),X(n,a)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ce=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[ba,wa,xa,Ne,Ee,cc]},tu={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{at=nu.inject(ru),st=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var r=!1,n="",a=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Fc(e,1,!1,null,0,r,0,n,a),e[pa]=t.current,qn(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,r){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Qc(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,a=!1,i="",o=Jc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=qc(t,null,e,1,null!=r?r:null,a,0,i,o),e[pa]=t.current,qn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new $c(t)},t.render=function(e,t,r){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Yc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},736:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(326).__importDefault(r(374)),a=new RegExp("[,()]");class s extends n.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&a.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:r,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===n?a="pl":"phrase"===n?a="ph":"websearch"===n&&(a="w");const s=void 0===r?"":"(".concat(r,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,"eq.".concat(r))}),this}not(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r?"".concat(r,".or"):"or";return this.url.searchParams.append(n,"(".concat(e,")")),this}filter(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}t.default=s},829:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(326).__importDefault(r(736));t.default=class{constructor(e,t){let{headers:r={},schema:n,fetch:a}=t;this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(e,t){const{head:r=!1,count:a}=null!==t&&void 0!==t?t:{},s=r?"HEAD":"GET";let i=!1;const o=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),a&&this.headers.append("Prefer","count=".concat(a)),new n.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a;if(t&&this.headers.append("Prefer","count=".concat(t)),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(r?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),a&&this.headers.append("Prefer","count=".concat(a)),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return t&&this.headers.append("Prefer","count=".concat(t)),new n.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new n.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,r)=>{e.exports=r(234)},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},980:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const n=r(326),a=n.__importDefault(r(210));t.PostgrestClient=a.default;const s=n.__importDefault(r(829));t.PostgrestQueryBuilder=s.default;const i=n.__importDefault(r(736));t.PostgrestFilterBuilder=i.default;const o=n.__importDefault(r(374));t.PostgrestTransformBuilder=o.default;const l=n.__importDefault(r(286));t.PostgrestBuilder=l.default;const c=n.__importDefault(r(611));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var s=Object.create(null);r.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,r.d(s,i),s}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n,a=r(43),s=r.t(a,2),i=r(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,r,n){return void 0===r&&(r=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function p(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function m(e,t,r,a){void 0===a&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,u=s.history,p=n.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){p=n.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:p,location:w.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"===typeof e?e:f(e);return r=r.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let w={get action(){return p},get location(){return e(s,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,v),m=e,()=>{s.removeEventListener(l,v),m=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=n.Push;let a=h(w.location,e,t);r&&r(a,e),g=y()+1;let o=d(a,g),l=w.createHref(a);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}i&&m&&m({action:p,location:w.location,delta:1})},replace:function(e,t){p=n.Replace;let a=h(w.location,e,t);r&&r(a,e),g=y();let s=d(a,g),o=w.createHref(a);u.replaceState(s,"",o),i&&m&&m({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,r){return void 0===r&&(r="/"),v(e,t,r,!1)}function v(e,t,r,n){let a=R(("string"===typeof t?p(t):t).pathname||"/",r);if(null==a)return null;let s=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=O(a);i=T(s[o],e,n)}return i}function b(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(c(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let o=U([n,i.relativePath]),l=r.concat(i);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of w(e.path))a(e,t,n);else a(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let i=w(n.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,_=3,k=2,S=1,j=10,N=-2,E=e=>"*"===e;function C(e,t){let r=e.split("/"),n=r.length;return r.some(E)&&(n+=N),t&&(n+=k),r.filter(e=>!E(e)).reduce((e,t)=>e+(x.test(t)?_:""===t?S:j),n)}function T(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,a={},s="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===s?t:t.slice(s.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:U([s,u.pathname]),pathnameBase:M(U([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=U([s,u.pathnameBase]))}return i}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:i,pattern:e}}function O(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function P(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function A(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function L(e,t){let r=A(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function D(e,t,r,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=p(e):(a=o({},e),c(!a.pathname||!a.pathname.includes("?"),P("?","pathname","search",a)),c(!a.pathname||!a.pathname.includes("#"),P("#","pathname","hash",a)),c(!a.search||!a.search.includes("#"),P("#","search","hash",a)));let s,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(null==l)s=r;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:a=""}="string"===typeof e?p(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:z(n),hash:F(a)}}(a,s),d=l&&"/"!==l&&l.endsWith("/"),h=(i||"."===l)&&r.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const U=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],V=(new Set(q),["get",...q]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(this,arguments)}const H=a.createContext(null);const K=a.createContext(null);const J=a.createContext(null);const G=a.createContext(null);const $=a.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=a.createContext(null);function Y(){return null!=a.useContext(G)}function X(){return Y()||c(!1),a.useContext(G).location}function Z(e){a.useContext(J).static||a.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=a.useContext($);return e?function(){let{router:e}=de(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),r=a.useRef(!1);return Z(()=>{r.current=!0}),a.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,W({fromRouteId:t},a)))},[e,t])}():function(){Y()||c(!1);let e=a.useContext(H),{basename:t,future:r,navigator:n}=a.useContext(J),{matches:s}=a.useContext($),{pathname:i}=X(),o=JSON.stringify(L(s,r.v7_relativeSplatPath)),l=a.useRef(!1);return Z(()=>{l.current=!0}),a.useCallback(function(r,a){if(void 0===a&&(a={}),!l.current)return;if("number"===typeof r)return void n.go(r);let s=D(r,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:U([t,s.pathname])),(a.replace?n.replace:n.push)(s,a.state,a)},[t,n,o,i,e])}()}function te(){let{matches:e}=a.useContext($),t=e[e.length-1];return t?t.params:{}}function re(e,t){let{relative:r}=void 0===t?{}:t,{future:n}=a.useContext(J),{matches:s}=a.useContext($),{pathname:i}=X(),o=JSON.stringify(L(s,n.v7_relativeSplatPath));return a.useMemo(()=>D(e,JSON.parse(o),i,"path"===r),[e,o,i,r])}function ne(e,t,r,s){Y()||c(!1);let{navigator:i}=a.useContext(J),{matches:o}=a.useContext($),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=X();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(e,{pathname:v});let w=le(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:U([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:U([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,r,s);return t&&w?a.createElement(G.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:n.Pop}},w):w}function ae(){let e=function(){var e;let t=a.useContext(Q),r=he(ue.UseRouteError),n=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),r?a.createElement("pre",{style:s},r):null,null)}const se=a.createElement(ae,null);class ie extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement($.Provider,{value:this.props.routeContext},a.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:r,children:n}=e,s=a.useContext(H);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),a.createElement($.Provider,{value:t},n)}function le(e,t,r,n){var s;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let a=0;a<o.length;a++){let e=o[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=a),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,n,s)=>{let i,c=!1,h=null,f=null;var p;r&&(i=l&&n.route.id?l[n.route.id]:void 0,h=n.route.errorElement||se,u&&(d<0&&0===s?(p="route-fallback",!1||pe[p]||(pe[p]=!0),c=!0,f=null):d===s&&(c=!0,f=n.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=i?h:c?f:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(oe,{match:n,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===s)?a.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let t=a.useContext(H);return t||c(!1),t}function he(e){let t=a.useContext(K);return t||c(!1),t}function fe(e){let t=function(){let e=a.useContext($);return e||c(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||c(!1),r.route.id}const pe={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ge(e){let{to:t,replace:r,state:n,relative:s}=e;Y()||c(!1);let{future:i,static:o}=a.useContext(J),{matches:l}=a.useContext($),{pathname:u}=X(),d=ee(),h=D(t,L(l,i.v7_relativeSplatPath),u,"path"===s),f=JSON.stringify(h);return a.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:s}),[d,f,s,r,n]),null}function ye(e){c(!1)}function ve(e){let{basename:t="/",children:r=null,location:s,navigationType:i=n.Pop,navigator:o,static:l=!1,future:u}=e;Y()&&c(!1);let d=t.replace(/^\/*/,"/"),h=a.useMemo(()=>({basename:d,navigator:o,static:l,future:W({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);"string"===typeof s&&(s=p(s));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=s,b=a.useMemo(()=>{let e=R(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:i}},[d,f,m,g,y,v,i]);return null==b?null:a.createElement(J.Provider,{value:h},a.createElement(G.Provider,{children:r,value:b}))}function be(e){let{children:t,location:r}=e;return ne(we(t),r)}new Promise(()=>{});a.Component;function we(e,t){void 0===t&&(t=[]);let r=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let s=[...t,n];if(e.type===a.Fragment)return void r.push.apply(r,we(e.props.children,s));e.type!==ye&&c(!1),e.props.index&&e.props.children&&c(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=we(e.props.children,s)),r.push(i)}),r}var xe=r(950),_e=r.t(xe,2);function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ke.apply(this,arguments)}function Se(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const je=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(dd){}new Map;const Ne=s.startTransition;_e.flushSync,s.useId;function Ee(e){let{basename:t,children:r,future:n,window:s}=e,i=a.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),m(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return h("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,o)));let l=i.current,[c,u]=a.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},p=a.useCallback(e=>{d&&Ne?Ne(()=>u(e)):u(e)},[u,d]);return a.useLayoutEffect(()=>l.listen(p),[l,p]),a.useEffect(()=>me(n),[n]),a.createElement(ve,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:n})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=a.forwardRef(function(e,t){let r,{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p}=e,m=Se(e,je),{basename:g}=a.useContext(J),y=!1;if("string"===typeof d&&Te.test(d)&&(r=d,Ce))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),r=R(t.pathname,g);t.origin===e.origin&&null!=r?d=r+t.search+t.hash:y=!0}catch(dd){}let v=function(e,t){let{relative:r}=void 0===t?{}:t;Y()||c(!1);let{basename:n,navigator:s}=a.useContext(J),{hash:i,pathname:o,search:l}=re(e,{relative:r}),u=o;return"/"!==n&&(u="/"===o?n:U([n,o])),s.createHref({pathname:u,search:l,hash:i})}(d,{relative:s}),b=function(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=ee(),u=X(),d=re(e,{relative:o});return a.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:f(u)===f(d);c(e,{replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:p});return a.createElement("a",ke({},m,{href:r||v,onClick:y||i?n:function(e){n&&n(e),e.defaultPrevented||b(e)},ref:t,target:u}))});var Oe,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Oe||(Oe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Ae(e){var t=function(e,t){if("object"!=Pe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pe(t)?t:t+""}function Le(e,t,r){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach(function(t){Le(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Me=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=63&a|128):55296===(64512&a)&&n+1<e.length&&56320===(64512&e.charCodeAt(n+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++n)),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=63&a|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=63&a|128)}return t},ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const t=e[a],s=a+1<e.length,i=s?e[a+1]:0,o=a+2<e.length,l=o?e[a+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),n.push(r[c],r[u],r[d],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Me(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((31&a)<<6|63&s)}else if(a>239&&a<365){const s=((7&a)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const t=r[e.charAt(a++)],s=a<e.length?r[e.charAt(a)]:0;++a;const i=a<e.length?r[e.charAt(a)]:64;++a;const o=a<e.length?r[e.charAt(a)]:64;if(++a,null==t||null==s||null==i||null==o)throw new Fe;const l=t<<2|s>>4;if(n.push(l),64!==i){const e=s<<4&240|i>>2;if(n.push(e),64!==o){const e=i<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Be=function(e){return function(e){const t=Me(e);return ze.encodeByteArray(t,!0)}(e).replace(/\./g,"")},qe=function(e){try{return ze.decodeString(e,!0)}catch(dd){console.error("base64Decode failed: ",dd)}return null};const Ve=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,We=()=>{try{return Ve()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(dd){return}const t=e&&qe(e[1]);return t&&JSON.parse(t)})()}catch(dd){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(dd))}},He=e=>{var t,r;return null===(r=null===(t=We())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},Ke=()=>{var e;return null===(e=We())||void 0===e?void 0:e.config},Je=e=>{var t;return null===(t=We())||void 0===t?void 0:t["_".concat(e)]};class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function $e(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}class Qe extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ye.prototype.create)}}class Ye{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},r="".concat(this.service,"/").concat(e),n=this.errors[e],a=n?function(e,t){return e.replace(Xe,(e,r)=>{const n=t[r];return null!=n?String(n):"<".concat(r,"?>")})}(n,t):"Error",s="".concat(this.serviceName,": ").concat(a," (").concat(r,").");return new Qe(r,s,t)}}const Xe=/\{\$([^}]+)}/g;function Ze(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const r=e[a],s=t[a];if(et(r)&&et(s)){if(!Ze(r,s))return!1}else if(r!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function et(e){return null!==e&&"object"===typeof e}function tt(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function rt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}}),t}function nt(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}class at{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");n=function(e,t){if("object"!==typeof e||null===e)return!1;for(const r of t)if(r in e&&"function"===typeof e[r])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===n.next&&(n.next=st),void 0===n.error&&(n.error=st),void 0===n.complete&&(n.complete=st);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(dd){}}),this.observers.push(n),a}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(dd){"undefined"!==typeof console&&console.error&&console.error(dd)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function st(){}function it(e){return e&&e._delegate?e._delegate:e}class ot{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lt="[DEFAULT]";class ct{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ge;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(dd){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),n=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(dd){if(n)return null;throw dd}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:lt})}catch(dd){}for(const[e,t]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(dd){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,s]of this.instancesDeferred.entries()){r===this.normalizeInstanceIdentifier(a)&&s.resolve(n)}return n}onInit(e,t){var r;const n=this.normalizeInstanceIdentifier(t),a=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;a.add(e),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&e(s,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const n of r)try{n(e,t)}catch(Lo){}}getOrInitializeService(e){let{instanceIdentifier:t,options:r={}}=e,n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(a=t,a===lt?void 0:a),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(Lo){}var a;return n||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.component?this.component.multipleInstances?e:lt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ct(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const dt=[];var ht;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ht||(ht={}));const ft={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},pt=ht.INFO,mt={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},gt=function(e,t){if(t<e.logLevel)return;const r=(new Date).toISOString(),n=mt[t];if(!n)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];console[n]("[".concat(r,"]  ").concat(e.name,":"),...s)};class yt{constructor(e){this.name=e,this._logLevel=pt,this._logHandler=gt,this._userLogHandler=null,dt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ft[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}let vt,bt;const wt=new WeakMap,xt=new WeakMap,_t=new WeakMap,kt=new WeakMap,St=new WeakMap;let jt={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return xt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_t.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ct(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Nt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bt||(bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(Tt(this),r),Ct(wt.get(this))}:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ct(e.apply(Tt(this),r))}:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];const s=e.call(Tt(this),t,...n);return _t.set(s,t.sort?t.sort():[t]),Ct(s)}}function Et(e){return"function"===typeof e?Nt(e):(e instanceof IDBTransaction&&function(e){if(xt.has(e))return;const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",s),e.removeEventListener("abort",s)},a=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",a),e.addEventListener("error",s),e.addEventListener("abort",s)});xt.set(e,t)}(e),t=e,(vt||(vt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,jt):e);var t}function Ct(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("success",a),e.removeEventListener("error",s)},a=()=>{t(Ct(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",a),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&wt.set(t,e)}).catch(()=>{}),St.set(t,e),t}(e);if(kt.has(e))return kt.get(e);const t=Et(e);return t!==e&&(kt.set(e,t),St.set(t,e)),t}const Tt=e=>St.get(e);const It=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],Rt=new Map;function Pt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Rt.get(t))return Rt.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Ot.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!a&&!It.includes(r))return;const s=async function(e){const t=this.transaction(e,a?"readwrite":"readonly");let s=t.store;for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return n&&(s=s.index(o.shift())),(await Promise.all([s[r](...o),a&&t.done]))[0]};return Rt.set(t,s),s}jt=(e=>Ue(Ue({},e),{},{get:(t,r,n)=>Pt(t,r)||e.get(t,r,n),has:(t,r)=>!!Pt(t,r)||e.has(t,r)}))(jt);class At{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Lt="@firebase/app",Dt="0.10.13",Ut=new yt("@firebase/app"),Mt="@firebase/app-compat",zt="@firebase/analytics-compat",Ft="@firebase/analytics",Bt="@firebase/app-check-compat",qt="@firebase/app-check",Vt="@firebase/auth",Wt="@firebase/auth-compat",Ht="@firebase/database",Kt="@firebase/data-connect",Jt="@firebase/database-compat",Gt="@firebase/functions",$t="@firebase/functions-compat",Qt="@firebase/installations",Yt="@firebase/installations-compat",Xt="@firebase/messaging",Zt="@firebase/messaging-compat",er="@firebase/performance",tr="@firebase/performance-compat",rr="@firebase/remote-config",nr="@firebase/remote-config-compat",ar="@firebase/storage",sr="@firebase/storage-compat",ir="@firebase/firestore",or="@firebase/vertexai-preview",lr="@firebase/firestore-compat",cr="firebase",ur="[DEFAULT]",dr={[Lt]:"fire-core",[Mt]:"fire-core-compat",[Ft]:"fire-analytics",[zt]:"fire-analytics-compat",[qt]:"fire-app-check",[Bt]:"fire-app-check-compat",[Vt]:"fire-auth",[Wt]:"fire-auth-compat",[Ht]:"fire-rtdb",[Kt]:"fire-data-connect",[Jt]:"fire-rtdb-compat",[Gt]:"fire-fn",[$t]:"fire-fn-compat",[Qt]:"fire-iid",[Yt]:"fire-iid-compat",[Xt]:"fire-fcm",[Zt]:"fire-fcm-compat",[er]:"fire-perf",[tr]:"fire-perf-compat",[rr]:"fire-rc",[nr]:"fire-rc-compat",[ar]:"fire-gcs",[sr]:"fire-gcs-compat",[ir]:"fire-fst",[lr]:"fire-fst-compat",[or]:"fire-vertex","fire-js":"fire-js",[cr]:"fire-js-all"},hr=new Map,fr=new Map,pr=new Map;function mr(e,t){try{e.container.addComponent(t)}catch(dd){Ut.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),dd)}}function gr(e){const t=e.name;if(pr.has(t))return Ut.debug("There were multiple attempts to register component ".concat(t,".")),!1;pr.set(t,e);for(const r of hr.values())mr(r,e);for(const r of fr.values())mr(r,e);return!0}function yr(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function vr(e){return void 0!==e.settings}const br=new Ye("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class wr{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}const xr="10.14.1";function _r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;if("object"!==typeof t){t={name:t}}const n=Object.assign({name:ur,automaticDataCollectionEnabled:!1},t),a=n.name;if("string"!==typeof a||!a)throw br.create("bad-app-name",{appName:String(a)});if(r||(r=Ke()),!r)throw br.create("no-options");const s=hr.get(a);if(s){if(Ze(r,s.options)&&Ze(n,s.config))return s;throw br.create("duplicate-app",{appName:a})}const i=new ut(a);for(const l of pr.values())i.addComponent(l);const o=new wr(r,n,i);return hr.set(a,o),o}function kr(e,t,r){var n;let a=null!==(n=dr[e])&&void 0!==n?n:e;r&&(a+="-".concat(r));const s=a.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const e=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),s&&i&&e.push("and"),i&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ut.warn(e.join(" "))}gr(new ot("".concat(a,"-version"),()=>({library:a,version:t}),"VERSION"))}const Sr="firebase-heartbeat-store";let jr=null;function Nr(){return jr||(jr=function(e,t){let{blocked:r,upgrade:n,blocking:a,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),o=Ct(i);return n&&i.addEventListener("upgradeneeded",e=>{n(Ct(i.result),e.oldVersion,e.newVersion,Ct(i.transaction),e)}),r&&i.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Sr)}catch(dd){console.warn(dd)}}}).catch(e=>{throw br.create("idb-open",{originalErrorMessage:e.message})})),jr}async function Er(e,t){try{const r=(await Nr()).transaction(Sr,"readwrite"),n=r.objectStore(Sr);await n.put(t,Cr(e)),await r.done}catch(dd){if(dd instanceof Qe)Ut.warn(dd.message);else{const t=br.create("idb-set",{originalErrorMessage:null===dd||void 0===dd?void 0:dd.message});Ut.warn(t.message)}}}function Cr(e){return"".concat(e.name,"!").concat(e.options.appId)}class Tr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Or(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Ir();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(dd){Ut.warn(dd)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ir(),{heartbeatsToSend:r,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const r=[];let n=e.slice();for(const a of e){const e=r.find(e=>e.agent===a.agent);if(e){if(e.dates.push(a.date),Rr(r)>t){e.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Rr(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),a=Be(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(dd){return Ut.warn(dd),""}}}function Ir(){return(new Date).toISOString().substring(0,10)}class Or{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(dd){return!1}}()&&new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(r){t(r)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Nr()).transaction(Sr),r=await t.objectStore(Sr).get(Cr(e));return await t.done,r}catch(dd){if(dd instanceof Qe)Ut.warn(dd.message);else{const t=br.create("idb-get",{originalErrorMessage:null===dd||void 0===dd?void 0:dd.message});Ut.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Er(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Er(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function Rr(e){return Be(JSON.stringify({version:2,heartbeats:e})).length}var Pr;Pr="",gr(new ot("platform-logger",e=>new At(e),"PRIVATE")),gr(new ot("heartbeat",e=>new Tr(e),"PRIVATE")),kr(Lt,Dt,Pr),kr(Lt,Dt,"esm2017"),kr("fire-js","");var Ar=r(326);function Lr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dr=Lr,Ur=new Ye("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mr=new yt("@firebase/auth");function zr(e){if(Mr.logLevel<=ht.ERROR){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Mr.error("Auth (".concat(xr,"): ").concat(e),...r)}}function Fr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Hr(e,...r)}function Br(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Hr(e,...r)}function qr(e,t,r){const n=Object.assign(Object.assign({},Dr()),{[t]:r});return new Ye("auth","Firebase",n).create(t,{appName:e.name})}function Vr(e){return qr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wr(e,t,r){if(!(t instanceof r))throw r.name!==t.constructor.name&&Fr(e,"argument-error"),qr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Hr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("string"!==typeof e){const t=r[0],n=[...r.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(t,...n)}return Ur.create(e,...r)}function Kr(e,t){if(!e){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];throw Hr(t,...n)}}function Jr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zr(t),new Error(t)}function Gr(e,t){e||Jr(t)}function $r(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Qr(){return"http:"===Yr()||"https:"===Yr()}function Yr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Xr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Qr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Zr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Xr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function en(e,t){Gr(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?"".concat(r).concat(t.startsWith("/")?t.slice(1):t):r}class tn{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},nn=new Zr(3e4,6e4);function an(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function sn(e,t,r,n){return on(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let a={},s={};n&&("GET"===t?s=n:a={body:JSON.stringify(n)});const i=tt(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},a);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),tn.fetch()(cn(e,e.config.apiHost,r,i),l)})}async function on(e,t,r){e._canInitEmulator=!1;const n=Object.assign(Object.assign({},rn),t);try{const t=new dn(e),a=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw hn(e,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const t=a.ok?s.errorMessage:s.error.message,[r,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw hn(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===r)throw hn(e,"email-already-in-use",s);if("USER_DISABLED"===r)throw hn(e,"user-disabled",s);const o=n[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw qr(e,o,i);Fr(e,o)}}catch(dd){if(dd instanceof Qe)throw dd;Fr(e,"network-request-failed",{message:String(dd)})}}async function ln(e,t,r,n){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await sn(e,t,r,n,a);return"mfaPendingCredential"in s&&Fr(e,"multi-factor-auth-required",{_serverResponse:s}),s}function cn(e,t,r,n){const a="".concat(t).concat(r,"?").concat(n);return e.config.emulator?en(e.config,a):"".concat(e.config.apiScheme,"://").concat(a)}function un(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Br(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hn(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Br(e,t,n);return a.customData._tokenResponse=r,a}function fn(e){return void 0!==e&&void 0!==e.enterprise}class pn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return un(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function mn(e,t){return sn(e,"GET","/v2/recaptchaConfig",an(e,t))}async function gn(e,t){return sn(e,"POST","/v1/accounts:lookup",t)}function yn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(dd){}}function vn(e){return 1e3*Number(e)}function bn(e){const[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return zr("JWT malformed, contained fewer than 3 sections"),null;try{const e=qe(r);return e?JSON.parse(e):(zr("Failed to decode base64 JWT payload"),null)}catch(dd){return zr("Caught error parsing JWT payload as JSON",null===dd||void 0===dd?void 0:dd.toString()),null}}function wn(e){const t=bn(e);return Kr(t,"internal-error"),Kr("undefined"!==typeof t.exp,"internal-error"),Kr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function xn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(dd){throw dd instanceof Qe&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(dd)&&e.auth.currentUser===e&&await e.auth.signOut(),dd}}class _n{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(dd){return void((null===dd||void 0===dd?void 0:dd.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class kn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yn(this.lastLoginAt),this.creationTime=yn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sn(e){var t;const r=e.auth,n=await e.getIdToken(),a=await xn(e,gn(r,{idToken:n}));Kr(null===a||void 0===a?void 0:a.users.length,r,"internal-error");const s=a.users[0];e._notifyReloadListener(s);const i=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?jn(s.providerUserInfo):[],o=(l=e.providerData,c=i,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new kn(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function jn(e){return e.map(e=>{var{providerId:t}=e,r=(0,Ar.__rest)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}class Nn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kr(e.idToken,"internal-error"),Kr("undefined"!==typeof e.idToken,"internal-error"),Kr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):wn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Kr(0!==e.length,"internal-error");const t=wn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Kr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:n,expiresIn:a}=await async function(e,t){const r=await on(e,{},async()=>{const r=tt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:a}=e.config,s=cn(e,n,"/v1/token","key=".concat(a)),i=await e._getAdditionalHeaders();return i["Content-Type"]="application/x-www-form-urlencoded",tn.fetch()(s,{method:"POST",headers:i,body:r})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}(e,t);this.updateTokensAndExpiration(r,n,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:n,expirationTime:a}=t,s=new Nn;return r&&(Kr("string"===typeof r,"internal-error",{appName:e}),s.refreshToken=r),n&&(Kr("string"===typeof n,"internal-error",{appName:e}),s.accessToken=n),a&&(Kr("number"===typeof a,"internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nn,this.toJSON())}_performRefresh(){return Jr("not implemented")}}function En(e,t){Kr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Cn{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,a=(0,Ar.__rest)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _n(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new kn(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await xn(this,this.stsTokenManager.getToken(this.auth,e));return Kr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=it(e),n=await r.getIdToken(t),a=bn(n);Kr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s="object"===typeof a.firebase?a.firebase:void 0,i=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:yn(vn(a.auth_time)),issuedAtTime:yn(vn(a.iat)),expirationTime:yn(vn(a.exp)),signInProvider:i||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=it(e);await Sn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Kr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Kr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Sn(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vr(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await xn(this,async function(e,t){return sn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,a,s,i,o,l,c;const u=null!==(r=t.displayName)&&void 0!==r?r:void 0,d=null!==(n=t.email)&&void 0!==n?n:void 0,h=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(i=t.tenantId)&&void 0!==i?i:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=t;Kr(v&&_,e,"internal-error");const k=Nn.fromJSON(this.name,_);Kr("string"===typeof v,e,"internal-error"),En(u,e.name),En(d,e.name),Kr("boolean"===typeof b,e,"internal-error"),Kr("boolean"===typeof w,e,"internal-error"),En(h,e.name),En(f,e.name),En(p,e.name),En(m,e.name),En(g,e.name),En(y,e.name);const S=new Cn({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(S.providerData=x.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=new Nn;n.updateFromServerResponse(t);const a=new Cn({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await Sn(a),a}static async _fromGetAccountInfoResponse(e,t,r){const n=t.users[0];Kr(void 0!==n.localId,"internal-error");const a=void 0!==n.providerUserInfo?jn(n.providerUserInfo):[],s=!(n.email&&n.passwordHash)&&!(null===a||void 0===a?void 0:a.length),i=new Nn;i.updateFromIdToken(r);const o=new Cn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s}),l={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:a,metadata:new kn(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(null===a||void 0===a?void 0:a.length)};return Object.assign(o,l),o}}const Tn=new Map;function In(e){Gr(e instanceof Function,"Expected a class definition");let t=Tn.get(e);return t?(Gr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Tn.set(e,t),t)}class On{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}On.type="NONE";const Rn=On;function Pn(e,t,r){return"firebase".concat(":",e,":").concat(t,":").concat(r)}class An{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:a}=this.auth;this.fullUserKey=Pn(this.userKey,n.apiKey,a),this.fullPersistenceKey=Pn("persistence",n.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new An(In(Rn),e,r);const n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let a=n[0]||In(Rn);const s=Pn(r,e.config.apiKey,e.name);let i=null;for(const l of t)try{const t=await l._get(s);if(t){const r=Cn._fromJSON(e,t);l!==a&&(i=r),a=l;break}}catch(Lo){}const o=n.filter(e=>e._shouldAllowMigration);return a._shouldAllowMigration&&o.length?(a=o[0],i&&await a._set(s,i.toJSON()),await Promise.all(t.map(async e=>{if(e!==a)try{await e._remove(s)}catch(Lo){}})),new An(a,e,r)):new An(a,e,r)}}function Ln(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Dn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Bn(t))return"Blackberry";if(qn(t))return"Webos";if(Un(t))return"Safari";if((t.includes("chrome/")||Mn(t))&&!t.includes("edge/"))return"Chrome";if(Fn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(t);if(2===(null===r||void 0===r?void 0:r.length))return r[1]}return"Other"}function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/firefox\//i.test(e)}function Un(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/crios\//i.test(e)}function zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/iemobile/i.test(e)}function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/android/i.test(e)}function Bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/blackberry/i.test(e)}function qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/webos/i.test(e)}function Vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Wn(){return function(){const e=$e();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return Vn(e)||Fn(e)||qn(e)||Bn(e)||/windows phone/i.test(e)||zn(e)}function Kn(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ln($e());break;case"Worker":t="".concat(Ln($e()),"-").concat(e);break;default:t=e}const n=r.length?r.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xr,"/").concat(n)}class Jn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=t=>new Promise((r,n)=>{try{r(e(t))}catch(dd){n(dd)}});r.onAbort=t,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(dd){t.reverse();for(const n of t)try{n()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===dd||void 0===dd?void 0:dd.message})}}}class Gn{constructor(e){var t,r,n,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(a=e.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,n,a,s,i;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(r=o.meetsMaxPasswordLength)||void 0===r||r),o.isValid&&(o.isValid=null===(n=o.containsLowercaseLetter)||void 0===n||n),o.isValid&&(o.isValid=null===(a=o.containsUppercaseLetter)||void 0===a||a),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNonAlphanumericCharacter)||void 0===i||i),o}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class $n{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yn(this),this.idTokenSubscription=new Yn(this),this.beforeStateQueue=new Jn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ur,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=In(t)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await An.create(this,e),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(dd){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(n=this.currentUser)||void 0===n?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await gn(this,{idToken:e}),r=await Cn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(vr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===n||void 0===n?void 0:n._redirectEventId,i=await this.tryRedirectSignIn(e);r&&r!==s||!(null===i||void 0===i?void 0:i.user)||(n=i.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(dd){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(dd))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Kr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(dd){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sn(e)}catch(dd){if((null===dd||void 0===dd?void 0:dd.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vr(this.app))return Promise.reject(Vr(this));const t=e?it(e):null;return t&&Kr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Kr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vr(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vr(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(In(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return sn(e,"GET","/v2/passwordPolicy",an(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Gn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ye("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return sn(e,"POST","/v2/accounts:revokeToken",an(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&In(e)||this._popupRedirectResolver;Kr(t,this,"argument-error"),this.redirectPersistenceManager=await An.create(this,[In(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};const a="function"===typeof t?t:t.next.bind(t);let s=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kr(i,this,"internal-error"),i.then(()=>{s||a(this.currentUser)}),"function"===typeof t){const a=e.addObserver(t,r,n);return()=>{s=!0,a()}}{const r=e.addObserver(t);return()=>{s=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Mr.logLevel<=ht.WARN){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Mr.warn("Auth (".concat(xr,"): ").concat(e),...r)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Qn(e){return it(e)}class Yn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const r=new at(e,t);return r.subscribe.bind(r)}(e=>this.observer=e)}get next(){return Kr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zn(e){return Xn.loadJS(e)}function ea(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ta{constructor(e){this.type="recaptcha-enterprise",this.auth=Qn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(t,r,n){const a=window.grecaptcha;fn(a)?a.enterprise.ready(()=>{a.enterprise.execute(t,{action:e}).then(e=>{r(e)}).catch(()=>{r("NO_RECAPTCHA")})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,n)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,r)=>{mn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(n=>{if(void 0!==n.recaptchaKey){const r=new pn(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{r(e)})})})(this.auth).then(a=>{if(!t&&fn(window.grecaptcha))r(a,e,n);else{if("undefined"===typeof window)return void n(new Error("RecaptchaVerifier is only supported in browser"));let t=Xn.recaptchaEnterpriseScript;0!==t.length&&(t+=a),Zn(t).then(()=>{r(a,e,n)}).catch(e=>{n(e)})}}).catch(e=>{n(e)})})}}async function ra(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=new ta(e);let s;try{s=await a.verify(r)}catch(o){s=await a.verify(r,!0)}const i=Object.assign({},t);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function na(e,t,r,n){var a;if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ra(e,t,r,"getOobCode"===r);return n(e,a)}return n(e,t).catch(async a=>{if(a.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(r," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const a=await ra(e,t,r,"getOobCode"===r);return n(e,a)}return Promise.reject(a)})}function aa(e,t,r){const n=Qn(e);Kr(n._canInitEmulator,n,"emulator-config-failed"),Kr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!!(null===r||void 0===r?void 0:r.disableWarnings),s=sa(t),{host:i,port:o}=function(e){const t=sa(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const e=a[1];return{host:e,port:ia(n.substr(e.length+1))}}{const[e,t]=n.split(":");return{host:e,port:ia(t)}}}(t),l=null===o?"":":".concat(o);n.config.emulator={url:"".concat(s,"//").concat(i).concat(l,"/")},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function sa(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ia(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class oa{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,t){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}async function la(e,t){return sn(e,"POST","/v1/accounts:signUp",t)}async function ca(e,t){return ln(e,"POST","/v1/accounts:signInWithPassword",an(e,t))}async function ua(e,t){return sn(e,"POST","/v1/accounts:sendOobCode",an(e,t))}async function da(e,t){return ua(e,t)}class ha extends oa{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new ha(e,t,"password")}static _fromEmailAndCode(e,t){return new ha(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return na(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ca);case"emailLink":return async function(e,t){return ln(e,"POST","/v1/accounts:signInWithEmailLink",an(e,t))}(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return na(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",la);case"emailLink":return async function(e,t){return ln(e,"POST","/v1/accounts:signInWithEmailLink",an(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function fa(e,t){return ln(e,"POST","/v1/accounts:signInWithIdp",an(e,t))}class pa extends oa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,a=(0,Ar.__rest)(t,["providerId","signInMethod"]);if(!r||!n)return null;const s=new pa(r,n);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){return fa(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,fa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fa(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tt(t)}return e}}const ma={USER_NOT_FOUND:"user-not-found"};class ga extends oa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ga({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ga({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ln(e,"POST","/v1/accounts:signInWithPhoneNumber",an(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const r=await ln(e,"POST","/v1/accounts:signInWithPhoneNumber",an(e,t));if(r.temporaryProof)throw hn(e,"account-exists-with-different-credential",r);return r}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ln(e,"POST","/v1/accounts:signInWithPhoneNumber",an(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ma)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:a}=e;return r||t||n||a?new ga({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:a}):null}}class ya{constructor(e){var t,r,n,a,s,i;const o=rt(nt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(r=o.oobCode)&&void 0!==r?r:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(n=o.mode)&&void 0!==n?n:null);Kr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(a=o.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(i=o.tenantId)&&void 0!==i?i:null}static parseLink(e){const t=function(e){const t=rt(nt(e)).link,r=t?rt(nt(t)).deep_link_id:null,n=rt(nt(e)).deep_link_id;return(n?rt(nt(n)).link:null)||n||r||t||e}(e);try{return new ya(t)}catch(Lo){return null}}}class va{constructor(){this.providerId=va.PROVIDER_ID}static credential(e,t){return ha._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ya.parseLink(t);return Kr(r,"argument-error"),ha._fromEmailAndCode(e,r.code,r.tenantId)}}va.PROVIDER_ID="password",va.EMAIL_PASSWORD_SIGN_IN_METHOD="password",va.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ba{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wa extends ba{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xa extends wa{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return xa.credential(t.oauthAccessToken)}catch(Lo){return null}}}xa.FACEBOOK_SIGN_IN_METHOD="facebook.com",xa.PROVIDER_ID="facebook.com";class _a extends wa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pa._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return _a.credential(r,n)}catch(Lo){return null}}}_a.GOOGLE_SIGN_IN_METHOD="google.com",_a.PROVIDER_ID="google.com";class ka extends wa{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ka.credentialFromTaggedObject(e)}static credentialFromError(e){return ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ka.credential(t.oauthAccessToken)}catch(Lo){return null}}}ka.GITHUB_SIGN_IN_METHOD="github.com",ka.PROVIDER_ID="github.com";class Sa extends wa{constructor(){super("twitter.com")}static credential(e,t){return pa._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return Sa.credential(r,n)}catch(Lo){return null}}}async function ja(e,t){return ln(e,"POST","/v1/accounts:signUp",an(e,t))}Sa.TWITTER_SIGN_IN_METHOD="twitter.com",Sa.PROVIDER_ID="twitter.com";class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=await Cn._fromIdTokenResponse(e,r,n),s=Ea(r);return new Na({user:a,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const n=Ea(r);return new Na({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function Ea(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ca extends Qe{constructor(e,t,r,n){var a;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,Ca.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new Ca(e,t,r,n)}}function Ta(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(r=>{if(r.code==="auth/".concat("multi-factor-auth-required"))throw Ca._fromErrorAndOperation(e,r,t,n);throw r})}async function Ia(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await xn(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Na._forOperation(e,"link",n)}async function Oa(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:n}=e;if(vr(n.app))return Promise.reject(Vr(n));const a="reauthenticate";try{const s=await xn(e,Ta(n,a,t,e),r);Kr(s.idToken,n,"internal-error");const i=bn(s.idToken);Kr(i,n,"internal-error");const{sub:o}=i;return Kr(e.uid===o,n,"user-mismatch"),Na._forOperation(e,a,s)}catch(dd){throw(null===dd||void 0===dd?void 0:dd.code)==="auth/".concat("user-not-found")&&Fr(n,"user-mismatch"),dd}}async function Ra(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(vr(e.app))return Promise.reject(Vr(e));const n="signIn",a=await Ta(e,n,t),s=await Na._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function Pa(e,t){return Ra(Qn(e),t)}async function Aa(e,t){return Oa(it(e),t)}function La(e,t,r){var n;Kr((null===(n=r.url)||void 0===n?void 0:n.length)>0,e,"invalid-continue-uri"),Kr("undefined"===typeof r.dynamicLinkDomain||r.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=r.url,t.dynamicLinkDomain=r.dynamicLinkDomain,t.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&(Kr(r.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=r.iOS.bundleId),r.android&&(Kr(r.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=r.android.installApp,t.androidMinimumVersionCode=r.android.minimumVersion,t.androidPackageName=r.android.packageName)}async function Da(e){const t=Qn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ua(e,t){const r=it(e),n={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&La(r.auth,n,t);const{email:a}=await async function(e,t){return ua(e,t)}(r.auth,n);a!==e.email&&await e.reload()}async function Ma(e,t){let{displayName:r,photoURL:n}=t;if(void 0===r&&void 0===n)return;const a=it(e),s={idToken:await a.getIdToken(),displayName:r,photoUrl:n,returnSecureToken:!0},i=await xn(a,async function(e,t){return sn(e,"POST","/v1/accounts:update",t)}(a.auth,s));a.displayName=i.displayName||null,a.photoURL=i.photoUrl||null;const o=a.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=a.displayName,o.photoURL=a.photoURL),await a._updateTokensIfNecessary(i)}new WeakMap;const za="__sak";class Fa{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(za,"1"),this.storage.removeItem(za),Promise.resolve(!0)):Promise.resolve(!1)}catch(Lo){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ba extends Fa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});const r=e.key;t?this.detachListener():this.stopPolling();const n=()=>{const e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},a=this.storage.getItem(r);Wn()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ba.type="LOCAL";const qa=Ba;class Va extends Fa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Va.type="SESSION";const Wa=Va;class Ha{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const r=new Ha(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:n,data:a}=t.data,s=this.handlersMap[n];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const i=Array.from(s).map(async e=>e(t.origin,a)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(i);t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ka(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="";for(let n=0;n<t;n++)r+=Math.floor(10*Math.random());return e+r}Ha.receivers=[];class Ja{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const n="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let a,s;return new Promise((i,o)=>{const l=Ka("",20);n.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},r);s={messageChannel:n,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),i(t.data.response);break;default:clearTimeout(c),clearTimeout(a),o(new Error("invalid_response"))}}},this.handlers.add(s),n.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[n.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Ga(){return window}function $a(){return"undefined"!==typeof Ga().WorkerGlobalScope&&"function"===typeof Ga().importScripts}const Qa="firebaseLocalStorageDb",Ya="firebaseLocalStorage",Xa="fbase_key";class Za{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function es(e,t){return e.transaction([Ya],t?"readwrite":"readonly").objectStore(Ya)}function ts(){const e=indexedDB.open(Qa,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ya,{keyPath:Xa})}catch(dd){r(dd)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(Ya)?t(r):(r.close(),await function(){const e=indexedDB.deleteDatabase(Qa);return new Za(e).toPromise()}(),t(await ts()))})})}async function rs(e,t,r){const n=es(e,!0).put({[Xa]:t,value:r});return new Za(n).toPromise()}function ns(e,t){const r=es(e,!0).delete(t);return new Za(r).toPromise()}class as{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ts()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(dd){if(t++>3)throw dd;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $a()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ha._getInstance($a()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ja(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=r[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(Lo){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ts();return await rs(e,za,"1"),await ns(e,za),!0}catch(Lo){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>rs(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const r=es(e,!1).get(t),n=await new Za(r).toPromise();return void 0===n?null:n.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ns(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=es(e,!1).getAll();return new Za(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],r=new Set;if(0!==e.length)for(const{fbase_key:n,value:a}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(a)&&(this.notifyListeners(n,a),t.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),t.push(n));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}as.type="LOCAL";const ss=as;ea("rcb"),new Zr(3e4,6e4);const is="recaptcha";async function os(e,t,r){var n;const a=await r.verify();try{let s;if(Kr("string"===typeof a,e,"argument-error"),Kr(r.type===is,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Kr("enroll"===t.type,e,"internal-error");const r=await function(e,t){return sn(e,"POST","/v2/accounts/mfaEnrollment:start",an(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:a}});return r.phoneSessionInfo.sessionInfo}{Kr("signin"===t.type,e,"internal-error");const r=(null===(n=s.multiFactorHint)||void 0===n?void 0:n.uid)||s.multiFactorUid;Kr(r,e,"missing-multi-factor-info");const i=await function(e,t){return sn(e,"POST","/v2/accounts/mfaSignIn:start",an(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:r,phoneSignInInfo:{recaptchaToken:a}});return i.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return sn(e,"POST","/v1/accounts:sendVerificationCode",an(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:a});return t}}finally{r._reset()}}class ls{constructor(e){this.providerId=ls.PROVIDER_ID,this.auth=Qn(e)}verifyPhoneNumber(e,t){return os(this.auth,e,it(t))}static credential(e,t){return ga._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ls.credentialFromTaggedObject(t)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:r,temporaryProof:n}=t;return r&&n?ga._fromTokenResponse(r,n):null}}function cs(e,t){return t?In(t):(Kr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ls.PROVIDER_ID="phone",ls.PHONE_SIGN_IN_METHOD="phone";class us extends oa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ds(e){return Ra(e.auth,new us(e),e.bypassAuthState)}function hs(e){const{auth:t,user:r}=e;return Kr(r,t,"internal-error"),Oa(r,new us(e),e.bypassAuthState)}async function fs(e){const{auth:t,user:r}=e;return Kr(r,t,"internal-error"),Ia(r,new us(e),e.bypassAuthState)}class ps{constructor(e,t,r,n){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(dd){this.reject(dd)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:n,tenantId:a,error:s,type:i}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(o))}catch(dd){this.reject(dd)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ds;case"linkViaPopup":case"linkViaRedirect":return fs;case"reauthViaPopup":case"reauthViaRedirect":return hs;default:Fr(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ms=new Zr(2e3,1e4);class gs extends ps{constructor(e,t,r,n,a){super(e,t,n,a),this.provider=r,this.authWindow=null,this.pollId=null,gs.currentPopupAction&&gs.currentPopupAction.cancel(),gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kr(e,this.auth,"internal-error"),e}async onExecution(){Gr(1===this.filter.length,"Popup operations only handle one event");const e=Ka();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;(null===(r=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===r?void 0:r.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ms.get())};e()}}gs.currentPopupAction=null;const ys=new Map;class vs extends ps{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ys.get(this.auth._key());if(!e){try{const t=await async function(e,t){const r=xs(t),n=ws(e);if(!await n._isAvailable())return!1;const a="true"===await n._get(r);return await n._remove(r),a}(this.resolver,this.auth),r=t?await super.execute():null;e=()=>Promise.resolve(r)}catch(dd){e=()=>Promise.reject(dd)}ys.set(this.auth._key(),e)}return this.bypassAuthState||ys.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function bs(e,t){ys.set(e._key(),t)}function ws(e){return In(e._redirectPersistence)}function xs(e){return Pn("pendingRedirect",e.config.apiKey,e.name)}async function _s(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(vr(e.app))return Promise.reject(Vr(e));const n=Qn(e),a=cs(n,t),s=new vs(n,a,r),i=await s.execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}class ks{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return js(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!js(e)){const n=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Br(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ss(e))}saveEventToCache(e){this.cachedEventUids.add(Ss(e)),this.lastProcessedEventTime=Date.now()}}function Ss(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function js(e){let{type:t,error:r}=e;return"unknown"===t&&(null===r||void 0===r?void 0:r.code)==="auth/".concat("no-auth-event")}const Ns=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Es=/^https?/;async function Cs(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return sn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ts(r))return}catch(Lo){}Fr(e,"unauthorized-domain")}function Ts(e){const t=$r(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return""===a.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===n}if(!Es.test(r))return!1;if(Ns.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}const Is=new Zr(3e4,6e4);function Os(){const e=Ga().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}function Rs(e){return new Promise((t,r)=>{var n,a,s;function i(){Os(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Os(),r(Br(e,"network-request-failed"))},timeout:Is.get()})}if(null===(a=null===(n=Ga().gapi)||void 0===n?void 0:n.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ga().gapi)||void 0===s?void 0:s.load)){const t=ea("iframefcb");return Ga()[t]=()=>{gapi.load?i():r(Br(e,"network-request-failed"))},Zn("".concat(Xn.gapiScript,"?onload=").concat(t)).catch(e=>r(e))}i()}}).catch(e=>{throw Ps=null,e})}let Ps=null;const As=new Zr(5e3,15e3),Ls={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ds=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Us(e){const t=e.config;Kr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?en(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),n={apiKey:t.apiKey,appName:e.name,v:xr},a=Ds.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),"".concat(r,"?").concat(tt(n).slice(1))}async function Ms(e){const t=await function(e){return Ps=Ps||Rs(e),Ps}(e),r=Ga().gapi;return Kr(r,e,"internal-error"),t.open({where:document.body,url:Us(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ls,dontclear:!0},t=>new Promise(async(r,n)=>{await t.restyle({setHideOnLeave:!1});const a=Br(e,"network-request-failed"),s=Ga().setTimeout(()=>{n(a)},As.get());function i(){Ga().clearTimeout(s),r(t)}t.ping(i).then(i,()=>{n(a)})}))}const zs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(dd){}}}function Bs(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},zs),{width:n.toString(),height:a.toString(),top:s,left:i}),c=$e().toLowerCase();r&&(o=Mn(c)?"_blank":r),Dn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[r,n]=t;return"".concat(e).concat(r,"=").concat(n,",")},"");if(function(){var e;return Vn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}(t||"",o),new Fs(null);const d=window.open(t||"",o,u);Kr(d,e,"popup-blocked");try{d.focus()}catch(dd){}return new Fs(d)}const qs="__/auth/handler",Vs="emulator/auth/handler",Ws=encodeURIComponent("fac");async function Hs(e,t,r,n,a,s){Kr(e.config.authDomain,e,"auth-domain-config-required"),Kr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:xr,eventId:a};if(t instanceof ba){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))i[e]=t}if(t instanceof wa){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Ws,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(qs);return en(t,Vs)}(e),"?").concat(tt(o).slice(1)).concat(c)}const Ks="webStorageSupport";const Js=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wa,this._completeRedirectFn=_s,this._overrideRedirectResult=bs}async _openPopup(e,t,r,n){var a;Gr(null===(a=this.eventManagers[e._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");return Bs(e,await Hs(e,t,r,$r(),n),Ka())}async _openRedirect(e,t,r,n){await this._originValidation(e);return function(e){Ga().location.href=e}(await Hs(e,t,r,$r(),n)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(Gr(r,"If manager is not set, promise should be"),r)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Ms(e),r=new ks(e);return t.register("authEvent",t=>{Kr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ks,{type:Ks},r=>{var n;const a=null===(n=null===r||void 0===r?void 0:r[0])||void 0===n?void 0:n[Ks];void 0!==a&&t(!!a),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Cs(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hn()||Un()||Vn()}};var Gs="@firebase/auth",$s="1.7.9";class Qs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Kr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ys=Je("authIdTokenMaxAge")||300;let Xs=null;var Zs,ei;Zs={loadJS:e=>new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=e=>{const t=Br("internal-error");t.customData=e,r(t)},n.type="text/javascript",n.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(n)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Xn=Zs,ei="Browser",gr(new ot("auth",(e,t)=>{let{options:r}=t;const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Kr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:ei,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kn(ei)},c=new $n(n,a,s,l);return function(e,t){const r=(null===t||void 0===t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(In);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),gr(new ot("auth-internal",e=>(e=>new Qs(e))(Qn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),kr(Gs,$s,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ei)),kr(Gs,$s,"esm2017");kr("firebase","10.14.1","app");const ti=_r({apiKey:"AIzaSyANvda3139oLvsUmN2PlVdda9uzEZdyTlc",authDomain:"lets-connect-1b9c5.firebaseapp.com",projectId:"lets-connect-1b9c5",storageBucket:"lets-connect-1b9c5.firebasestorage.app",messagingSenderId:"188065317101",appId:"1:188065317101:web:6c033248d06a32d6350ce4",measurementId:"G-EBPGSKRDXQ"}),ri=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur;const t=hr.get(e);if(!t&&e===ur&&Ke())return _r();if(!t)throw br.create("no-app",{appName:e});return t}();const t=yr(e,"auth");if(t.isInitialized())return t.getImmediate();const r=function(e,t){const r=yr(e,"auth");if(r.isInitialized()){const e=r.getImmediate();if(Ze(r.getOptions(),null!==t&&void 0!==t?t:{}))return e;Fr(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:Js,persistence:[ss,qa,Wa]}),n=Je("authTokenSyncURL");if(n&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(n,location.origin);if(location.origin===e.origin){const t=(a=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),r=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ys)return;const n=null===t||void 0===t?void 0:t.token;Xs!==n&&(Xs=n,await fetch(a,{method:n?"POST":"DELETE",headers:n?{Authorization:"Bearer ".concat(n)}:{}}))});!function(e,t,r){it(e).beforeAuthStateChanged(t,r)}(r,t,()=>t(r.currentUser)),function(e,t,r,n){it(e).onIdTokenChanged(t,r,n)}(r,e=>t(e))}}var a;const s=He("auth");return s&&aa(r,"http://".concat(s)),r}(ti);async function ni(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await fetch(""+e,Ue({headers:Ue({"Content-Type":"application/json"},r.headers||{}),credentials:"include"},r)),a=null===(t=n.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"),s=a?await n.json():await n.text();if(!n.ok){const e=a&&s&&s.error?s.error:n.statusText;throw new Error(e||"Request failed")}return s}const ai=e=>ni(e),si=(e,t)=>ni(e,{method:"POST",body:JSON.stringify(t)}),ii=(e,t)=>ni(e,{method:"PATCH",body:JSON.stringify(t)}),oi=(e,t)=>ni(e,{method:"DELETE",body:t?JSON.stringify(t):void 0});var li=r(579);const ci=(0,a.createContext)();function ui(){return(0,a.useContext)(ci)}function di(e){let{children:t}=e;const[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null);(0,a.useEffect)(()=>{const e=function(e,t,r,n){return it(e).onAuthStateChanged(t,r,n)}(ri,async e=>{if(n(e),e){let n=null;try{n=await ai("/api/users/".concat(e.uid))}catch(t){const a={id:e.uid,email:e.email,full_name:e.displayName||e.email,role:"student"};try{n=await si("/api/users/upsert",a)}catch(r){console.error("Error creating missing user profile:",r)}}n&&l(n)}else l(null);i(!1)});return e},[]);const c={currentUser:r,userProfile:o,signup:async function(e,t,r){try{const a=await async function(e,t,r){if(vr(e.app))return Promise.reject(Vr(e));const n=Qn(e),a=na(n,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ja),s=await a.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Da(e),t}),i=await Na._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(i.user),i}(ri,e,t);await Ma(a.user,{displayName:r});try{await Ua(a.user)}catch(n){}return a}catch(a){throw console.error("Signup error:",a),a}},login:async function(e,t){try{const a=await function(e,t,r){return vr(e.app)?Promise.reject(Vr(e)):Pa(it(e),va.credential(t,r)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Da(e),t})}(ri,e,t);let s=null;try{s=await ai("/api/users/".concat(a.user.uid))}catch(r){const e={id:a.user.uid,email:a.user.email,full_name:a.user.displayName||a.user.email,role:"student"};try{s=await si("/api/users/upsert",e)}catch(n){console.error("Error creating missing user profile:",n)}}return s&&l(s),a}catch(a){throw console.error("Login error:",a),a}},loginWithGoogle:async function(){try{const r=new _a,n=await async function(e,t,r){if(vr(e.app))return Promise.reject(Br(e,"operation-not-supported-in-this-environment"));const n=Qn(e);Wr(e,t,ba);const a=cs(n,r);return new gs(n,"signInViaPopup",t,a).executeNotNull()}(ri,r);let a=null;try{a=await ai("/api/users/".concat(n.user.uid))}catch(e){const r={id:n.user.uid,email:n.user.email,full_name:n.user.displayName||n.user.email,role:"student"};try{a=await si("/api/users/upsert",r)}catch(t){console.error("Error creating missing user profile:",t)}}return a&&l(a),n}catch(r){throw console.error("Google login error:",r),r}},resetPassword:async function(e){try{return await async function(e,t,r){const n=Qn(e),a={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};r&&La(n,a,r),await na(n,a,"getOobCode",da)}(ri,e),!0}catch(t){throw console.error("Reset password error:",t),t}},resendVerificationEmail:async function(){try{if(!ri.currentUser)throw new Error("Not signed in");return await Ua(ri.currentUser),!0}catch(e){throw console.error("Resend verification error:",e),e}},logout:async function(){try{await function(e){return it(e).signOut()}(ri),l(null)}catch(e){throw console.error("Logout error:",e),e}},updateUserProfile:async function(e){try{await ii("/api/users/".concat(r.uid),e),l(t=>Ue(Ue({},t),e))}catch(t){throw console.error("Error updating profile:",t),t}}};return(0,li.jsx)(ci.Provider,{value:c,children:!s&&t})}var hi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fi=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],pi=(e,t)=>{const r=(0,a.forwardRef)((r,n)=>{let{color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u}=r,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(r,fi);return(0,a.createElement)("svg",Ue(Ue({ref:n},hi),{},{width:i,height:i,stroke:s,strokeWidth:l?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),c].join(" ")},d),[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]]);var h});return r.displayName="".concat(e),r},mi=pi("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),gi=pi("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),yi=pi("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),vi=pi("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),bi=pi("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),wi=pi("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),xi=pi("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_i=pi("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);function ki(){return(0,li.jsxs)("div",{className:"space-y-2 text-sm text-gray-900 dark:text-gray-300",children:[(0,li.jsxs)("p",{children:["Welcome to ",(0,li.jsx)("span",{className:"font-semibold",children:"EduHub"})," \u2014 a platform built with purpose and passion by ",(0,li.jsx)("span",{className:"font-medium",children:"Balamurugan G"}),"."]}),(0,li.jsx)("p",{children:"At EduHub, we believe in empowering educators and learners through intuitive tools for classroom management, assignments, and quizzes. Our mission is to simplify the teaching experience and elevate learning outcomes."}),(0,li.jsx)("p",{children:"Thank you for being part of this journey. We\u2019re committed to continuous innovation and excellence in education technology."})]})}function Si(){const[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),{login:d,loginWithGoogle:h,resetPassword:f,resendVerificationEmail:p}=ui(),[m,g]=(0,a.useState)(!1),y=ee(),[v,b]=(0,a.useState)(()=>"undefined"!==typeof document&&document.documentElement.classList.contains("dark")),[w,x]=(0,a.useState)(!1);return(0,li.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 py-12 px-4 relative overflow-x-hidden dark:from-neutral-900 dark:to-neutral-950",children:[(0,li.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[(0,li.jsx)("button",{type:"button",onClick:()=>{const e=!v;b(e),"undefined"!==typeof document&&document.documentElement.classList.toggle("dark",e);try{localStorage.setItem("theme",e?"dark":"light")}catch(t){}},className:"p-2 rounded-full bg-white text-gray-800 shadow hover:bg-gray-100 dark:bg-neutral-800 dark:text-gray-100 dark:hover:bg-neutral-700","aria-label":"Toggle dark mode",title:"Toggle theme",children:v?(0,li.jsx)(mi,{className:"h-5 w-5"}):(0,li.jsx)(gi,{className:"h-5 w-5"})}),(0,li.jsx)("button",{type:"button",onClick:()=>x(!0),className:"p-2 rounded-full bg-white text-gray-800 shadow hover:bg-gray-100 dark:bg-neutral-800 dark:text-gray-100 dark:hover:bg-neutral-700","aria-label":"About this app",title:"About",children:(0,li.jsx)(yi,{className:"h-5 w-5"})})]}),(0,li.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,li.jsxs)("div",{className:"text-center",children:[(0,li.jsx)("div",{className:"mx-auto h-16 w-16 bg-primary-600 rounded-full flex items-center justify-center",children:(0,li.jsx)(vi,{className:"h-8 w-8 text-white"})}),(0,li.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-gray-100",children:"Welcome to EduHub"}),(0,li.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:"Sign in to your account"})]}),(0,li.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{t.preventDefault(),l(""),u(!0);try{var n;const t=await d(e,r);u(!1),null!==t&&void 0!==t&&null!==(n=t.user)&&void 0!==n&&n.emailVerified?y("/dashboard"):(g(!0),l("Please verify your email. We have sent you a verification link."))}catch(a){u(!1),l("Invalid email or password.")}},children:[(0,li.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,li.jsxs)("div",{className:"relative",children:[(0,li.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,li.jsx)(bi,{className:"h-5 w-5 text-gray-400"})}),(0,li.jsx)("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm dark:bg-neutral-800 dark:border-neutral-700 dark:text-gray-100 dark:placeholder-gray-500",placeholder:"Email address",value:e,onChange:e=>t(e.target.value)})]}),(0,li.jsxs)("div",{className:"relative",children:[(0,li.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,li.jsx)(wi,{className:"h-5 w-5 text-gray-400"})}),(0,li.jsx)("input",{id:"password",name:"password",type:s?"text":"password",required:!0,className:"appearance-none rounded-none relative block w-full px-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm dark:bg-neutral-800 dark:border-neutral-700 dark:text-gray-100 dark:placeholder-gray-500",placeholder:"Password",value:r,onChange:e=>n(e.target.value)}),(0,li.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>i(!s),children:s?(0,li.jsx)(xi,{className:"h-5 w-5 text-gray-400"}):(0,li.jsx)(_i,{className:"h-5 w-5 text-gray-400"})})]})]}),o&&(0,li.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm dark:bg-red-900/20 dark:border-red-800 dark:text-red-300",children:o}),m&&(0,li.jsx)("div",{className:"text-center",children:(0,li.jsx)("button",{type:"button",onClick:async()=>{l(""),u(!0);try{await p(),alert("Verification email resent. Please check your inbox.")}catch(dd){l((null===dd||void 0===dd?void 0:dd.message)||"Failed to resend verification email")}finally{u(!1)}},className:"text-sm text-primary-600 hover:text-primary-500",disabled:c,children:"Resend verification email"})}),(0,li.jsx)("button",{type:"submit",disabled:c,className:"w-full py-3 px-4 text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:c?"Signing in...":"Sign in"}),(0,li.jsx)("div",{className:"mt-3",children:(0,li.jsxs)("button",{type:"button",onClick:async()=>{l(""),u(!0);try{var e;const t=await h();u(!1),!1!==(null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.emailVerified)?y("/dashboard"):(g(!0),l("Please verify your email."))}catch(dd){u(!1),l((null===dd||void 0===dd?void 0:dd.message)||"Google sign-in failed")}},disabled:c,className:"w-full py-3 px-4 text-sm font-medium rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 disabled:opacity-50 dark:bg-neutral-800 dark:text-gray-100 dark:border-neutral-700 dark:hover:bg-neutral-700 flex items-center justify-center gap-2",children:[(0,li.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:"h-5 w-5",children:[(0,li.jsx)("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303C33.915 31.91 29.345 35 24 35c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.869 5.053 29.702 3 24 3 12.955 3 4 11.955 4 23s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.651-.389-3.917z"}),(0,li.jsx)("path",{fill:"#FF3D00",d:"M6.306 14.691l6.571 4.818C14.483 16.108 18.9 13 24 13c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.869 5.053 29.702 3 24 3 16.318 3 9.656 7.337 6.306 14.691z"}),(0,li.jsx)("path",{fill:"#4CAF50",d:"M24 43c5.271 0 10.073-2.021 13.682-5.318l-6.318-5.318C29.305 33.99 26.791 35 24 35c-5.317 0-9.877-3.402-11.49-8.129l-6.59 5.081C8.164 38.556 15.48 43 24 43z"}),(0,li.jsx)("path",{fill:"#1976D2",d:"M43.611 20.083H42V20H24v8h11.303c-1.357 3.91-5.927 7-11.303 7-5.317 0-9.877-3.402-11.49-8.129l-6.59 5.081C8.164 38.556 15.48 43 24 43c8.837 0 20-6.5 20-20 0-1.341-.138-2.651-.389-3.917z"})]}),"Continue with Google"]})}),(0,li.jsx)("div",{className:"text-center mt-3",children:(0,li.jsx)("button",{type:"button",onClick:async()=>{if(!e)return l("Enter your email to reset password.");l(""),u(!0);try{await f(e),alert("Password reset email sent. Check your inbox.")}catch(dd){l((null===dd||void 0===dd?void 0:dd.message)||"Failed to send reset email")}finally{u(!1)}},className:"text-sm text-primary-600 hover:text-primary-500",disabled:c,children:"Forgot password?"})}),(0,li.jsxs)("p",{className:"text-center text-sm text-gray-600 dark:text-gray-300",children:["Don't have an account?"," ",(0,li.jsx)("button",{type:"button",onClick:()=>y("/signup"),className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up"})]})]})]}),w&&(0,li.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"About Lets Connect"}),(0,li.jsx)("button",{onClick:()=>x(!1),className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100",children:"\u2715"})]}),(0,li.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:(0,li.jsx)(ki,{})}),(0,li.jsx)("div",{className:"mt-4 text-right",children:(0,li.jsx)("button",{onClick:()=>x(!1),className:"px-3 py-2 text-sm rounded border border-gray-300 text-gray-700 hover:bg-gray-100 dark:border-neutral-700 dark:text-gray-100 dark:hover:bg-neutral-800",children:"Close"})})]})})]})}class ji extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class Ni extends ji{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ei extends ji{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ci extends ji{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ti;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Ti||(Ti={}));class Ii{constructor(e){let{headers:t={},customFetch:r,region:n=Ti.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=n,this.fetch=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){return(0,Ar.__awaiter)(this,arguments,void 0,function(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var n;try{const{headers:a,method:s,body:i,signal:o}=r;let l={},{region:c}=r;c||(c=t.region);const u=new URL("".concat(t.url,"/").concat(e));let d;c&&"any"!==c&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c)),i&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?"undefined"!==typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):"string"===typeof i?(l["Content-Type"]="text/plain",d=i):"undefined"!==typeof FormData&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)):d=i;const h=yield t.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),t.headers),a),body:d,signal:o}).catch(e=>{if("AbortError"===e.name)throw e;throw new Ni(e)}),f=h.headers.get("x-relay-error");if(f&&"true"===f)throw new Ei(h);if(!h.ok)throw new Ci(h);let p,m=(null!==(n=h.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return p="application/json"===m?yield h.json():"application/octet-stream"===m||"application/pdf"===m?yield h.blob():"text/event-stream"===m?h:"multipart/form-data"===m?yield h.formData():yield h.text(),{data:p,error:null,response:h}}catch(a){return a instanceof Error&&"AbortError"===a.name?{data:null,error:new Ni(a)}:{data:null,error:a,response:a instanceof Ci||a instanceof Ei?a.context:void 0}}}()})}}var Oi=r(980),Ri=r.t(Oi,2);const{PostgrestClient:Pi,PostgrestQueryBuilder:Ai,PostgrestFilterBuilder:Li,PostgrestTransformBuilder:Di,PostgrestBuilder:Ui,PostgrestError:Mi}=Oi||Ri;const zi=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(r," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(r," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(Lo){return!1}}},Fi="realtime-js/".concat("2.79.0"),Bi=1e4;var qi,Vi,Wi,Hi,Ki,Ji;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(qi||(qi={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Vi||(Vi={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Wi||(Wi={})),function(e){e.websocket="websocket"}(Hi||(Hi={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Ki||(Ki={}));class Gi{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const i=r.decode(e.slice(s,s+n));s+=n;const o=r.decode(e.slice(s,s+a));s+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class $i{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Ji||(Ji={}));const Qi=function(e,t){var r;const n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((r,a)=>(r[a]=Yi(a,e,t,n),r),{}):{}},Yi=(e,t,r,n)=>{const a=t.find(t=>t.name===e),s=null===a||void 0===a?void 0:a.type,i=r[e];return s&&!n.includes(s)?Xi(s,i):Zi(i)},Xi=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return no(t,r)}switch(e){case Ji.bool:return eo(t);case Ji.float4:case Ji.float8:case Ji.int2:case Ji.int4:case Ji.int8:case Ji.numeric:case Ji.oid:return to(t);case Ji.json:case Ji.jsonb:return ro(t);case Ji.timestamp:return ao(t);case Ji.abstime:case Ji.date:case Ji.daterange:case Ji.int4range:case Ji.int8range:case Ji.money:case Ji.reltime:case Ji.text:case Ji.time:case Ji.timestamptz:case Ji.timetz:case Ji.tsrange:case Ji.tstzrange:default:return Zi(t)}},Zi=e=>e,eo=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},to=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ro=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},no=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(a){n=s?s.split(","):[]}return n.map(e=>Xi(t,e))}return e},ao=e=>"string"===typeof e?e.replace(" ","T"):e,so=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class io{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bi;this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var oo,lo,co,uo;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(oo||(oo={}));class ho{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ho.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=ho.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=ho.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const r=a[e];if(r){const n=t.map(e=>e.presence_ref),a=r.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(a,(t,n)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map(e=>e.presence_ref),n=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let a=e[t];if(!a)return;const s=r.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,n(t,a,r),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(lo||(lo={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(co||(co={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(uo||(uo={}));class fo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;var n,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Vi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new io(this,Wi.join,this.params,this.timeout),this.rejoinTimer=new $i(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=Vi.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=Vi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=Vi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=Vi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wi.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ho(this),this.broadcastEndpointURL=so(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(n=this.params.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Vi.closed){const{config:{broadcast:s,presence:i,private:o}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[co.PRESENCE]&&this.bindings[co.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(uo.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(uo.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var n;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,a=null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0,s=[];for(let n=0;n<a;n++){const a=t[n],{filter:{event:i,schema:o,table:l,filter:c}}=a,u=r&&r[n];if(!u||u.event!==i||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Vi.errored,void(null===e||void 0===e||e(uo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(uo.SUBSCRIBED))}null===e||void 0===e||e(uo.SUBSCRIBED)}).receive("error",t=>{this.state=Vi.errored,null===e||void 0===e||e(uo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(uo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Vi.joined&&e===co.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n;const a=this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"";if(void 0===t||null===t)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=r.timeout)&&void 0!==n?n:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{const e=await i.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Vi.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(Wi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new io(this,Wi.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vi.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),s}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let n=new io(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=Wi;if(r&&[i,o,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let u=this._onMessage(s,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(u,r)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var r,n,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:a,errors:s}=e,i={schema:t,table:r,commit_timestamp:n,eventType:a,new:{},old:{},errors:s};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===Vi.closed}_isJoined(){return this.state===Vi.joined}_isJoining(){return this.state===Vi.joining}_isLeaving(){return this.state===Vi.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,r){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&fo.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Wi.close,{},e)}_onError(e){this._on(Wi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Qi(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Qi(e.columns,e.old_record)),t}}const po=()=>{},mo=25e3,go=10,yo=100,vo=[1e3,2e3,5e3,1e4];class bo{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bi,this.transport=null,this.heartbeatIntervalMs=mo,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=po,this.ref=0,this.reconnectTimer=null,this.logger=po,this.conn=null,this.sendBuffer=[],this.serializer=new Gi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},!(null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(Hi.websocket),this.httpEndpoint=so(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zi.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qi.connecting:return Ki.Connecting;case qi.open:return Ki.Open;case qi.closing:return Ki.Closing;default:return Ki.Closed}}isConnected(){return this.connectionState()===Ki.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r="realtime:".concat(e),n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new fo("realtime:".concat(e),t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(r," (").concat(a,")"),n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(dd){this.log("error","error in heartbeat callback",dd)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},yo)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(dd){this.log("error","error in heartbeat callback",dd)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(dd){this.log("error","error in heartbeat callback",dd)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(dd){this.log("error","error in heartbeat callback",dd)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:a}=e,s=a?"(".concat(a,")"):"",i=n.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(r," ").concat(s).trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Wi.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:Fi};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(Wi.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(dd){this.log("error","error in ".concat(e," callback"),dd)}})}catch(dd){this.log("error","error triggering ".concat(e," callbacks"),dd)}}_setupReconnectionTimer(){this.reconnectTimer=new $i(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},go)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,a,s,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:Bi,this.heartbeatIntervalMs=null!==(n=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:mo,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null===e||void 0===e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:po,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>vo[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class wo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xo(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class _o extends wo{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ko extends wo{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const So=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},jo=e=>{if(Array.isArray(e))return e.map(e=>jo(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,n]=e;const a=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=jo(n)}),t},No=e=>{var t;return e.msg||e.message||e.error_description||("string"===typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},Eo=(e,t,r)=>(0,Ar.__awaiter)(void 0,void 0,void 0,function*(){const n=yield Response;e instanceof n&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(r=>{const n=e.status||500,a=(null===r||void 0===r?void 0:r.statusCode)||n+"";t(new _o(No(r),n,a))}).catch(e=>{t(new ko(No(e),e))}):t(new ko(No(e),e))}),Co=(e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r)):a};function To(e,t,r,n,a,s){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,Co(t,n,a,s)).then(e=>{if(!e.ok)throw e;return(null===n||void 0===n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Eo(e,o,n))})})}function Io(e,t,r,n){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return To(e,"GET",t,r,n)})}function Oo(e,t,r,n,a){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return To(e,"POST",t,n,a,r)})}function Ro(e,t,r,n,a){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return To(e,"PUT",t,n,a,r)})}function Po(e,t,r,n,a){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return To(e,"DELETE",t,n,a,r)})}class Ao{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xo(e))return{data:null,error:e};throw e}})}}var Lo;Lo=Symbol.toStringTag;const Do=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Lo]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ao(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xo(e))return{data:null,error:e};throw e}})}},Uo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=So(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Mo),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;if("undefined"!==typeof Blob&&r instanceof Blob)a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r);else if("undefined"!==typeof FormData&&r instanceof FormData)a=r,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),o&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(o));else{a=r,i["cache-control"]="max-age=".concat(s.cacheControl),i["content-type"]=s.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)));("undefined"!==typeof ReadableStream&&a instanceof ReadableStream||a&&"object"===typeof a&&"pipe"in a&&"function"===typeof a.pipe)&&!s.duplex&&(s.duplex="half")}(null===n||void 0===n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Ro:Oo)(this.fetch,"".concat(this.url,"/object/").concat(c),a,Object.assign({headers:i},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xo(a))return{data:null,error:a};throw a}})}upload(e,t,r){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),i=new URL(this.url+"/object/upload/sign/".concat(s));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Mo.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]="max-age=".concat(t.cacheControl),s["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield Ro(this.fetch,i.toString(),e,{headers:s})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xo(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(n["x-upsert"]="true");const a=yield Oo(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(r),{},{headers:n}),s=new URL(this.url+a.url),i=s.searchParams.get("token");if(!i)throw new wo("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xo(r))return{data:null,error:r};throw r}})}update(e,t,r){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xo(n))return{data:null,error:n};throw n}})}copy(e,t,r){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Oo(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xo(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield Oo(this.fetch,"".concat(this.url,"/object/sign/").concat(n),Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return a={signedUrl:encodeURI("".concat(this.url).concat(a.signedURL).concat(s))},{data:a,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xo(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{const n=yield Oo(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),a=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(a)):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xo(n))return{data:null,error:n};throw n}})}download(e,t){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=n?"?".concat(n):"",s=this._getFinalPath(e);return new Do(()=>Io(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(s).concat(a),{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Io(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:jo(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xo(r))return{data:null,error:r};throw r}})}exists(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return To(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xo(r)&&r instanceof ko){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&n.push(a);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&n.push(i);let o=n.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(r).concat(o))}}}remove(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Po(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xo(t))return{data:null,error:t};throw t}})}list(e,t,r){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Uo),t),{prefix:e||""});return{data:yield Oo(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xo(n))return{data:null,error:n};throw n}})}listV2(e,t){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Oo(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xo(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const Fo="2.79.0",Bo={"X-Client-Info":"storage-js/".concat(Fo)};class qo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const a=new URL(e);if(null===n||void 0===n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bo),t),this.fetch=So(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Io(this.fetch,"".concat(this.url,"/bucket").concat(t),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xo(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xo(t))return{data:null,error:t};throw t}})}createBucket(e){return(0,Ar.__awaiter)(this,arguments,void 0,function(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return function*(){try{return{data:yield Oo(t.fetch,"".concat(t.url,"/bucket"),{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xo(n))return{data:null,error:n};throw n}}()})}updateBucket(e,t){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ro(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xo(r))return{data:null,error:r};throw r}})}emptyBucket(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xo(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Po(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xo(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Vo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bo),t),this.fetch=So(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,"".concat(this.url,"/bucket"),{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xo(t))return{data:null,error:t};throw t}})}listBuckets(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null===e||void 0===e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null===e||void 0===e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null===e||void 0===e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null===e||void 0===e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null===e||void 0===e?void 0:e.search)&&t.set("search",e.search);const r=t.toString(),n=r?"".concat(this.url,"/bucket?").concat(r):"".concat(this.url,"/bucket");return{data:yield Io(this.fetch,n,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xo(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Po(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xo(t))return{data:null,error:t};throw t}})}}const Wo={"X-Client-Info":"storage-js/".concat(Fo),"Content-Type":"application/json"};class Ho extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ko(e){return"object"===typeof e&&null!==e&&"__isStorageVectorsError"in e}class Jo extends Ho{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Go extends Ho{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var $o;!function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"}($o||($o={}));const Qo=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},Yo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Xo=(e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function Zo(e,t,r,n,a,s){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,Xo(t,n,a,s)).then(e=>{if(!e.ok)throw e;if(null===n||void 0===n?void 0:n.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>((e,t,r)=>(0,Ar.__awaiter)(void 0,void 0,void 0,function*(){if(e&&"object"===typeof e&&"status"in e&&"ok"in e&&"number"===typeof e.status&&!(null===r||void 0===r?void 0:r.noResolveJson)){const r=e.status||500,n=e;if("function"===typeof n.json)n.json().then(e=>{const n=(null===e||void 0===e?void 0:e.statusCode)||(null===e||void 0===e?void 0:e.code)||r+"";t(new Jo(Yo(e),r,n))}).catch(()=>{const e=r+"",a=n.statusText||"HTTP ".concat(r," error");t(new Jo(a,r,e))});else{const e=r+"",a=n.statusText||"HTTP ".concat(r," error");t(new Jo(a,r,e))}}else t(new Go(Yo(e),e))}))(e,o,n))})})}function el(e,t,r,n,a){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return Zo(e,"POST",t,n,a,r)})}class tl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wo),t),this.fetch=Qo(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield el(this.fetch,"".concat(this.url,"/CreateIndex"),e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}getIndex(e,t){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,"".concat(this.url,"/GetIndex"),{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ko(r))return{data:null,error:r};throw r}})}listIndexes(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,"".concat(this.url,"/ListIndexes"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield el(this.fetch,"".concat(this.url,"/DeleteIndex"),{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ko(r))return{data:null,error:r};throw r}})}}class rl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wo),t),this.fetch=Qo(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield el(this.fetch,"".concat(this.url,"/PutVectors"),e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}getVectors(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,"".concat(this.url,"/GetVectors"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}listVectors(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and ".concat(e.segmentCount-1))}return{data:yield el(this.fetch,"".concat(this.url,"/ListVectors"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}queryVectors(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,"".concat(this.url,"/QueryVectors"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}deleteVectors(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield el(this.fetch,"".concat(this.url,"/DeleteVectors"),e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}}class nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wo),t),this.fetch=Qo(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield el(this.fetch,"".concat(this.url,"/CreateVectorBucket"),{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,"".concat(this.url,"/GetVectorBucket"),{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}listBuckets(){return(0,Ar.__awaiter)(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return{data:yield el(e.fetch,"".concat(e.url,"/ListVectorBuckets"),t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ko(r))return{data:null,error:r};throw r}}()})}deleteBucket(e){return(0,Ar.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield el(this.fetch,"".concat(this.url,"/DeleteVectorBucket"),{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ko(t))return{data:null,error:t};throw t}})}}class al extends nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t.headers||{},t.fetch)}from(e){return new sl(this.url,this.headers,e,this.fetch)}}class sl extends tl{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,Ar.__awaiter)(this,arguments,void 0,function(){var t=this;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listIndexes.call(t,Object.assign(Object.assign({},r),{vectorBucketName:t.vectorBucketName}))}()})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new il(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class il extends rl{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,Ar.__awaiter)(this,arguments,void 0,function(){var t=this;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listVectors.call(t,Object.assign(Object.assign({},r),{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}()})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,Ar.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ol extends qo{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new zo(this.url,this.headers,e,this.fetch)}get vectors(){return new al(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Vo(this.url+"/iceberg",this.headers,this.fetch)}}let ll="";ll="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const cl={headers:{"X-Client-Info":"supabase-js-".concat(ll,"/").concat("2.79.0")}},ul={schema:"public"},dl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hl={},fl=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},pl=(e,t,r)=>{const n=fl(r),a=Headers;return async(r,s)=>{var i;const o=null!==(i=await t())&&void 0!==i?i:e;let l=new a(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),n(r,Object.assign(Object.assign({},s),{headers:l}))}};const ml="2.79.0",gl=3e4,yl=9e4,vl={"X-Client-Info":"gotrue-js/".concat(ml)},bl="X-Supabase-Api-Version",wl={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},xl=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class _l extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function kl(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Sl extends _l{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class jl extends _l{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Nl extends _l{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class El extends Nl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Cl extends Nl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tl extends Nl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Il extends Nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ol extends Nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rl extends Nl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Pl(e){return kl(e)&&"AuthRetryableFetchError"===e.name}class Al extends Nl{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ll extends Nl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Dl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ul=" \t\n\r=".split(""),Ml=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ul.length;t+=1)e[Ul[t].charCodeAt(0)]=-2;for(let t=0;t<Dl.length;t+=1)e[Dl[t].charCodeAt(0)]=t;return e})();function zl(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Dl[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Dl[e]),t.queuedBits-=6}}function Fl(e,t,r){const n=Ml[e];if(!(n>-1)){if(-2===n)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Bl(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let i=0;i<e.length;i+=1)Fl(e.charCodeAt(i),a,s);return t.join("")}function ql(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Vl(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}ql(n,t)}}function Wl(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Fl(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Hl(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>zl(e,r,n)),zl(null,r,n),t.join("")}const Kl=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Jl={tested:!1,writable:!1},Gl=()=>{if(!Kl())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(dd){return!1}if(Jl.tested)return Jl.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jl.tested=!0,Jl.writable=!0}catch(dd){Jl.tested=!0,Jl.writable=!1}return Jl.writable};const $l=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},Ql=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Yl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(Lo){return r}},Xl=async(e,t)=>{await e.removeItem(t)};class Zl{constructor(){this.promise=new Zl.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function ec(e){const t=e.split(".");if(3!==t.length)throw new Ll("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!xl.test(t[r]))throw new Ll("JWT not in base64url format");return{header:JSON.parse(Bl(t[0])),payload:JSON.parse(Bl(t[1])),signature:Wl(t[2]),raw:{header:t[0],payload:t[1]}}}function tc(e){return("0"+e.toString(16)).substr(-2)}async function rc(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nc(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,tc).join("")}();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Ql(e,"".concat(t,"-code-verifier"),a);const s=await rc(n);return[s,n===s?"plain":"s256"]}Zl.promiseConstructor=Promise;const ac=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const sc=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ic(e){if(!sc.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function oc(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function lc(e){return JSON.parse(JSON.stringify(e))}const cc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uc=[502,503,504];async function dc(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Rl(cc(e),0);if(uc.includes(e.status))throw new Rl(cc(e),e.status);let n,a;try{n=await e.json()}catch(dd){throw new jl(cc(dd),dd)}const s=function(e){const t=e.headers.get(bl);if(!t)return null;if(!t.match(ac))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(dd){return null}}(e);if(s&&s.getTime()>=wl.timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?a=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(a=n.error_code),a){if("weak_password"===a)throw new Al(cc(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new El}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Al(cc(n),e.status,n.weak_password.reasons);throw new Sl(cc(n),e.status||500,a)}async function hc(e,t,r,n){var a;const s=Object.assign({},null===n||void 0===n?void 0:n.headers);s[bl]||(s[bl]=wl.name),(null===n||void 0===n?void 0:n.jwt)&&(s.Authorization="Bearer ".concat(n.jwt));const i=null!==(a=null===n||void 0===n?void 0:n.query)&&void 0!==a?a:{};(null===n||void 0===n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,n,a,s){const i=((e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))})(t,n,a,s);let o;try{o=await e(r,Object.assign({},i))}catch(dd){throw console.error(dd),new Rl(cc(dd),0)}o.ok||await dc(o);if(null===n||void 0===n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(dd){await dc(dd)}}(e,t,r+o,{headers:s,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);return(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function fc(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function pc(e){const t=fc(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function mc(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function gc(e){return{data:e,error:null}}function yc(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,i=(0,Ar.__rest)(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function vc(e){return e}const bc=["global","local","others"];class wc{constructor(e){let{url:t="",headers:r={},fetch:n}=e;this.url=t,this.headers=r,this.fetch=$l(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bc[0];if(bc.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(bc.join(", ")));try{return await hc(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(kl(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await hc(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:mc})}catch(r){if(kl(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=(0,Ar.__rest)(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null===r||void 0===r?void 0:r.newEmail,delete n.newEmail),await hc(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:n,headers:this.headers,xform:yc,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(kl(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await hc(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:mc})}catch(t){if(kl(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await hc(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:vc});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(kl(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){ic(e);try{return await hc(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:mc})}catch(t){if(kl(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ic(e);try{return await hc(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:mc})}catch(r){if(kl(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ic(e);try{return await hc(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:mc})}catch(r){if(kl(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ic(e.userId);try{const{data:t,error:r}=await hc(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(kl(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ic(e.userId),ic(e.id);try{return{data:await hc(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(kl(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await hc(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:vc});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(kl(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await hc(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(kl(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await hc(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(kl(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await hc(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(e),{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(r){if(kl(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await hc(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(kl(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await hc(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(kl(t))return{data:null,error:t};throw t}}}function xc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const _c=!!(globalThis&&Gl()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class kc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Sc extends kc{}async function jc(e,t,r){_c&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),_c&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw _c&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Sc('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(_c)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(dd){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",dd)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}_c&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{_c&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}function Nc(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function Ec(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Cc extends Error{constructor(e){let{message:t,code:r,cause:n,name:a}=e;var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(s=null!==a&&void 0!==a?a:n instanceof Error?n.name:void 0)&&void 0!==s?s:"Unknown Error",this.code=r}}class Tc extends Cc{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Ic(e){let{error:t,options:r}=e;var n,a,s;const{publicKey:i}=r;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(r.signal instanceof AbortSignal)return new Cc({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(n=i.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new Cc({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===r.mediation&&"required"===(null===(a=i.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new Cc({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(s=i.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new Cc({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new Cc({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new Cc({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name){return 0===i.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Cc({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Cc({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t})}if("SecurityError"===t.name){const e=window.location.hostname;if(!Uc(e))return new Cc({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rp.id!==e)return new Cc({message:'The RP ID "'.concat(i.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Cc({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new Cc({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Cc({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Oc(e){let{error:t,options:r}=e;const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(r.signal instanceof AbortSignal)return new Cc({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new Cc({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const e=window.location.hostname;if(!Uc(e))return new Cc({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(n.rpId!==e)return new Cc({message:'The RP ID "'.concat(n.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new Cc({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Cc({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const Rc=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Pc(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!==typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=(0,Ar.__rest)(e,["challenge","user","excludeCredentials"]),s=Wl(t).buffer,i=Object.assign(Object.assign({},r),{id:Wl(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:s,user:i});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:Wl(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function Ac(e){if(!e)throw new Error("Credential request options are required");if("undefined"!==typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=(0,Ar.__rest)(e,["challenge","allowCredentials"]),a=Wl(t).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:Wl(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function Lc(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Hl(new Uint8Array(e.response.attestationObject)),clientDataJSON:Hl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Dc(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Hl(new Uint8Array(a.authenticatorData)),clientDataJSON:Hl(new Uint8Array(a.clientDataJSON)),signature:Hl(new Uint8Array(a.signature)),userHandle:a.userHandle?Hl(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Uc(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Mc(){var e,t;return!!(Kl()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"===typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"===typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const zc={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Fc={userVerification:"preferred",hints:["security-key"]};function Bc(){const e=e=>null!==e&&"object"===typeof e&&!Array.isArray(e),t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];for(const i of a)if(i)for(const n in i){const a=i[n];if(void 0!==a)if(Array.isArray(a))r[n]=a;else if(t(a))r[n]=a;else if(e(a)){const t=r[n];e(t)?r[n]=Bc(t,a):r[n]=Bc(a)}else r[n]=a}return r}class qc{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge(e,t){let{factorId:r,webauthn:n,friendlyName:a,signal:s}=e;try{const{data:e,error:i}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!e)return{data:null,error:i};const o=null!==s&&void 0!==s?s:Rc.createNewAbortSignal();if("create"===e.webauthn.type){const{user:t}=e.webauthn.credential_options.publicKey;t.name||(t.name="".concat(t.id,":").concat(a)),t.displayName||(t.displayName=t.name)}switch(e.webauthn.type){case"create":{const n=function(e,t){return Bc(zc,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.create),{data:a,error:s}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Tc("Browser returned unexpected credential type",t)}:{data:null,error:new Tc("Empty credential response",t)}}catch(t){return{data:null,error:Ic({error:t,options:e})}}}({publicKey:n,signal:o});return a?{data:{factorId:r,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:s}}case"request":{const n=function(e,t){return Bc(Fc,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.request),{data:a,error:s}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Tc("Browser returned unexpected credential type",t)}:{data:null,error:new Tc("Empty credential response",t)}}catch(t){return{data:null,error:Oc({error:t,options:e})}}}(Object.assign(Object.assign({},e.webauthn.credential_options),{publicKey:n,signal:o}));return a?{data:{factorId:r,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:s}}}}catch(i){return kl(i)?{data:null,error:i}:{data:null,error:new jl("Unexpected error in challenge",i)}}}async _verify(e){let{challengeId:t,factorId:r,webauthn:n}=e;return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate(e,t){let{factorId:r,webauthn:{rpId:n=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:s}}=e;if(!n)return{data:null,error:new _l("rpId is required for WebAuthn authentication")};try{if(!Mc())return{data:null,error:new jl("Browser does not support WebAuthn",null)};const{data:e,error:i}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:a},signal:s},{request:t});if(!e)return{data:null,error:i};const{webauthn:o}=e;return this._verify({factorId:r,challengeId:e.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:a,credential_response:o.credential_response}})}catch(i){return kl(i)?{data:null,error:i}:{data:null,error:new jl("Unexpected error in authenticate",i)}}}async _register(e,t){let{friendlyName:r,rpId:n=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:s}=e;if(!n)return{data:null,error:new _l("rpId is required for WebAuthn registration")};try{if(!Mc())return{data:null,error:new jl("Browser does not support WebAuthn",null)};const{data:e,error:i}=await this._enroll({friendlyName:r});if(!e)return await this.client.mfa.listFactors().then(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.all.find(e=>"webauthn"===e.factor_type&&e.friendly_name===r&&"unverified"!==e.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null===e||void 0===e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:l}=await this._challenge({factorId:e.id,friendlyName:e.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:s},{create:t});return o?this._verify({factorId:e.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:a,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(i){return kl(i)?{data:null,error:i}:{data:null,error:new jl("Unexpected error in register",i)}}}}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(dd){"undefined"!==typeof self&&(self.globalThis=self)}}();const Vc={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Wc(e,t,r){return await r()}const Hc={};class Kc{get jwks(){var e,t;return null!==(t=null===(e=Hc[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Hc[this.storageKey]=Object.assign(Object.assign({},Hc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Hc[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Hc[this.storageKey]=Object.assign(Object.assign({},Hc[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kc.nextInstanceID,Kc.nextInstanceID+=1,this.instanceID>0&&Kl()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Vc),e);if(this.logDebugMessages=!!n.debug,"function"===typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new wc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=$l(n.fetch),this.lock=n.lock||Wc,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,this.throwOnError=n.throwOnError,n.lock?this.lock=n.lock:Kl()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=jc:this.lock=Wc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qc(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Gl()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xc(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=xc(this.memoryStorage)),Kl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(dd){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",dd)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(ml,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(Kl()&&(t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(dd){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Kl()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return kl(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return kl(t)?this._returnResult({error:t}):this._returnResult({error:new jl("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const a=await hc(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:fc}),{data:s,error:i}=a;if(i||!s)return this._returnResult({data:{user:null,session:null},error:i});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(kl(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,r,n;try{let a;if("email"in e){const{email:r,password:n,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await nc(this.storage,this.storageKey)),a=await hc(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:fc})}else{if(!("phone"in e))throw new Tl("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await hc(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null===i||void 0===i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(n=null===i||void 0===i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:fc})}}const{data:s,error:i}=a;if(i||!s)return this._returnResult({data:{user:null,session:null},error:i});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(kl(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:a}=e;t=await hc(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:pc})}else{if(!("phone"in e))throw new Tl("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:a}=e;t=await hc(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:pc})}}const{data:r,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const e=new Cl;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(kl(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,r,n,a,s,i,o,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:p,options:m}=e;let g;if(Kl())if("object"===typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!==typeof d||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const y=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href),v=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=Nc(v[0]);let w=null===(r=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!w){const e=await g.request({method:"eth_chainId"});w=parseInt(e,16)}h=function(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(r))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(r));if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(i));if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(h));if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));const f=Nc(e.address),p=u?"".concat(u,"://").concat(n):n,m=e.statement?"".concat(e.statement,"\n"):"",g="".concat(p," wants you to sign in with your Ethereum account:\n").concat(f,"\n\n").concat(m);let y="URI: ".concat(d,"\nVersion: ").concat(h,"\nChain ID: ").concat(r).concat(i?"\nNonce: ".concat(i):"","\nIssued At: ").concat(s.toISOString());if(a&&(y+="\nExpiration Time: ".concat(a.toISOString())),o&&(y+="\nNot Before: ".concat(o.toISOString())),l&&(y+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}y+=e}return"".concat(g,"\n").concat(y)}({domain:y.host,address:b,statement:p,uri:y.href,version:"1",chainId:w,nonce:null===(n=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.nonce,issuedAt:null!==(s=null===(a=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(i=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await g.request({method:"personal_sign",params:[Ec(h),b]})}try{const{data:t,error:r}=await hc(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:fc});if(r)throw r;if(!t||!t.session||!t.user){const e=new Cl;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(p){if(kl(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,r,n,a,s,i,o,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let y;if(Kl())if("object"===typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(v.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(n=null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()),...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await hc(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Hl(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:fc});if(r)throw r;if(!t||!t.session||!t.user){const e=new Cl;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(m){if(kl(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await Yl(this.storage,"".concat(this.storageKey,"-code-verifier")),[r,n]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await hc(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:fc});if(await Xl(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;if(!t||!t.session||!t.user){const e=new Cl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!==n&&void 0!==n?n:null}),error:a})}catch(a){if(kl(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:a,nonce:s}=e,i=await hc(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:r,id_token:n,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:fc}),{data:o,error:l}=i;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new Cl;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(kl(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,n,a,s;try{if("email"in e){const{email:n,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await nc(this.storage,this.storageKey));const{error:o}=await hc(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:n,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(r=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await hc(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(a=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(s=null===r||void 0===r?void 0:r.channel)&&void 0!==s?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o})}throw new Tl("You must provide either an email or phone number.")}catch(i){if(kl(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async verifyOtp(e){var t,r;try{let n,a;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:i}=await hc(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:fc});if(i)throw i;if(!s){throw new Error("An error occurred on token verification.")}const o=s.session,l=s.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(n){if(kl(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var t,r,n;try{let a=null,s=null;"pkce"===this.flowType&&([a,s]=await nc(this.storage,this.storageKey));const i=await hc(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:gc});return this._returnResult(i)}catch(a){if(kl(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new El;const{error:n}=await hc(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(kl(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:r,type:n,options:a}=e,{error:s}=await hc(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:r,type:n,options:a}=e,{data:s,error:i}=await hc(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:i})}throw new Tl("You must provide either an email or phone number and a type")}catch(t){if(kl(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(dd){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(dd){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Yl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<yl;if(this._debug("#__loadSession()","session has".concat(r?"":" not"," expired"),"expires_at",e.expires_at),!r){if(this.userStorage){const t=await Yl(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=oc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,r,n)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"===typeof r){const t=r.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,r,n)}return t.value||"string"!==typeof r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,r,n)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await hc(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:mc}):await this._useSession(async e=>{var t,r,n;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await hc(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:mc}):{data:{user:null},error:new El}})}catch(t){if(kl(t))return function(e){return kl(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Xl(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:n,error:a}=r;if(a)throw a;if(!n.session)throw new El;const s=n.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await nc(this.storage,this.storageKey));const{data:l,error:c}=await hc(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:mc});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(kl(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new El;const t=Date.now()/1e3;let r=t,n=!0,a=null;const{payload:s}=ec(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(kl(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:a}=t;if(a)throw a;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new El;const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(kl(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Kl())throw new Il("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Il(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ol("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Il("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ol("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:l}=e;if(!a||!i||!s||!l)throw new Il("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=gl&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(u,"s"));const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:m}=await this._getUser(a);if(m)throw m;const g={provider_token:r,provider_refresh_token:n,access_token:a,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(kl(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Yl(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({error:a});const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return kl(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await Xl(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({error:null})})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:a}=t;if(a)throw a;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(a){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=null;"pkce"===this.flowType&&([r,n]=await nc(this.storage,this.storageKey,!0));try{return await hc(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(kl(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(kl(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,a,s,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await hc(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return Kl()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null})}catch(r){if(kl(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:n,data:{session:a}}=t;if(n)throw n;const{options:s,provider:i,token:o,access_token:l,nonce:c}=e,u=await hc(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:null!==(r=null===a||void 0===a?void 0:a.access_token)&&void 0!==r?r:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:fc}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new Cl})}catch(n){if(kl(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)throw s;return await hc(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(kl(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await hc(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:fc})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&Pl(t)&&Date.now()+r-a<gl},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await r(a);if(!n(a,null,t))return void e(t)}catch(dd){if(!n(a,dd))return void t(dd)}})()}))}catch(a){if(this._debug(t,"error",a),kl(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Kl()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Yl(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Yl(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await Ql(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:oc()}else if(a&&!a.user&&!a.user){const e=await Yl(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await Xl(this.storage,this.storageKey+"-user"),await Ql(this.storage,this.storageKey,a)):a.user=oc()}if(this._debug(r,"session from storage",a),!this._isValidSession(a))return this._debug(r,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<yl;if(this._debug(r,"session has".concat(s?"":" not"," expired with margin of ").concat(yl,"s")),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Pl(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(r,"error",a),void console.error(a)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new El;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(n,"begin");try{this.refreshingDeferred=new Zl;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new El;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={data:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(a){if(this._debug(n,"error",a),kl(a)){const e={data:null,error:a};return Pl(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n="#_notifyAllSubscribers(".concat(e,")");this._debug(n,"begin",t,"broadcast = ".concat(r));try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(dd){n.push(dd)}});if(await Promise.all(a),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await Ql(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=lc(e);await Ql(this.storage,this.storageKey,n)}else{const e=lc(t);await Ql(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Xl(this.storage,this.storageKey),await Xl(this.storage,this.storageKey+"-code-verifier"),await Xl(this.storage,this.storageKey+"-user"),this.userStorage&&await Xl(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Kl()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(dd){console.error("removing visibilitychange callback failed",dd)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gl);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/gl);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(n," ticks, a tick lasts ").concat(gl,"ms, refresh threshold is ").concat(3," ticks")),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(dd){console.error("Auto refresh tick failed with error. This is likely a transient error.",dd)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(dd){if(!(dd.isAcquireTimeout||dd instanceof kc))throw dd;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kl()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=["provider=".concat(encodeURIComponent(t))];if((null===r||void 0===r?void 0:r.redirectTo)&&n.push("redirect_to=".concat(encodeURIComponent(r.redirectTo))),(null===r||void 0===r?void 0:r.scopes)&&n.push("scopes=".concat(encodeURIComponent(r.scopes))),"pkce"===this.flowType){const[e,t]=await nc(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});n.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&n.push("skip_http_redirect=".concat(r.skipBrowserRedirect)),"".concat(e,"?").concat(n.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?this._returnResult({data:null,error:a}):await hc(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(kl(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await hc(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(n=null===o||void 0===o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),this._returnResult({data:o,error:null}))})}catch(t){if(kl(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Lc(e.webauthn.credential_response):Dc(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await hc(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:s,headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:o}))})}catch(t){if(kl(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=await hc(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});if(s.error)return s;const{data:i}=s;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Pc(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Ac(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(kl(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null===t||void 0===t?void 0:t.factors)&&void 0!==e?e:[])n.all.push(a),"verified"===a.status&&n[a.factor_type].push(a);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ec(r.access_token);let s=null;a.aal&&(s=a.aal);let i=s;(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(i="aal2");return{data:{currentLevel:s,nextLevel:i,currentAuthenticationMethods:a.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await hc(this.fetch,"GET","".concat(this.url,"/oauth/authorizations/").concat(e),{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new El})})}catch(t){if(kl(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new El});const s=await hc(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Kl()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(kl(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new El});const s=await hc(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Kl()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(kl(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:n,error:a}=await hc(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=r,t=n.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});r=e.session.access_token}const{header:n,payload:a,signature:s,raw:{header:i,payload:o}}=ec(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:a,header:n,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,s,function(e){const t=[];return Vl(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new Ll("Invalid JWT signature");return{data:{claims:a,header:n,signature:s},error:null}}catch(r){if(kl(r))return this._returnResult({data:null,error:r});throw r}}}Kc.nextInstanceID=0;const Jc=Kc;class Gc extends Jc{constructor(e){super(e)}}class $c{constructor(e,t,r){var n,a,s;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var r,n;const{db:a,auth:s,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(r=null===d||void 0===d?void 0:d.headers)&&void 0!==r?r:{}),null!==(n=null===o||void 0===o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:ul,realtime:hl,auth:Object.assign(Object.assign({},dl),{storageKey:o}),global:cl});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(a=l.global.headers)&&void 0!==a?a:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(s=l.auth)&&void 0!==s?s:{},this.headers,l.global.fetch),this.fetch=pl(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Pi(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new ol(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Ii(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,storageKey:l,flowType:c,lock:u,debug:d,throwOnError:h}=e;const f={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Gc({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),t),storageKey:l,autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,flowType:c,lock:u,debug:d,throwOnError:h,fetch:r,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new bo(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Qc=((e,t,r)=>new $c(e,t,r))("https://ocxomydbvvsabtpzkwtv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9jeG9teWRidnZzYWJ0cHprd3R2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3MjYzOTksImV4cCI6MjA3NzMwMjM5OX0.TRkNqXuza5khc_lQbsQfRMMjPAF4w9dEj_QV3F4miyg"),Yc=pi("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Xc=pi("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function Zc(){const[e,t]=(0,a.useState)({fullName:"",email:"",password:"",confirmPassword:""}),[r,n]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),{signup:d}=ui(),h=ee(),[f,p]=(0,a.useState)(()=>"undefined"!==typeof document&&document.documentElement.classList.contains("dark")),[m,g]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[b,w]=(0,a.useState)(!1),[x,_]=(0,a.useState)(0),[k,S]=(0,a.useState)(!1),[j,N]=(0,a.useState)(""),[E,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(x<=0)return;const e=setInterval(()=>{_(e=>e>0?e-1:0)},1e3);return()=>clearInterval(e)},[x]);function T(r){t(Ue(Ue({},e),{},{[r.target.name]:r.target.value})),"email"===r.target.name&&(C(!1),S(!1))}return(0,li.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 py-12 px-4 sm:px-6 lg:px-8 relative overflow-x-hidden dark:from-neutral-900 dark:to-neutral-950",children:[(0,li.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[(0,li.jsx)("button",{type:"button",onClick:()=>{const e=!f;p(e),"undefined"!==typeof document&&document.documentElement.classList.toggle("dark",e);try{localStorage.setItem("theme",e?"dark":"light")}catch(t){}},className:"p-2 rounded-full bg-white text-gray-800 shadow hover:bg-gray-100 dark:bg-neutral-800 dark:text-gray-100 dark:hover:bg-neutral-700","aria-label":"Toggle dark mode",title:"Toggle theme",children:f?(0,li.jsx)(mi,{className:"h-5 w-5"}):(0,li.jsx)(gi,{className:"h-5 w-5"})}),(0,li.jsx)("button",{type:"button",onClick:()=>g(!0),className:"p-2 rounded-full bg-white text-gray-800 shadow hover:bg-gray-100 dark:bg-neutral-800 dark:text-gray-100 dark:hover:bg-neutral-700","aria-label":"About this app",title:"About",children:(0,li.jsx)(yi,{className:"h-5 w-5"})})]}),(0,li.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,li.jsxs)("div",{className:"text-center",children:[(0,li.jsx)("div",{className:"mx-auto h-16 w-16 bg-primary-600 rounded-full flex items-center justify-center",children:(0,li.jsx)(vi,{className:"h-8 w-8 text-white"})}),(0,li.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-gray-100",children:"Join EduHub"}),(0,li.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:"Create your account to get started"})]}),(0,li.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async function(t){if(t.preventDefault(),!E)return l("Please verify your email before creating an account.");if(e.password!==e.confirmPassword)return l("Passwords do not match");if(e.password.length<6)return l("Password must be at least 6 characters");try{l(""),u(!0);const t=await d(e.email,e.password,e.fullName),{user:r}=t;r&&await Qc.from("users").upsert({id:r.uid,email:e.email,full_name:e.fullName}),h("/dashboard")}catch(o){l("Failed to create an account. Email might already be in use."),console.error("Signup error:",o)}u(!1)},children:[(0,li.jsxs)("div",{className:"space-y-4",children:[(0,li.jsxs)("div",{className:"relative",children:[(0,li.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,li.jsx)(Yc,{className:"h-5 w-5 text-gray-400"})}),(0,li.jsx)("input",{id:"fullName",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"appearance-none relative block w-full px-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm dark:bg-neutral-800 dark:border-neutral-700 dark:text-gray-100 dark:placeholder-gray-500",placeholder:"Full name",value:e.fullName,onChange:T})]}),(0,li.jsxs)("div",{className:"relative",children:[(0,li.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,li.jsx)(bi,{className:"h-5 w-5 text-gray-400"})}),(0,li.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm dark:bg-neutral-800 dark:border-neutral-700 dark:text-gray-100 dark:placeholder-gray-500",placeholder:"Email address",value:e.email,onChange:T,readOnly:E}),(0,li.jsxs)("div",{className:"absolute inset-y-0 right-0 pr-2 flex items-center gap-2",children:[E&&(0,li.jsx)(Xc,{className:"h-5 w-5 text-green-600","aria-label":"Email verified"}),(0,li.jsx)("button",{type:"button",onClick:async()=>{if(!e.email)return l("Email is required");l(""),w(!0);try{await si("/api/auth/request-email-otp",{email:e.email}),S(!0),_(60)}catch(dd){l((null===dd||void 0===dd?void 0:dd.message)||"Failed to send OTP")}finally{w(!1)}},disabled:b||!e.email||E,className:"px-2 py-1 text-xs rounded border border-gray-300 bg-white text-gray-800 hover:bg-gray-50 disabled:opacity-50 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 dark:text-gray-100",title:"Send verification code",children:b?"...":"Verify"})]})]}),k&&!E&&(0,li.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,li.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]{6}",maxLength:6,placeholder:"Enter 6-digit code",className:"mt-2 min-w-0 w-full sm:flex-1 px-3 py-2 border border-gray-300 rounded-md dark:bg-neutral-800 dark:border-neutral-700 dark:text-gray-100",value:j,onChange:e=>N(e.target.value)}),(0,li.jsx)("button",{type:"button",onClick:async()=>{if(!j||6!==j.length)return l("Enter the 6-digit code");l(""),v(!0);try{await si("/api/auth/verify-email-otp",{email:e.email,code:j}),C(!0),S(!1)}catch(dd){l((null===dd||void 0===dd?void 0:dd.message)||"Invalid or expired code")}finally{v(!1)}},disabled:y,className:"mt-2 w-full sm:w-auto px-3 py-2 text-xs rounded-md bg-primary-600 text-white disabled:opacity-50",children:y?"Verifying...":"Verify code"}),(0,li.jsx)("button",{type:"button",onClick:async()=>{if(!(x>0)){l(""),w(!0);try{await si("/api/auth/request-email-otp",{email:e.email}),_(60)}catch(dd){l((null===dd||void 0===dd?void 0:dd.message)||"Failed to resend")}finally{w(!1)}}},disabled:b||x>0,className:"mt-2 w-full sm:w-auto px-3 py-2 text-xs rounded-md border border-gray-300 text-gray-800 dark:border-neutral-700 disabled:opacity-50 dark:text-gray-100",children:x>0?"Resend in ".concat(x,"s"):"Resend OTP"})]}),(0,li.jsxs)("div",{className:"relative",children:[(0,li.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,li.jsx)(wi,{className:"h-5 w-5 text-gray-400"})}),(0,li.jsx)("input",{id:"password",name:"password",type:r?"text":"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm dark:bg-neutral-800 dark:border-neutral-700 dark:text-gray-100 dark:placeholder-gray-500",placeholder:"Password",value:e.password,onChange:T}),(0,li.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!r),children:r?(0,li.jsx)(_i,{className:"h-5 w-5 text-gray-400"}):(0,li.jsx)(xi,{className:"h-5 w-5 text-gray-400"})})]}),(0,li.jsxs)("div",{className:"relative",children:[(0,li.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,li.jsx)(wi,{className:"h-5 w-5 text-gray-400"})}),(0,li.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:s?"text":"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm dark:bg-neutral-800 dark:border-neutral-700 dark:text-gray-100 dark:placeholder-gray-500",placeholder:"Confirm password",value:e.confirmPassword,onChange:T}),(0,li.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>i(!s),children:s?(0,li.jsx)(_i,{className:"h-5 w-5 text-gray-400"}):(0,li.jsx)(xi,{className:"h-5 w-5 text-gray-400"})})]})]}),o&&(0,li.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm dark:bg-red-900/20 dark:border-red-800 dark:text-red-300",children:o}),(0,li.jsx)("div",{children:(0,li.jsx)("button",{type:"submit",disabled:c||!E,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating account...":E?"Create account":"Verify email to continue"})}),(0,li.jsx)("div",{className:"text-center",children:(0,li.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Already have an account?"," ",(0,li.jsx)("button",{type:"button",onClick:()=>h("/login"),className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in"})]})})]})]}),m&&(0,li.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"About Lets Connect"}),(0,li.jsx)("button",{onClick:()=>g(!1),className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100",children:"\u2715"})]}),(0,li.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:(0,li.jsx)(ki,{})}),(0,li.jsx)("div",{className:"mt-4 text-right",children:(0,li.jsx)("button",{onClick:()=>g(!1),className:"px-3 py-2 text-sm rounded border border-gray-300 text-gray-700 hover:bg-gray-100 dark:border-neutral-700 dark:text-gray-100 dark:hover:bg-neutral-800",children:"Close"})})]})})]})}const eu=pi("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),tu=pi("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),ru=pi("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nu=pi("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),au=pi("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),su=pi("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),iu=pi("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ou=pi("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),lu=pi("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),cu=e=>ai("/api/classrooms/mine?userId=".concat(encodeURIComponent(e))),uu=e=>si("/api/classrooms/join",e),du=e=>si("/api/classrooms/create",e),hu=e=>oi("/api/classrooms/".concat(e)),fu=e=>oi("/api/classrooms/members",e),pu=(e,t)=>ai("/api/classrooms/".concat(encodeURIComponent(e),"/full?userId=").concat(encodeURIComponent(t))),mu=e=>ai("/api/join-requests/tutor?userId=".concat(encodeURIComponent(e))),gu=e=>ai("/api/join-requests/mine?userId=".concat(encodeURIComponent(e))),yu=e=>ai("/api/join-requests/".concat(encodeURIComponent(e))),vu=(e,t)=>si("/api/join-requests/".concat(encodeURIComponent(e),"/accept"),t),bu=(e,t)=>si("/api/join-requests/".concat(encodeURIComponent(e),"/reject"),t),wu=(e,t)=>si("/api/join-requests/".concat(encodeURIComponent(e),"/cancel"),t);function xu(){const{currentUser:e,userProfile:t,logout:r,updateUserProfile:n}=ui(),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[d,h]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[m,g]=(0,a.useState)(""),[y,v]=(0,a.useState)(""),[b,w]=(0,a.useState)(!1),[x,_]=(0,a.useState)(!1),[k,S]=(0,a.useState)([]),[j,N]=(0,a.useState)(""),[E,C]=(0,a.useState)(!1),[T,I]=(0,a.useState)(!1),[O,R]=(0,a.useState)(!1),[P,A]=(0,a.useState)([]),[L,D]=(0,a.useState)(!1),[U,M]=(0,a.useState)(""),z=ee(),[F,B]=(0,a.useState)(!1);async function q(){if(!e)return;if(!window.confirm("Delete your account permanently? This cannot be undone."))return;const t=window.prompt("Please enter your password to confirm:");if(t)try{const n=va.credential(e.email,t);await Aa(e,n);try{await oi("/api/users/".concat(e.uid))}catch(r){}await async function(e){return it(e).delete()}(e),z("/signup")}catch(dd){alert((null===dd||void 0===dd?void 0:dd.message)||"Failed to delete account. Please check your password and try again.")}}async function V(){if(e){try{const t=await cu(e.uid);i(t||[]),l(t||[])}catch(t){i([]),l([])}u(!1)}}async function W(){try{const t=await mu(null===e||void 0===e?void 0:e.uid);S(t||[])}catch(dd){S([])}}async function H(){try{const t=await gu(null===e||void 0===e?void 0:e.uid);A(t||[])}catch(dd){console.error("Failed to fetch pending joins:",dd),A([]),v("Failed to load pending requests. Please refresh the page.")}}return(0,a.useEffect)(()=>{e&&(V(),W(),H())},[e]),(0,a.useEffect)(()=>{try{const e="dark"===localStorage.getItem("theme");B(e),document.documentElement.classList.toggle("dark",e)}catch(e){}},[]),(0,a.useEffect)(()=>{E&&(D(!1),M((null===t||void 0===t?void 0:t.full_name)||(null===e||void 0===e?void 0:e.displayName)||""))},[E,t,e]),(0,a.useEffect)(()=>{const e=(j||"").toLowerCase();i(e?(o||[]).filter(t=>t.classrooms.name.toLowerCase().includes(e)||(t.classrooms.description||"").toLowerCase().includes(e)):o)},[j,o]),c?(0,li.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-black",children:(0,li.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 dark:border-gray-500"})}):(0,li.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-black dark:text-gray-100 overflow-x-hidden",children:[(0,li.jsx)("header",{className:"bg-white dark:bg-neutral-900 shadow-sm border-b border-gray-200 dark:border-neutral-800",children:(0,li.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,li.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)(eu,{className:"h-8 w-8 text-primary-600 mr-3"}),(0,li.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 whitespace-nowrap",children:"EduHub"})]}),(0,li.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[s.some(e=>"tutor"===e.role)&&(0,li.jsxs)("div",{className:"relative",children:[(0,li.jsxs)("button",{className:"relative p-2 text-gray-600 hover:text-gray-900",onClick:async()=>{await W(),_(e=>!e)},title:"Notifications",children:[(0,li.jsx)(tu,{className:"h-5 w-5"}),k.length>0&&(0,li.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full px-1",children:k.length})]}),x&&(0,li.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-40",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Notifications"}),(0,li.jsx)("button",{onClick:()=>_(!1),className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Close"})]}),(0,li.jsx)("div",{className:"max-h-80 overflow-y-auto",children:s.some(e=>"tutor"===e.role)&&(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Join Requests"}),0===k.length?(0,li.jsx)("div",{className:"p-3 text-sm text-gray-500 dark:text-gray-400 border rounded dark:border-neutral-800",children:"No pending requests"}):k.map(e=>{var t,r,n,a;return(0,li.jsx)("div",{className:"p-3 border rounded mb-2 dark:border-neutral-800",children:(0,li.jsxs)("div",{className:"flex items-start justify-between",children:[(0,li.jsxs)("div",{className:"min-w-0",children:[(0,li.jsx)("div",{className:"text-sm font-medium truncate text-gray-900 dark:text-gray-100",children:(null===(t=e.users)||void 0===t?void 0:t.full_name)||(null===(r=e.users)||void 0===r?void 0:r.email)||e.student_id}),(0,li.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:null===(n=e.users)||void 0===n?void 0:n.email}),(0,li.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:["Class: ",null===(a=e.classrooms)||void 0===a?void 0:a.name]})]}),(0,li.jsxs)("div",{className:"flex-shrink-0 ml-2 flex space-x-2",children:[(0,li.jsx)("button",{onClick:()=>async function(e){try{await vu(e.id,{classroom_id:e.classroom_id,student_id:e.student_id}),await W(),await V()}catch(dd){}}(e),className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:"Accept"}),(0,li.jsx)("button",{onClick:()=>async function(e){try{var t;await bu(e.id,{classroom_id:e.classroom_id,student_id:e.student_id,classroom_name:null===(t=e.classrooms)||void 0===t?void 0:t.name}),await W()}catch(dd){}}(e),className:"px-2 py-1 bg-red-600 text-white text-xs rounded",children:"Reject"})]})]})},e.id)})]})})]})})]}),(0,li.jsx)("button",{onClick:function(){const e=!F;B(e);try{localStorage.setItem("theme",e?"dark":"light")}catch(t){}document.documentElement.classList.toggle("dark",e)},className:"p-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Toggle theme",children:F?(0,li.jsx)(mi,{className:"h-5 w-5"}):(0,li.jsx)(gi,{className:"h-5 w-5"})}),(0,li.jsx)("div",{className:"flex items-center space-x-4"}),(0,li.jsx)("button",{className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-200 dark:hover:text-white",onClick:()=>w(e=>!e),children:b?(0,li.jsx)(ru,{className:"h-6 w-6"}):(0,li.jsx)(nu,{className:"h-6 w-6"})})]})]})})}),b&&(0,li.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-start justify-end z-40",children:(0,li.jsxs)("div",{className:"w-64 h-full bg-white dark:bg-neutral-900 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800 p-4",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,li.jsx)("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Menu"}),(0,li.jsx)("button",{onClick:()=>w(!1),className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100",children:(0,li.jsx)(ru,{className:"h-5 w-5"})})]}),(0,li.jsxs)("div",{className:"space-y-2",children:[(0,li.jsxs)("button",{onClick:()=>{C(!0),w(!1)},className:"w-full flex items-center justify-start px-3 py-2 rounded hover:bg-gray-100 dark:hover:bg-neutral-800 text-gray-800 dark:text-gray-100",children:[(0,li.jsx)(Yc,{className:"h-5 w-5 mr-2"})," Profile"]}),(0,li.jsx)("button",{onClick:()=>{R(!0),w(!1)},className:"w-full flex items-center justify-start px-3 py-2 rounded hover:bg-gray-100 dark:hover:bg-neutral-800 text-gray-800 dark:text-gray-100",children:"About"}),(0,li.jsx)("button",{onClick:()=>{w(!1),q()},className:"w-full flex items-center justify-start px-3 py-2 rounded border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/20",children:"Delete Account"}),(0,li.jsxs)("button",{onClick:()=>{w(!1),async function(){await r(),z("/login")}()},className:"w-full flex items-center justify-start px-3 py-2 rounded hover:bg-gray-100 dark:hover:bg-neutral-800 text-gray-800 dark:text-gray-100",children:[(0,li.jsx)(au,{className:"h-5 w-5 mr-2"})," Logout"]})]})]})}),(0,li.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,li.jsx)("div",{className:"mb-6",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-black p-6 rounded-xl shadow-sm border border-gray-200 dark:border-neutral-800",children:[(0,li.jsxs)("div",{className:"text-xl font-semibold text-gray-900 dark:text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-rose-400",children:["Welcome",null!==t&&void 0!==t&&t.full_name?", ".concat(t.full_name):"","!"]}),(0,li.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Manage your classes, assignments, and quizzes from here."})]})}),(0,li.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,li.jsx)("div",{className:"bg-white dark:bg-neutral-900 p-6 rounded-xl shadow-md border border-gray-200 dark:border-neutral-800",children:(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)(eu,{className:"h-10 w-10 text-primary-600"}),(0,li.jsxs)("div",{className:"ml-4",children:[(0,li.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Classrooms"}),(0,li.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:o.length})]})]})}),(0,li.jsx)("div",{className:"bg-white dark:bg-neutral-900 p-6 rounded-xl shadow-md border border-gray-200 dark:border-neutral-800",children:(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)(vi,{className:"h-10 w-10 text-green-600"}),(0,li.jsxs)("div",{className:"ml-4",children:[(0,li.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"As Tutor"}),(0,li.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:o.filter(e=>"tutor"===e.role).length})]})]})}),(0,li.jsx)("div",{className:"bg-white dark:bg-neutral-900 p-6 rounded-xl shadow-md border border-gray-200 dark:border-neutral-800",children:(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)(su,{className:"h-10 w-10 text-gray-600 dark:text-gray-300"}),(0,li.jsxs)("div",{className:"ml-4",children:[(0,li.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"As Student"}),(0,li.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:o.filter(e=>"student"===e.role).length})]})]})})]}),(0,li.jsx)("div",{className:"mb-8",children:(0,li.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,li.jsx)("div",{className:"flex-1 min-w-[200px] max-w-md",children:(0,li.jsxs)("div",{className:"relative",children:[(0,li.jsx)(iu,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-300"}),(0,li.jsx)("input",{type:"text",placeholder:"Search classrooms...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-neutral-700 dark:bg-neutral-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:j,onChange:e=>N(e.target.value)})]})}),(0,li.jsxs)("div",{className:"flex flex-wrap gap-4 w-full sm:w-auto",children:[(0,li.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center justify-center px-4 py-2 bg-gradient-to-r from-primary-600 to-emerald-600 text-white rounded-lg shadow hover:opacity-90 transition w-full sm:w-auto min-w-[180px]",children:[(0,li.jsx)(ou,{className:"h-5 w-5 mr-2"}),"Create Classroom"]}),(0,li.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center justify-center px-4 py-2 bg-gradient-to-r from-primary-600 to-green-600 text-white rounded-lg shadow hover:opacity-90 transition w-full sm:w-auto min-w-[180px]",children:[(0,li.jsx)(lu,{className:"h-5 w-5 mr-2"}),"Join Classroom"]})]})]})}),P.length>0&&(0,li.jsx)("div",{className:"mb-6",children:(0,li.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 p-4 rounded-md text-sm",children:[(0,li.jsxs)("div",{className:"font-medium mb-1",children:["You have ",P.length," pending join request",P.length>1?"s":"",":"]}),(0,li.jsx)("ul",{className:"list-disc list-inside space-y-1",children:P.map(r=>{var n;return(0,li.jsxs)("li",{className:"flex items-center justify-between gap-2",children:[(0,li.jsx)("span",{className:"truncate",children:(null===(n=r.classrooms)||void 0===n?void 0:n.name)||r.classroom_id}),(0,li.jsx)("button",{onClick:()=>async function(r){try{var n,a;const s=await yu(r);await wu(r,{classroom_id:null===s||void 0===s?void 0:s.classroom_id,classroom_name:null===s||void 0===s||null===(n=s.classrooms)||void 0===n?void 0:n.name,tutor_id:null===s||void 0===s||null===(a=s.classrooms)||void 0===a?void 0:a.tutor_id,student_id:e.uid,student_name:(null===t||void 0===t?void 0:t.full_name)||e.email}),await H()}catch(dd){}}(r.id),className:"px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 text-xs flex-shrink-0",children:"Cancel"})]},r.id)})})]})}),(0,li.jsx)("div",{className:"grid grid-cols-1 gap-6",children:s.map(t=>{const r=t.classrooms;return(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl shadow-lg hover:shadow-xl transition cursor-pointer overflow-hidden w-full",onClick:()=>z("/classroom/".concat(r.id)),children:[(0,li.jsx)("div",{className:"h-1 bg-gradient-to-r from-primary-600 via-emerald-500 to-green-500"}),(0,li.jsxs)("div",{className:"p-4 sm:p-8 flex flex-col sm:flex-row items-start gap-4 sm:gap-6",children:[(0,li.jsx)("div",{className:"flex-shrink-0 mr-0 sm:mr-1",children:(0,li.jsx)("div",{className:"h-12 w-20 sm:h-16 sm:w-28 bg-primary-50 dark:bg-primary-900/30 rounded-md flex items-center justify-center",children:(0,li.jsx)(eu,{className:"h-8 w-8 text-primary-600"})})}),(0,li.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,li.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between mb-1 gap-2",children:[(0,li.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 md:truncate break-words",children:r.name}),(0,li.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,li.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-primary-100 text-primary-800",children:"tutor"==t.role?"Tutor":"Student"}),"tutor"===t.role&&(0,li.jsx)("button",{className:"px-2 py-1 text-red-600 hover:text-red-800 text-xs border border-red-600 dark:border-red-800 rounded",onClick:async e=>{e.stopPropagation();if(window.confirm("Delete this classroom? This will remove memberships."))try{await hu(r.id),V()}catch(t){}},title:"Delete classroom",children:"Delete"}),"student"===t.role&&(0,li.jsx)("button",{className:"px-2 py-1 text-red-600 hover:text-red-800 text-xs border border-red-200 dark:border-red-800 rounded",onClick:async t=>{t.stopPropagation();if(window.confirm("Exit this classroom?"))try{await fu({classroom_id:r.id,user_id:e.uid}),V()}catch(n){}},title:"Exit classroom",children:"Exit"})]})]}),(0,li.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-base mb-3 truncate",children:r.description||"No description provided"}),(0,li.jsx)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 space-x-6",children:(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)(eu,{className:"h-4 w-4 mr-1"}),(0,li.jsxs)("span",{children:["Created ",new Date(r.created_at).toLocaleDateString()]})]})})]})]})]},r.id)})}),0===s.length&&(0,li.jsxs)("div",{className:"text-center py-12",children:[(0,li.jsx)(eu,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,li.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No classrooms"}),(0,li.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create your first classroom to get started"})]})]}),d&&(0,li.jsx)(_u,{onClose:()=>h(!1),onSuccess:()=>{h(!1),V()}}),f&&(0,li.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Join Classroom"}),(0,li.jsx)("button",{onClick:()=>{p(!1),v(""),g(""),I(!1)},className:"text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100",children:(0,li.jsx)(ru,{className:"h-5 w-5"})})]}),(0,li.jsxs)("form",{onSubmit:async function(r){if(r.preventDefault(),v(""),I(!1),m&&""!==m.trim())try{await uu({security_key:m.trim(),user_id:e.uid,student_name:(null===t||void 0===t?void 0:t.full_name)||e.email}),I(!0),v(""),await W(),await H()}catch(y){console.error("Join classroom error:",y),v(y.message||"Failed to process your request. Please try again.")}else v("Please enter a security key")},children:[(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:["Security Key",(0,li.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,li.jsx)("input",{type:"text",value:m,onChange:e=>{g(e.target.value),v("")},className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter classroom security key",required:!0,disabled:T,autoFocus:!0}),(0,li.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Ask your teacher for the classroom security key"})]}),T?(0,li.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400",children:(0,li.jsxs)("div",{className:"flex",children:[(0,li.jsx)("div",{className:"flex-shrink-0",children:(0,li.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,li.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,li.jsxs)("div",{className:"ml-3",children:[(0,li.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[(0,li.jsx)("span",{className:"font-medium",children:"Request sent!"})," Waiting for tutor approval."]}),(0,li.jsx)("p",{className:"mt-1 text-xs text-yellow-600 dark:text-yellow-400",children:"You'll be notified when your request is approved."})]})]})}):y?(0,li.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:(0,li.jsxs)("div",{className:"flex",children:[(0,li.jsx)("div",{className:"flex-shrink-0",children:(0,li.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,li.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,li.jsx)("div",{className:"ml-3",children:(0,li.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:y})})]})}):null,(0,li.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[!T&&(0,li.jsx)("button",{type:"button",onClick:()=>{p(!1),v(""),g(""),I(!1)},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-neutral-800 border border-gray-300 dark:border-neutral-700 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),!T&&(0,li.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:!m.trim(),children:"Send Join Request"})]})]})]})}),E&&(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Profile Details"}),(0,li.jsx)("button",{onClick:()=>C(!1),className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Close"})]}),(0,li.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,li.jsxs)("div",{className:"flex items-start gap-3",children:[(0,li.jsx)("div",{className:"w-32 text-gray-500 dark:text-gray-400 mt-2",children:"Name"}),(0,li.jsx)("div",{className:"flex-1",children:L?(0,li.jsxs)("div",{className:"space-y-2",children:[(0,li.jsx)("input",{type:"text",value:U,onChange:e=>M(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-neutral-800 dark:border-neutral-700 dark:text-gray-100",placeholder:"Enter your name",autoFocus:!0}),(0,li.jsxs)("div",{className:"flex gap-2",children:[(0,li.jsx)("button",{className:"px-3 py-1 text-xs rounded bg-primary-600 text-white hover:bg-primary-700",onClick:async()=>{try{const e=(U||"").trim();if(!e)return;await n({full_name:e}),D(!1)}catch(dd){alert((null===dd||void 0===dd?void 0:dd.message)||"Failed to update name")}},children:"Save"}),(0,li.jsx)("button",{className:"px-3 py-1 text-xs rounded border border-gray-300 hover:bg-gray-50 dark:border-neutral-700 dark:text-gray-100 dark:hover:bg-neutral-800",onClick:()=>{D(!1),M((null===t||void 0===t?void 0:t.full_name)||(null===e||void 0===e?void 0:e.displayName)||"")},children:"Cancel"})]})]}):(0,li.jsxs)("div",{className:"flex items-center justify-between",children:[(0,li.jsx)("div",{className:"break-words text-gray-900 dark:text-gray-100",children:(null===t||void 0===t?void 0:t.full_name)||(null===e||void 0===e?void 0:e.displayName)||"-"}),(0,li.jsx)("button",{className:"ml-3 px-2 py-1 text-xs rounded border border-gray-300 hover:bg-gray-50 dark:border-neutral-700 dark:text-gray-100 dark:hover:bg-neutral-800",onClick:()=>D(!0),children:"Edit"})]})})]}),(0,li.jsxs)("div",{className:"flex",children:[(0,li.jsx)("div",{className:"w-32 text-gray-500 dark:text-gray-400",children:"Email"}),(0,li.jsx)("div",{className:"flex-1 break-words text-gray-900 dark:text-gray-100",children:(null===e||void 0===e?void 0:e.email)||"-"})]}),(0,li.jsxs)("div",{className:"flex",children:[(0,li.jsx)("div",{className:"w-32 text-gray-500 dark:text-gray-400",children:"User ID"}),(0,li.jsx)("div",{className:"flex-1 break-all text-gray-900 dark:text-gray-100",children:(null===e||void 0===e?void 0:e.uid)||"-"})]})]})]})}),O&&(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"About"}),(0,li.jsx)("button",{onClick:()=>R(!1),className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Close"})]}),(0,li.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:(0,li.jsx)(ki,{})})]})})]})}function _u(e){let{onClose:t,onSuccess:r}=e;const[n,s]=(0,a.useState)({name:"",description:"",security_key:""}),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),{currentUser:u}=ui();function d(){const e=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(26*Math.random()))).join(""),t=String(Math.floor(100+900*Math.random()));return"".concat(e,"-").concat(t)}function h(e){s(Ue(Ue({},n),{},{[e.target.name]:e.target.value}))}return(0,a.useEffect)(()=>{n.security_key||s(e=>Ue(Ue({},e),{},{security_key:d()}))},[]),(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Create Classroom"}),(0,li.jsxs)("form",{onSubmit:async function(e){e.preventDefault(),c(""),o(!0);try{var t,a;if(!n.name)throw new Error("Please enter a classroom name");const e=(n.security_key||d()).toUpperCase();await du({name:n.name,description:n.description,security_key:e,tutor_id:u.uid,tutor_email:null!==(t=u.email)&&void 0!==t?t:null,tutor_full_name:null!==(a=u.displayName)&&void 0!==a?a:null}),r()}catch(s){console.error("Create classroom error:",s),c((null===s||void 0===s?void 0:s.message)||"Failed to create classroom")}finally{o(!1)}},children:[(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Classroom Name"}),(0,li.jsx)("input",{type:"text",name:"name",value:n.name,onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter classroom name",required:!0})]}),(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Description (Optional)"}),(0,li.jsx)("textarea",{name:"description",value:n.description,onChange:h,rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter classroom description"})]}),(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Security Key"}),(0,li.jsxs)("div",{className:"relative",children:[(0,li.jsx)("input",{type:"text",name:"security_key",value:n.security_key,onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 uppercase dark:bg-neutral-800 dark:text-red-500 text-red-600 placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-neutral-800",readOnly:!0,placeholder:"Auto-generated",required:!0,minLength:6}),(0,li.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This access key is fixed and cannot be modified. Share it with others to grant them access to your classroom."})]})]}),l&&(0,li.jsx)("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-300 px-3 py-2 rounded-md text-sm",children:l}),(0,li.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,li.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Cancel"}),(0,li.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:i?"Creating...":"Create"})]})]})]})})}const ku=pi("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Su=pi("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ju=pi("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Nu=pi("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Eu=pi("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Cu=pi("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Tu=pi("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Iu=pi("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ou=pi("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Ru=pi("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Pu=e=>ai("/api/notifications?userId=".concat(encodeURIComponent(e))),Au=e=>oi("/api/notifications/".concat(encodeURIComponent(e))),Lu=(e,t)=>si("/api/documents/".concat(encodeURIComponent(e),"/view"),{user_id:t}),Du=e=>oi("/api/documents/".concat(encodeURIComponent(e))),Uu=e=>{let{classroom_id:t,uploaded_by:r,title:n,description:a,file:s}=e;const i=new FormData;return i.append("classroom_id",t),i.append("uploaded_by",r),i.append("title",n),a&&i.append("description",a),i.append("file",s),fetch("/api/documents/upload",{method:"POST",body:i,credentials:"include"}).then(async e=>{var t;const r=null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"),n=r?await e.json():await e.text();if(!e.ok)throw new Error(r&&n&&n.error?n.error:e.statusText||"Upload failed");return n})},Mu=e=>ai("/api/documents/".concat(encodeURIComponent(e),"/views")),zu=e=>si("/api/assignments",e),Fu=(e,t)=>ii("/api/assignments/".concat(encodeURIComponent(e)),t),Bu=e=>si("/api/quizzes",e);function qu(){var e,t,r,n,s;const{classroomId:i}=te(),{currentUser:o,userProfile:l}=ui(),c=ee(),u=X(),d="/login"===u.pathname||"/signup"===u.pathname,[h,f]=(0,a.useState)(null),[p,m]=(0,a.useState)([]),[g,y]=(0,a.useState)([]),[v,b]=(0,a.useState)([]),[w,x]=(0,a.useState)([]),[_,k]=(0,a.useState)(!0),[S,j]=(0,a.useState)("documents"),[N,E]=(0,a.useState)(!1),[C,T]=(0,a.useState)(!1),[I,O]=(0,a.useState)(!1),[R,P]=(0,a.useState)(!1),[A,L]=(0,a.useState)(null),[D,U]=(0,a.useState)(!1),[M,z]=(0,a.useState)(!1),[F,B]=(0,a.useState)(null),[q,V]=(0,a.useState)(!1),[W,H]=(0,a.useState)([]),[K,J]=(0,a.useState)(0),[G,$]=(0,a.useState)({});async function Q(){try{const e=await pu(i,o.uid);f(e.classroom),m(e.members||[]),y(e.documents||[]),b(e.assignments||[]),x(e.quizzes||[]),J(e.userCredit||0),$(e.memberCredits||{})}catch(e){console.error("Error fetching classroom data:",e),c("/dashboard")}finally{k(!1)}}(0,a.useEffect)(()=>{Q()},[i]),(0,a.useEffect)(()=>{},[null===o||void 0===o?void 0:o.uid]),(0,a.useEffect)(()=>{null!==o&&void 0!==o&&o.uid&&async function(){try{const e=await Pu(null===o||void 0===o?void 0:o.uid);H(e||[])}catch(dd){H([])}}()},[null===o||void 0===o?void 0:o.uid]);const Y="tutor"===(null===(e=p.find(e=>e.user_id===o.uid))||void 0===e?void 0:e.role);return _?(0,li.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-black",children:(0,li.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 dark:border-gray-500"})}):(0,li.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-black dark:text-gray-100 overflow-x-hidden",children:[(0,li.jsx)("header",{className:"bg-white dark:bg-neutral-900 shadow-sm border-b border-gray-200 dark:border-neutral-800",children:(0,li.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,li.jsxs)("div",{className:"flex items-center py-4",children:[(0,li.jsx)("button",{onClick:()=>c("/dashboard"),className:"mr-4 p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-lg",children:(0,li.jsx)(ku,{className:"h-5 w-5"})}),(0,li.jsx)("div",{children:(0,li.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:h.name})}),(0,li.jsxs)("div",{className:"ml-auto flex items-center space-x-3",children:[!Y&&(0,li.jsxs)("span",{className:"px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm font-medium dark:bg-neutral-800 dark:text-gray-100 border border-green-200 dark:border-neutral-700",title:"Your verified credits",children:["Credit: ",K]}),(0,li.jsx)("button",{onClick:()=>z(!0),className:"ml-2 p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-lg",title:"Class Info",children:(0,li.jsx)(yi,{className:"h-5 w-5"})})]})]})})}),(0,li.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,li.jsx)("div",{className:"border-b border-gray-200 dark:border-neutral-800 mb-8",children:(0,li.jsx)("nav",{className:"-mb-px flex space-x-6 overflow-x-auto whitespace-nowrap hide-scrollbar",children:[{id:"documents",label:"Documents",icon:Su},{id:"assignments",label:"Assignments",icon:ju},{id:"quizzes",label:"Quizzes",icon:ju},{id:"members",label:"Members",icon:su}].map(e=>{const t=e.icon;return(0,li.jsxs)("button",{onClick:()=>j(e.id),className:"flex items-center flex-none py-2 px-2 border-b-2 font-medium text-sm ".concat(S===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-neutral-700"),children:[(0,li.jsx)(t,{className:"h-5 w-5 mr-2"}),e.label]},e.id)})})}),"documents"===S&&(0,li.jsx)(Hu,{documents:g,isTutor:Y,onUpload:()=>E(!0),classroomId:i,onRefresh:Q,onRecordView:async function(e){try{if(null===o||void 0===o||!o.uid)return;await Lu(e,o.uid)}catch(dd){console.error("Failed to record document view",dd)}},onShowInfo:e=>{L(e),P(!0)}}),"assignments"===S&&(0,li.jsx)(Ku,{assignments:v,isTutor:Y,onCreate:()=>T(!0),classroomId:i,onRefresh:Q}),"quizzes"===S&&(0,li.jsx)(Ju,{quizzes:w,isTutor:Y,onCreate:()=>O(!0),classroomId:i,onRefresh:Q}),"members"===S&&(0,li.jsx)(Gu,{members:p,isTutor:Y,classroomId:i,onRefresh:Q,onMemberRemoved:function(e){m(t=>(t||[]).filter(t=>t.user_id!==e))},memberCredits:G})]}),!d&&(0,li.jsx)("button",{onClick:()=>c("/dashboard"),title:"Home",className:"fixed right-6 bottom-6 z-40 h-12 w-12 rounded-full bg-primary-600 text-white shadow-lg hover:bg-primary-700 focus:outline-none flex items-center justify-center border border-primary-700",children:(0,li.jsx)(Nu,{className:"h-6 w-6"})}),N&&(0,li.jsx)(Qu,{classroomId:i,onClose:()=>E(!1),onSuccess:()=>{E(!1),Q()}}),C&&(0,li.jsx)(Vu,{classroomId:i,onClose:()=>T(!1),onSuccess:()=>{T(!1),Q()}}),I&&(0,li.jsx)(Wu,{classroomId:i,onClose:()=>O(!1),onSuccess:()=>{O(!1),Q()}}),R&&A&&(0,li.jsx)(Yu,{documentId:A,onClose:()=>{P(!1),L(null)}}),M&&(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Class Info"}),(0,li.jsx)("button",{onClick:()=>z(!1),className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Close"})]}),(0,li.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,li.jsxs)("div",{className:"flex",children:[(0,li.jsx)("div",{className:"w-36 text-gray-500 dark:text-gray-400",children:"Classroom"}),(0,li.jsx)("div",{className:"flex-1 break-words text-gray-900 dark:text-gray-100",children:null===h||void 0===h?void 0:h.name})]}),(0,li.jsxs)("div",{className:"flex",children:[(0,li.jsx)("div",{className:"w-36 text-gray-500 dark:text-gray-400",children:"Security Key"}),(0,li.jsx)("div",{className:"flex-1 break-words font-mono text-gray-900 dark:text-gray-100",children:null===h||void 0===h?void 0:h.security_key})]}),(0,li.jsxs)("div",{className:"flex",children:[(0,li.jsx)("div",{className:"w-36 text-gray-500 dark:text-gray-400",children:"Tutor"}),(0,li.jsx)("div",{className:"flex-1 break-words text-gray-900 dark:text-gray-100",children:(null===(t=p.find(e=>"tutor"===e.role))||void 0===t||null===(r=t.users)||void 0===r?void 0:r.full_name)||(null===(n=p.find(e=>"tutor"===e.role))||void 0===n||null===(s=n.users)||void 0===s?void 0:s.email)||(null===h||void 0===h?void 0:h.tutor_id)})]}),(0,li.jsxs)("div",{className:"flex",children:[(0,li.jsx)("div",{className:"w-36 text-gray-500 dark:text-gray-400",children:"Members"}),(0,li.jsx)("div",{className:"flex-1 break-words text-gray-900 dark:text-gray-100",children:p.length})]})]})]})}),F&&(0,li.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,li.jsx)("div",{className:"bg-white dark:bg-neutral-900 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800 rounded-lg p-4 max-w-sm",children:(0,li.jsxs)("div",{className:"flex items-start justify-between",children:[(0,li.jsx)("div",{className:"pr-3 text-sm text-gray-800 dark:text-gray-100",children:F.message}),(0,li.jsx)("button",{className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 text-sm",onClick:async()=>{try{await Au(F.id)}catch(e){}B(null)},title:"Dismiss",children:"\u2715"})]})})})]})}function Vu(e){let{classroomId:t,onClose:r,onSuccess:n}=e;const[s,i]=(0,a.useState)({title:"",description:"",due_date:"",points_possible:100}),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),{currentUser:d}=ui();function h(e){i(Ue(Ue({},s),{},{[e.target.name]:e.target.value}))}return(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Create Assignment"}),(0,li.jsxs)("form",{onSubmit:async function(e){e.preventDefault(),u(""),l(!0);try{await zu({classroom_id:t,created_by:d.uid,title:s.title,description:s.description||null,due_date:s.due_date||null,points_possible:s.points_possible?parseInt(s.points_possible):null}),n()}catch(r){console.error("Create assignment error",r),u(r&&(r.message||r.details||r.hint)||"Failed to create assignment")}finally{l(!1)}},children:[(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Title"}),(0,li.jsx)("input",{type:"text",name:"title",value:s.title,onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter assignment title",required:!0})]}),(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Description"}),(0,li.jsx)("textarea",{name:"description",value:s.description,onChange:h,rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter assignment description"})]}),(0,li.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[(0,li.jsxs)("div",{children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Score"}),(0,li.jsx)("input",{type:"number",name:"points_possible",value:s.points_possible,onChange:h,min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100",placeholder:"Points"})]}),(0,li.jsxs)("div",{children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Due Date"}),(0,li.jsx)("input",{type:"datetime-local",name:"due_date",value:s.due_date,onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100"})]})]}),c&&(0,li.jsx)("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-300 px-3 py-2 rounded-md text-sm",children:c}),(0,li.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,li.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Cancel"}),(0,li.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:o?"Creating...":"Create"})]})]})]})})}function Wu(e){let{classroomId:t,onClose:r,onSuccess:n}=e;const[s,i]=(0,a.useState)({title:"",description:"",time_limit:""}),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),{currentUser:d}=ui();function h(e){i(Ue(Ue({},s),{},{[e.target.name]:e.target.value}))}return(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Create Quiz"}),(0,li.jsxs)("form",{onSubmit:async function(e){e.preventDefault(),u(""),l(!0);try{await Bu({classroom_id:t,created_by:d.uid,title:s.title,description:s.description||null,time_limit:s.time_limit?parseInt(s.time_limit):null}),n()}catch(r){u((null===r||void 0===r?void 0:r.message)||"Failed to create quiz")}finally{l(!1)}},children:[(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Title"}),(0,li.jsx)("input",{type:"text",name:"title",value:s.title,onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter quiz title",required:!0})]}),(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Description (Optional)"}),(0,li.jsx)("textarea",{name:"description",value:s.description,onChange:h,rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter quiz description"})]}),(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Time Limit (minutes)"}),(0,li.jsx)("input",{type:"number",name:"time_limit",value:s.time_limit,onChange:h,min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100",placeholder:"Optional time limit"})]}),c&&(0,li.jsx)("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-300 px-3 py-2 rounded-md text-sm",children:c}),(0,li.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,li.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Cancel"}),(0,li.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:o?"Creating...":"Create"})]})]})]})})}function Hu(e){let{documents:t,isTutor:r,onUpload:n,classroomId:a,onRefresh:s,onRecordView:i,onShowInfo:o}=e;return(0,li.jsxs)("div",{children:[r&&(0,li.jsx)("div",{className:"mb-6",children:(0,li.jsxs)("button",{onClick:n,className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,li.jsx)(Eu,{className:"h-5 w-5 mr-2"}),"Upload Document"]})}),(0,li.jsx)("div",{className:"grid grid-cols-1 gap-6",children:t.map(e=>{var t;return(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,li.jsxs)("div",{className:"flex-1",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:e.title}),(0,li.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Uploaded by ",(null===(t=e.users)||void 0===t?void 0:t.full_name)||"Unknown"]}),(0,li.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(e.created_at).toLocaleDateString()})]}),(0,li.jsx)(Su,{className:"h-8 w-8 text-gray-400"})]}),e.description&&(0,li.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2",children:e.description}),(0,li.jsxs)("div",{className:"flex items-center justify-between",children:[(0,li.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.file_type," \u2022 ",(e.file_size/1024).toFixed(1)," KB"]}),(0,li.jsxs)("div",{className:"flex space-x-2",children:[(0,li.jsx)("button",{onClick:async()=>{try{await(null===i||void 0===i?void 0:i(e.id))}catch(t){}window.open(e.file_url,"_blank")},className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",title:"View",children:(0,li.jsx)(xi,{className:"h-4 w-4"})}),(0,li.jsx)("button",{onClick:()=>{const t=document.createElement("a");t.href=e.file_url,t.download=e.file_name,t.click()},className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",title:"Download",children:(0,li.jsx)(Cu,{className:"h-4 w-4"})}),r&&(0,li.jsx)("button",{onClick:async()=>{if(window.confirm("Delete this document?"))try{await Du(e.id),await(null===s||void 0===s?void 0:s())}catch(t){}},className:"p-2 text-red-600 hover:text-red-900",title:"Delete Document",children:(0,li.jsx)(Tu,{className:"h-4 w-4"})}),r&&(0,li.jsx)("button",{onClick:()=>null===o||void 0===o?void 0:o(e.id),className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",title:"Show Info",children:(0,li.jsx)(su,{className:"h-4 w-4"})})]})]})]},e.id)})}),0===t.length&&(0,li.jsxs)("div",{className:"text-center py-12",children:[(0,li.jsx)(Su,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,li.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No documents"}),(0,li.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r?"Upload your first document to get started":"No documents uploaded yet"})]})]})}function Ku(e){let{assignments:t,isTutor:r,onCreate:n,classroomId:s,onRefresh:i}=e;const o=ee(),[l,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(null);return(0,li.jsxs)("div",{children:[r&&(0,li.jsx)("div",{className:"mb-6",children:(0,li.jsxs)("button",{onClick:n,className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,li.jsx)(ou,{className:"h-5 w-5 mr-2"}),"Create Assignment"]})}),(0,li.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t;return(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-start justify-between",children:[(0,li.jsxs)("div",{className:"flex-1",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.title}),(0,li.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Created by ",(null===(t=e.users)||void 0===t?void 0:t.full_name)||"Unknown"]}),(0,li.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(e.created_at).toLocaleDateString()}),e.description&&(0,li.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-3",children:e.description}),e.due_date&&(0,li.jsxs)("div",{className:"flex items-center text-sm text-gray-700 dark:text-gray-300 mt-3",children:[(0,li.jsx)(Iu,{className:"h-4 w-4 mr-2"}),"Due: ",new Date(e.due_date).toLocaleDateString()]})]}),(0,li.jsx)("div",{className:"text-right ml-4",children:null!=e.points_possible&&(0,li.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:[e.points_possible," credits"]})})]}),(0,li.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,li.jsx)("div",{className:"flex space-x-4",children:(0,li.jsxs)("button",{onClick:()=>o("/assignment/".concat(e.id)),className:"flex items-center text-primary-600 hover:text-primary-700 text-sm",children:[(0,li.jsx)(xi,{className:"h-4 w-4 mr-1"}),"View Details"]})}),r&&(0,li.jsx)("div",{className:"flex space-x-2",children:(0,li.jsx)("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",onClick:()=>{d(e),c(!0)},title:"Edit Assignment",children:(0,li.jsx)(Ou,{className:"h-4 w-4"})})})]})]},e.id)})}),0===t.length&&(0,li.jsxs)("div",{className:"text-center py-12",children:[(0,li.jsx)(ju,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,li.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No assignments"}),(0,li.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r?"Create your first assignment to get started":"No assignments yet"})]}),r&&l&&u&&(0,li.jsx)($u,{assignment:u,onClose:()=>{c(!1),d(null)},onSuccess:()=>{c(!1),d(null),null===i||void 0===i||i()}})]})}function Ju(e){let{quizzes:t,isTutor:r,onCreate:n,classroomId:a,onRefresh:s}=e;const i=ee();return(0,li.jsxs)("div",{children:[r&&(0,li.jsx)("div",{className:"mb-6",children:(0,li.jsxs)("button",{onClick:n,className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,li.jsx)(ou,{className:"h-5 w-5 mr-2"}),"Create Quiz"]})}),(0,li.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t;return(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,li.jsxs)("div",{className:"flex-1",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.title}),(0,li.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Created by ",(null===(t=e.users)||void 0===t?void 0:t.full_name)||"Unknown"]}),(0,li.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(e.created_at).toLocaleDateString()})]}),(0,li.jsxs)("div",{className:"text-right",children:[(0,li.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[e.total_points," points"]}),e.time_limit&&(0,li.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(0,li.jsx)(Ru,{className:"h-3 w-3 mr-1"}),e.time_limit," minutes"]})]})]}),e.description&&(0,li.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:e.description}),(0,li.jsxs)("div",{className:"flex items-center justify-between",children:[(0,li.jsxs)("div",{className:"flex space-x-4",children:[(0,li.jsxs)("button",{onClick:()=>i("/quiz/".concat(e.id)),className:"flex items-center text-primary-600 hover:text-primary-700 text-sm",children:[(0,li.jsx)(xi,{className:"h-4 w-4 mr-1"}),"View Details"]}),!r&&(0,li.jsxs)("button",{onClick:()=>i("/quiz/".concat(e.id)),className:"flex items-center text-green-600 hover:text-green-700 text-sm",children:[(0,li.jsx)(ou,{className:"h-4 w-4 mr-1"}),"Take Quiz"]})]}),r&&(0,li.jsxs)("div",{className:"flex space-x-2",children:[(0,li.jsx)("button",{className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",children:(0,li.jsx)(Ou,{className:"h-4 w-4"})}),(0,li.jsx)("button",{className:"p-2 text-red-600 hover:text-red-900",children:(0,li.jsx)(Tu,{className:"h-4 w-4"})})]})]})]},e.id)})}),0===t.length&&(0,li.jsxs)("div",{className:"text-center py-12",children:[(0,li.jsx)(ju,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,li.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No quizzes"}),(0,li.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r?"Create your first quiz to get started":"No quizzes yet"})]})]})}function Gu(e){let{members:t,isTutor:r,classroomId:n,onRefresh:s,onMemberRemoved:i,memberCredits:o}=e;const[l,c]=(0,a.useState)({});return(0,li.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t;return(0,li.jsx)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-md p-4 sm:p-6 border border-gray-200 dark:border-neutral-800",children:(0,li.jsxs)("div",{className:"flex items-start sm:items-center",children:[(0,li.jsx)("div",{className:"h-10 w-10 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,li.jsx)("span",{className:"text-primary-600 font-medium",children:(null===(t=e.users.full_name)||void 0===t?void 0:t.charAt(0))||e.users.email.charAt(0)})}),(0,li.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,li.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:e.users.full_name||"No name"}),(0,li.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 break-words",children:e.users.email})]}),(0,li.jsxs)("div",{className:"ml-2 sm:ml-4 flex items-center gap-2",children:[(0,li.jsx)("span",{className:"px-3 py-1 text-xs sm:text-sm font-medium rounded-full whitespace-nowrap ".concat("tutor"===e.role?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"tutor"==e.role?"Tutor":"Student"}),"tutor"!==e.role&&(0,li.jsxs)("span",{className:"px-2 py-1 text-xs sm:text-sm font-medium rounded-full bg-emerald-100 text-emerald-800",title:"Verified Credits",children:["Credit: ",(null===o||void 0===o?void 0:o[e.user_id])||0]}),r&&"tutor"!==e.role&&(0,li.jsx)("button",{className:"px-2 py-1 text-red-600 hover:text-red-800 text-xs border border-red-200 rounded disabled:opacity-50",disabled:!!l[e.user_id],onClick:async()=>{if(window.confirm("Remove ".concat(e.users.full_name||e.users.email," from this class?"))){c(t=>Ue(Ue({},t),{},{[e.user_id]:!0}));try{await fu({classroom_id:n,user_id:e.user_id}),null===i||void 0===i||i(e.user_id),await(null===s||void 0===s?void 0:s())}catch(dd){console.error("Remove member error:",dd),alert("Failed to remove member. ".concat((null===dd||void 0===dd?void 0:dd.message)||""))}finally{c(t=>Ue(Ue({},t),{},{[e.user_id]:!1}))}}},title:"Remove from class",children:l[e.user_id]?"Removing...":"Remove"})]})]})},e.id)})})}function $u(e){var t;let{assignment:r,onClose:n,onSuccess:s}=e;const[i,o]=(0,a.useState)({title:(null===r||void 0===r?void 0:r.title)||"",description:(null===r||void 0===r?void 0:r.description)||"",due_date:null!==r&&void 0!==r&&r.due_date?r.due_date.slice(0,16):"",points_possible:null!==(t=null===r||void 0===r?void 0:r.points_possible)&&void 0!==t?t:100}),[l,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)("");function h(e){o(Ue(Ue({},i),{},{[e.target.name]:e.target.value}))}return(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Edit Assignment"}),(0,li.jsxs)("form",{onSubmit:async function(e){e.preventDefault(),d(""),c(!0);try{const e={title:i.title,description:i.description||null,due_date:i.due_date||null,points_possible:i.points_possible?parseInt(i.points_possible):null};await Fu(r.id,e),null===s||void 0===s||s()}catch(t){d((null===t||void 0===t?void 0:t.message)||"Failed to update assignment")}finally{c(!1)}},children:[(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Title"}),(0,li.jsx)("input",{type:"text",name:"title",value:i.title,onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100",required:!0})]}),(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Description"}),(0,li.jsx)("textarea",{name:"description",value:i.description,onChange:h,rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100"})]}),(0,li.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[(0,li.jsxs)("div",{children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Credits"}),(0,li.jsx)("input",{type:"number",name:"points_possible",value:i.points_possible,onChange:h,min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100"})]}),(0,li.jsxs)("div",{children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Due Date"}),(0,li.jsx)("input",{type:"datetime-local",name:"due_date",value:i.due_date,onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100"})]})]}),u&&(0,li.jsx)("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-300 px-3 py-2 rounded-md text-sm",children:u}),(0,li.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,li.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Cancel"}),(0,li.jsx)("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:l?"Saving...":"Save"})]})]})]})})}function Qu(e){let{classroomId:t,onClose:r,onSuccess:n}=e;const[s,i]=(0,a.useState)({title:"",description:"",file:null}),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),{currentUser:d}=ui();function h(e){"file"===e.target.name?i(Ue(Ue({},s),{},{file:e.target.files[0]})):i(Ue(Ue({},s),{},{[e.target.name]:e.target.value}))}return(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Upload Document"}),(0,li.jsxs)("form",{onSubmit:async function(e){e.preventDefault(),u(""),l(!0);try{if(!s.file)throw new Error("Please select a file");await Uu({classroom_id:t,uploaded_by:d.uid,title:s.title,description:s.description,file:s.file}),n()}catch(c){console.error("Error uploading document:",c),u((null===c||void 0===c?void 0:c.message)||"Failed to upload document")}finally{l(!1)}},children:[(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Title"}),(0,li.jsx)("input",{type:"text",name:"title",value:s.title,onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter document title",required:!0})]}),(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Description (Optional)"}),(0,li.jsx)("textarea",{name:"description",value:s.description,onChange:h,rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter document description"})]}),(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"File"}),(0,li.jsx)("input",{type:"file",name:"file",onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100",required:!0})]}),c&&(0,li.jsx)("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-300 px-3 py-2 rounded-md text-sm",children:c}),(0,li.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,li.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Cancel"}),(0,li.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:o?"Uploading...":"Upload"})]})]})]})})}function Yu(e){let{documentId:t,onClose:r}=e;const[n,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[l,c]=(0,a.useState)("");return(0,a.useEffect)(()=>{!async function(){try{const e=await Mu(t);s(e||[])}catch(dd){console.error("Error fetching document views:",dd),c("Failed to load views")}finally{o(!1)}}()},[t]),(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-lg w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Document Views"}),(0,li.jsx)("button",{onClick:r,className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Close"})]}),i?(0,li.jsx)("div",{className:"py-8 text-center text-gray-600 dark:text-gray-300",children:"Loading..."}):l?(0,li.jsx)("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-300 px-3 py-2 rounded-md text-sm",children:l}):0===n.length?(0,li.jsxs)("div",{className:"text-center py-8",children:[(0,li.jsx)(su,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,li.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mt-2",children:"No views yet"}),(0,li.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No student has opened this document"})]}):(0,li.jsx)("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:n.map(e=>{var t,r;return(0,li.jsx)("div",{className:"border border-gray-200 dark:border-neutral-800 rounded-md p-3 flex items-center justify-between",children:(0,li.jsxs)("div",{children:[(0,li.jsx)("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:(null===(t=e.users)||void 0===t?void 0:t.full_name)||(null===(r=e.users)||void 0===r?void 0:r.email)||e.user_id}),(0,li.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Viewed at ",new Date(e.viewed_at).toLocaleString()]})]})},"".concat(e.document_id,"-").concat(e.user_id))})})]})})}const Xu=pi("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function Zu(){const{assignmentId:e}=te(),{currentUser:t,userProfile:r}=ui(),n=ee(),s=X(),i="/login"===s.pathname||"/signup"===s.pathname,[o,l]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[d,h]=(0,a.useState)(!0),[f,p]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1),[y,v]=(0,a.useState)(""),[b,w]=(0,a.useState)(!1),[x,_]=(0,a.useState)(!1),[k,S]=(0,a.useState)({total:0,verified:0,pending:0});async function j(){try{const{data:a,error:s}=await Qc.from("assignments").select("\n          *,\n          users (\n            full_name\n          ),\n          classrooms (\n            id,\n            name\n          )\n        ").eq("id",e).single();if(s)throw s;const{data:i,error:o}=await Qc.from("classroom_members").select("*").eq("classroom_id",a.classroom_id).eq("user_id",t.uid).single();if(o||!i)return void n("/dashboard");if(l(a),w("tutor"===i.role),"student"===i.role){let n=null;try{const{data:r,error:a}=await Qc.from("assignment_submissions").select("\n              *,\n              users (\n                full_name\n              )\n            ").eq("assignment_id",e).eq("student_id",t.uid).maybeSingle();if(a)throw a;n=r}catch(r){const{data:a}=await Qc.from("assignment_submissions").select("*").eq("assignment_id",e).eq("student_id",t.uid).maybeSingle();n=a}n&&u(n)}}catch(y){console.error("Error fetching assignment data:",y),n("/dashboard")}finally{h(!1)}}return(0,a.useEffect)(()=>{j()},[e]),d?(0,li.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-black",children:(0,li.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 dark:border-gray-500"})}):(0,li.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-950",children:[(0,li.jsx)("header",{className:"bg-white dark:bg-neutral-900 shadow-sm border-b dark:border-neutral-800",children:(0,li.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,li.jsxs)("div",{className:"flex items-center py-4",children:[(0,li.jsx)("button",{onClick:()=>n("/classroom/".concat(o.classroom_id)),className:"mr-4 p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-lg text-gray-700 dark:text-gray-200",children:(0,li.jsx)(ku,{className:"h-5 w-5"})}),(0,li.jsxs)("div",{className:"flex-1",children:[(0,li.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:o.title}),(0,li.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:o.classrooms.name})]}),(0,li.jsx)("div",{className:"text-right",children:null!=o.points_possible&&(0,li.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm font-medium rounded-full",children:[o.points_possible," credits"]})}),b&&(0,li.jsx)("button",{onClick:async()=>{await async function(){try{const{data:t,error:r}=await Qc.from("assignment_submissions").select("id, graded_at").eq("assignment_id",e);if(r)throw r;const n=(null===t||void 0===t?void 0:t.length)||0,a=(t||[]).filter(e=>e.graded_at).length;S({total:n,verified:a,pending:n-a})}catch(dd){console.error("Fetch stats error",dd)}}(),_(!0)},className:"ml-3 px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded",title:"Assignment Info",children:"Info"})]})})}),(0,li.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-md p-6 mb-6 border border-gray-200 dark:border-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,li.jsxs)("div",{className:"flex-1",children:[(0,li.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Assignment Details"}),(0,li.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["Created by ",o.users.full_name]}),(0,li.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(o.created_at).toLocaleDateString()})]}),o.due_date&&(0,li.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[(0,li.jsx)(Iu,{className:"h-4 w-4 mr-2"}),"Due: ",new Date(o.due_date).toLocaleDateString()]})]}),(0,li.jsx)("div",{className:"prose max-w-none",children:(0,li.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:o.description})})]}),!b&&(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-neutral-800",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Your Submission"}),c?(0,li.jsxs)("div",{className:"border border-gray-200 dark:border-neutral-800 rounded-lg p-4",children:[(0,li.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,li.jsxs)("div",{children:[(0,li.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Submitted"}),(0,li.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[new Date(c.submitted_at).toLocaleDateString()," at"," ",new Date(c.submitted_at).toLocaleTimeString()]})]}),null!==c.points_earned?(0,li.jsx)("div",{className:"text-right",children:(0,li.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:["Credits: ",c.points_earned,"/",o.points_possible]})}):(0,li.jsx)("div",{className:"text-right",children:(0,li.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-sm font-medium rounded-full",children:"Waiting verification by tutor"})})]}),(()=>{const e=(c.submission_text||"").split("\n").filter(e=>!e.startsWith("File: ")&&!e.startsWith("FileName: ")).join("\n").trim();return e?(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Text Response:"}),(0,li.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap bg-gray-50 dark:bg-neutral-800 p-3 rounded",children:e})]}):null})(),(()=>{const e=(c.submission_text||"").split("\n"),t=e.find(e=>e.startsWith("File: ")),r=t?t.slice(6).trim():null,n=e.find(e=>e.startsWith("FileName: "));let a=n?n.slice(10).trim():null;if(!a&&r)try{const e=r.substring(r.lastIndexOf("/")+1);a=decodeURIComponent(e.substring(e.indexOf("-")+1))}catch(s){}return r?(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Attached File:"}),(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)(Su,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,li.jsx)("span",{className:"text-gray-700 dark:text-gray-300 truncate max-w-xs",children:a||"Attachment"}),(0,li.jsx)("button",{onClick:()=>window.open(r,"_blank"),className:"ml-4 text-primary-600 hover:text-primary-700 text-sm",children:"View File"})]})]}):null})(),!b&&(0,li.jsx)("div",{className:"flex justify-end mt-4",children:(0,li.jsx)("button",{onClick:async()=>{try{await Qc.from("assignment_submissions").delete().eq("assignment_id",e).eq("student_id",t.uid),u(null),j()}catch(dd){alert("Failed to delete submission")}},className:"px-3 py-1 text-red-600 hover:text-red-800 text-sm border border-red-300 dark:border-red-800 rounded",children:"Delete Submission"})}),c.feedback&&(0,li.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[(0,li.jsx)("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Feedback:"}),(0,li.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:c.feedback})]})]}):(0,li.jsxs)("div",{className:"text-center py-8",children:[(0,li.jsx)(Su,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,li.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No submission yet"}),(0,li.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Submit your assignment to get started"}),(0,li.jsx)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Submit Assignment"})]})]}),b&&(0,li.jsx)(td,{assignmentId:e})]}),m&&(0,li.jsx)(ed,{assignmentId:e,onClose:()=>g(!1),onSuccess:()=>{g(!1),j()}}),x&&(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-md w-full p-6 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Assignment Info"}),(0,li.jsx)("button",{onClick:()=>_(!1),className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:"Close"})]}),(0,li.jsxs)("div",{className:"space-y-3",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,li.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Total submissions"}),(0,li.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:k.total})]}),(0,li.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,li.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Verified"}),(0,li.jsx)("span",{className:"font-medium text-green-700 dark:text-green-400",children:k.verified})]}),(0,li.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,li.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Not verified"}),(0,li.jsx)("span",{className:"font-medium text-yellow-700 dark:text-yellow-400",children:k.pending})]})]})]})}),!i&&(0,li.jsx)("button",{onClick:()=>n("/dashboard"),title:"Home",className:"fixed right-6 bottom-6 z-40 h-12 w-12 rounded-full bg-primary-600 text-white shadow-lg hover:bg-primary-700 focus:outline-none flex items-center justify-center border border-primary-700",children:(0,li.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6",children:[(0,li.jsx)("path",{d:"M11.47 3.84a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 1-1.06 1.06l-.9-.9V20.5A2.25 2.25 0 0 1 17 22.75H7A2.25 2.25 0 0 1 4.75 20.5v-7.81l-.9.9a.75.75 0 1 1-1.06-1.06l8.69-8.69Z"}),(0,li.jsx)("path",{d:"M12 5.25l6.5 6.5V20.5A.75.75 0 0 1 17.75 21.25H6.25A.75.75 0 0 1 5.5 20.5V11.75l6.5-6.5Z"})]})})]})}function ed(e){let{assignmentId:t,onClose:r,onSuccess:n}=e;const[s,i]=(0,a.useState)({content:"",file:null}),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),{currentUser:d}=ui();function h(e){"file"===e.target.name?i(Ue(Ue({},s),{},{file:e.target.files[0]})):i(Ue(Ue({},s),{},{[e.target.name]:e.target.value}))}return(0,li.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-neutral-800 shadow-xl ring-1 ring-gray-200 dark:ring-neutral-800",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Submit Assignment"}),(0,li.jsxs)("form",{onSubmit:async function(e){e.preventDefault(),u(""),l(!0);try{var r,a;try{var i,o;const e={id:d.uid,email:null!==(i=d.email)&&void 0!==i?i:null,full_name:null!==(o=d.displayName)&&void 0!==o?o:null},{error:t}=await Qc.from("users").upsert(e,{onConflict:"id"});if(t)throw t}catch(h){console.error("User upsert failed",h)}let e=null;if(s.file){const r="".concat(Date.now(),"-").concat(s.file.name),{error:n}=await Qc.storage.from("documents").upload("".concat(t,"/").concat(r),s.file);if(n)throw n;const{data:a}=Qc.storage.from("documents").getPublicUrl("".concat(t,"/").concat(r));e=a.publicUrl}const l=[(null===(r=s.content)||void 0===r?void 0:r.trim())||"",e?"File: ".concat(e):"",null!==(a=s.file)&&void 0!==a&&a.name?"FileName: ".concat(s.file.name):""].filter(Boolean).join("\n\n"),{error:c}=await Qc.from("assignment_submissions").upsert({assignment_id:t,student_id:d.uid,submission_text:l||null},{onConflict:"assignment_id,student_id"});if(c)throw c;n()}catch(c){console.error("Error submitting assignment:",c),u((null===c||void 0===c?void 0:c.message)||(null===c||void 0===c?void 0:c.details)||"Failed to submit assignment")}finally{l(!1)}},children:[(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Text Response (Optional)"}),(0,li.jsx)("textarea",{name:"content",value:s.content,onChange:h,rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-neutral-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Enter your response here..."})]}),(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Attach File (Optional)"}),(0,li.jsx)("input",{type:"file",name:"file",onChange:h,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 bg-white dark:bg-neutral-800 text-gray-900 dark:text-gray-100"})]}),c&&(0,li.jsx)("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-300 px-3 py-2 rounded-md text-sm",children:c}),(0,li.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,li.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:"Cancel"}),(0,li.jsx)("button",{type:"submit",disabled:o||!s.content&&!s.file,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:o?"Submitting...":"Submit"})]})]})]})})}function td(e){let{assignmentId:t}=e;const[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null),[c,u]=(0,a.useState)({}),{currentUser:d}=ui();async function h(){try{var e;const{data:a}=await Qc.from("assignments").select("points_possible").eq("id",t).single();l(null!==(e=null===a||void 0===a?void 0:a.points_possible)&&void 0!==e?e:null);let s=null;try{const e=await Qc.from("assignment_submissions").select("\n            id, submission_text, points_earned, graded_at, users ( full_name, email ), submitted_at\n          ").eq("assignment_id",t).order("submitted_at",{ascending:!1});if(e.error)throw e.error;s=e.data}catch(r){s=(await Qc.from("assignment_submissions").select("id, submission_text, points_earned, graded_at, submitted_at").eq("assignment_id",t).order("submitted_at",{ascending:!1})).data||[]}const i=(s||[]).filter(e=>{const t=(null===e||void 0===e?void 0:e.submission_text)||"";if(!t)return!0;return!/(^|\n)\s*ShowToTutor:\s*(on|off)/i.test(t)||/(^|\n)\s*ShowToTutor:\s*on/i.test(t)});n(i)}catch(a){console.error("Error fetching submissions:",a)}finally{i(!1)}}if((0,a.useEffect)(()=>{h()},[t]),s)return(0,li.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,li.jsxs)("div",{className:"animate-pulse",children:[(0,li.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,li.jsxs)("div",{className:"space-y-3",children:[(0,li.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,li.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})});return(0,li.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-md p-6 border border-gray-200 dark:border-neutral-800",children:[(0,li.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:["Student Submissions (",r.length,")"]}),0===r.length?(0,li.jsxs)("div",{className:"text-center py-8",children:[(0,li.jsx)(Su,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,li.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No submissions yet"}),(0,li.jsx)("p",{className:"text-gray-600",children:"Students haven't submitted their assignments yet"})]}):(0,li.jsx)("div",{className:"space-y-4",children:r.map(e=>{var t,r,n,a,s,i,l,f,p,m;return(0,li.jsxs)("div",{className:"border border-gray-200 dark:border-neutral-800 rounded-lg p-4",children:[(0,li.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,li.jsxs)("div",{className:"flex items-start gap-3",children:[(0,li.jsx)("div",{className:"h-9 w-9 rounded-full bg-primary-100 dark:bg-neutral-800 flex items-center justify-center text-primary-700 dark:text-primary-300 flex-shrink-0",children:((null===(t=e.users)||void 0===t||null===(r=t.full_name)||void 0===r?void 0:r[0])||(null===(n=e.users)||void 0===n||null===(a=n.email)||void 0===a?void 0:a[0])||"?").toUpperCase()}),(0,li.jsxs)("div",{children:[(0,li.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:(null===(s=e.users)||void 0===s?void 0:s.full_name)||(null===(i=e.users)||void 0===i?void 0:i.email)}),(0,li.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-all",children:null===(l=e.users)||void 0===l?void 0:l.email}),(0,li.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Submitted ",new Date(e.submitted_at).toLocaleDateString()," at"," ",new Date(e.submitted_at).toLocaleTimeString()]})]})]}),null!==e.points_earned&&(0,li.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:[e.points_earned," credits"]})]}),(()=>{const t=(e.submission_text||"").split("\n").filter(e=>!e.startsWith("File: ")&&!e.startsWith("FileName: ")).join("\n").trim();return t?(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("h5",{className:"font-medium text-gray-200 mb-2",children:"Response:"}),(0,li.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap bg-gray-50 dark:bg-neutral-800 p-3 rounded",children:t})]}):null})(),(()=>{const t=(e.submission_text||"").split("\n"),r=t.find(e=>e.startsWith("File: ")),n=r?r.slice(6).trim():null,a=t.find(e=>e.startsWith("FileName: "));let s=a?a.slice(10).trim():null;if(!s&&n)try{const e=n.substring(n.lastIndexOf("/")+1);s=decodeURIComponent(e.substring(e.indexOf("-")+1))}catch(i){}return n?(0,li.jsxs)("div",{className:"mb-4",children:[(0,li.jsx)("h5",{className:"font-medium text-gray-200 mb-2",children:"Attached File:"}),(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)(Su,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,li.jsx)("span",{className:"text-yellow-500 truncate max-w-xs",children:s||"Attachment"}),(0,li.jsx)("button",{onClick:()=>window.open(n,"_blank"),className:"ml-4 text-primary-600 hover:text-primary-700 text-sm",children:"View File"})]})]}):null})(),(0,li.jsxs)("div",{className:"flex items-center justify-between",children:[(0,li.jsxs)("div",{className:"flex items-center gap-3",children:[(0,li.jsx)("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Points:"}),(0,li.jsx)("input",{type:"number",min:"0",max:null!==o&&void 0!==o?o:void 0,value:null!==(f=c[e.id])&&void 0!==f?f:null!==(p=null!==(m=e.points_earned)&&void 0!==m?m:o)&&void 0!==p?p:0,onChange:t=>{let r=t.target.value;if(""===r)return u(t=>Ue(Ue({},t),{},{[e.id]:""}));let n=Number(r);Number.isNaN(n)&&(n=0),null!=o&&n>o&&(n=o),n<0&&(n=0),u(t=>Ue(Ue({},t),{},{[e.id]:String(n)}))},className:"w-24 px-2 py-1 border border-gray-300 dark:border-neutral-700 rounded-md bg-white dark:bg-neutral-900 text-gray-900 dark:text-gray-100"}),(0,li.jsx)("button",{onClick:()=>async function(e){try{let t=Number(null!=(null===c||void 0===c?void 0:c[e])&&""!==(null===c||void 0===c?void 0:c[e])?c[e]:null!==o&&void 0!==o?o:0)||0;null!=o?(t>o&&(t=o),t<0&&(t=0)):t<0&&(t=0);const{error:r}=await Qc.from("assignment_submissions").update({points_earned:t,graded_at:(new Date).toISOString(),graded_by:d.uid}).eq("id",e);if(r)throw r;await h()}catch(dd){console.error("Verify submission error:",dd),alert("Failed to verify submission")}}(e.id),className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Verify"})]}),(0,li.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[null!==e.points_earned?(0,li.jsx)(Xu,{className:"h-4 w-4 text-green-500 mr-1"}):(0,li.jsx)(Ru,{className:"h-4 w-4 text-yellow-500 mr-1"}),null!==e.points_earned?"Verified":"Pending"]})]})]},e.id)})})]})}const rd=pi("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function nd(){var e;const{quizId:t}=te(),{currentUser:r}=ui(),n=ee(),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(null),[d,h]=(0,a.useState)({}),[f,p]=(0,a.useState)(0),[m,g]=(0,a.useState)(null),[y,v]=(0,a.useState)(!0),[b,w]=(0,a.useState)(!1),[x,_]=(0,a.useState)("");function k(e,t){h(r=>Ue(Ue({},r),{},{[e]:t}))}async function S(){w(!0),_("");try{const e=Object.entries(d).map(e=>{let[t,r]=e;const n=o.find(e=>e.id===t);let a=!1,s=0;if("multiple_choice"===n.question_type&&r.selected_option_id){const e=n.quiz_options.find(e=>e.id===r.selected_option_id);a=(null===e||void 0===e?void 0:e.is_correct)||!1,s=a?n.points:0}else if("true_false"===n.question_type){const e=n.quiz_options.find(e=>e.is_correct);a=r.answer_text===(null===e||void 0===e?void 0:e.option_text),s=a?n.points:0}else"short_answer"===n.question_type&&(a=r.answer_text&&r.answer_text.trim().length>0,s=a?n.points:0);return Qc.from("quiz_responses").insert({attempt_id:c.id,question_id:t,answer_text:r.answer_text,selected_option_id:r.selected_option_id,is_correct:a,points_earned:s})});await Promise.all(e);const t=o.reduce((e,t)=>e+t.points,0),r=Object.values(d).reduce((e,t)=>{const r=o.find(e=>e.id===Object.keys(d).find(e=>d[e]===t));if(!r)return e;if("multiple_choice"===r.question_type&&t.selected_option_id){const n=r.quiz_options.find(e=>e.id===t.selected_option_id);return e+(null!==n&&void 0!==n&&n.is_correct?r.points:0)}if("true_false"===r.question_type){const n=r.quiz_options.find(e=>e.is_correct);return e+(t.answer_text===(null===n||void 0===n?void 0:n.option_text)?r.points:0)}return"short_answer"===r.question_type?e+(t.answer_text&&t.answer_text.trim().length>0?r.points:0):e},0);await Qc.from("quiz_attempts").update({submitted_at:(new Date).toISOString(),score:r,total_points:t,time_left:m}).eq("id",c.id),n("/quiz-result/".concat(c.id))}catch(x){console.error("Error submitting quiz:",x),_("Failed to submit quiz")}finally{w(!1)}}if((0,a.useEffect)(()=>{!async function(){try{const{data:e,error:a}=await Qc.from("quizzes").select("\n          *,\n          users (\n            full_name\n          ),\n          classrooms (\n            id,\n            name\n          )\n        ").eq("id",t).single();if(a)throw a;const{data:s,error:o}=await Qc.from("classroom_members").select("*").eq("classroom_id",e.classroom_id).eq("user_id",r.uid).single();if(o||!s)return void n("/dashboard");if("tutor"===s.role)return void n("/classroom/".concat(e.classroom_id));i(e);const{data:c,error:d}=await Qc.from("quiz_questions").select("\n          *,\n          quiz_options (\n            id,\n            option_text,\n            is_correct,\n            order_index\n          )\n        ").eq("quiz_id",t).order("order_index");if(d)throw d;l(c||[]);const{data:f,error:p}=await Qc.from("quiz_attempts").select("*").eq("quiz_id",t).eq("student_id",r.uid).single();if(!p&&f){if(f.submitted_at)return void n("/quiz-result/".concat(f.id));{u(f),g(f.time_left||null);const{data:e,error:t}=await Qc.from("quiz_responses").select("*").eq("attempt_id",f.id);if(!t&&e){const t={};e.forEach(e=>{t[e.question_id]={answer_text:e.answer_text,selected_option_id:e.selected_option_id}}),h(t)}}}else{const{data:n,error:a}=await Qc.from("quiz_attempts").insert({quiz_id:t,student_id:r.uid,time_left:e.time_limit}).select().single();if(a)throw a;u(n),g(e.time_limit)}}catch(x){console.error("Error fetching quiz data:",x),n("/dashboard")}finally{v(!1)}}()},[t]),(0,a.useEffect)(()=>{let e;return m>0?e=setTimeout(()=>g(m-1),1e3):0===m&&S(),()=>clearTimeout(e)},[m]),y)return(0,li.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,li.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})});if(!s||0===o.length)return(0,li.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,li.jsxs)("div",{className:"text-center",children:[(0,li.jsx)(rd,{className:"mx-auto h-12 w-12 text-red-400 mb-4"}),(0,li.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Quiz not found"}),(0,li.jsx)("p",{className:"text-gray-600",children:"This quiz may have been deleted or you don't have access to it."})]})});const j=o[f],N=(f+1)/o.length*100;return(0,li.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,li.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,li.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,li.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)("button",{onClick:()=>n("/classroom/".concat(s.classroom_id)),className:"mr-4 p-2 hover:bg-gray-100 rounded-lg",children:(0,li.jsx)(ku,{className:"h-5 w-5"})}),(0,li.jsxs)("div",{children:[(0,li.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:s.title}),(0,li.jsx)("p",{className:"text-sm text-gray-600",children:s.classrooms.name})]})]}),null!==m&&(0,li.jsxs)("div",{className:"flex items-center text-lg font-medium text-gray-900",children:[(0,li.jsx)(Ru,{className:"h-5 w-5 mr-2 text-red-500"}),Math.floor(m/60),":",(m%60).toString().padStart(2,"0")]})]})})}),(0,li.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,li.jsxs)("div",{className:"mb-8",children:[(0,li.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,li.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Question ",f+1," of ",o.length]}),(0,li.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(N),"% Complete"]})]}),(0,li.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,li.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(N,"%")}})})]}),(0,li.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,li.jsxs)("div",{className:"mb-6",children:[(0,li.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Question ",f+1]}),(0,li.jsx)("p",{className:"text-gray-700 mb-4",children:j.question_text}),(0,li.jsxs)("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[j.points," point",1!==j.points?"s":""]})]}),(0,li.jsxs)("div",{className:"space-y-3",children:["multiple_choice"===j.question_type&&j.quiz_options.sort((e,t)=>e.order_index-t.order_index).map(e=>{var t;return(0,li.jsxs)("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,li.jsx)("input",{type:"radio",name:"question_".concat(j.id),value:e.id,checked:(null===(t=d[j.id])||void 0===t?void 0:t.selected_option_id)===e.id,onChange:()=>k(j.id,Ue(Ue({},d[j.id]),{},{selected_option_id:e.id})),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),(0,li.jsx)("span",{className:"ml-3 text-gray-700",children:e.option_text})]},e.id)}),"true_false"===j.question_type&&(0,li.jsx)("div",{className:"space-y-3",children:j.quiz_options.sort((e,t)=>e.order_index-t.order_index).map(e=>{var t;return(0,li.jsxs)("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,li.jsx)("input",{type:"radio",name:"question_".concat(j.id),value:e.option_text,checked:(null===(t=d[j.id])||void 0===t?void 0:t.answer_text)===e.option_text,onChange:()=>k(j.id,Ue(Ue({},d[j.id]),{},{answer_text:e.option_text})),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),(0,li.jsx)("span",{className:"ml-3 text-gray-700",children:e.option_text})]},e.id)})}),"short_answer"===j.question_type&&(0,li.jsx)("textarea",{value:(null===(e=d[j.id])||void 0===e?void 0:e.answer_text)||"",onChange:e=>k(j.id,Ue(Ue({},d[j.id]),{},{answer_text:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter your answer here..."})]})]}),(0,li.jsxs)("div",{className:"flex items-center justify-between",children:[(0,li.jsx)("button",{onClick:function(){f>0&&p(f-1)},disabled:0===f,className:"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,li.jsx)("div",{className:"flex space-x-3",children:f===o.length-1?(0,li.jsx)("button",{onClick:S,disabled:b,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:b?"Submitting...":"Submit Quiz"}):(0,li.jsx)("button",{onClick:function(){f<o.length-1&&p(f+1)},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Next"})})]}),x&&(0,li.jsx)("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:x})]})]})}const ad=pi("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),sd=pi("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);function id(){const{attemptId:e}=te(),{currentUser:t}=ui(),r=ee(),[n,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)([]),[u,d]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{!async function(){try{const{data:n,error:a}=await Qc.from("quiz_attempts").select("\n          *,\n          quizzes (\n            id,\n            title,\n            description,\n            time_limit,\n            classroom_id,\n            classrooms (\n              id,\n              name\n            )\n          )\n        ").eq("id",e).single();if(a)throw a;if(n.student_id!==t.uid)return void r("/dashboard");s(n),o(n.quizzes);const{data:i,error:l}=await Qc.from("quiz_responses").select("\n          *,\n          quiz_questions (\n            id,\n            question_text,\n            question_type,\n            points,\n            quiz_options (\n              id,\n              option_text,\n              is_correct,\n              order_index\n            )\n          )\n        ").eq("attempt_id",e).order("created_at");if(l)throw l;c(i||[])}catch(n){console.error("Error fetching quiz result:",n),r("/dashboard")}finally{d(!1)}}()},[e]),u)return(0,li.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,li.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})});if(!n||!i)return(0,li.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,li.jsxs)("div",{className:"text-center",children:[(0,li.jsx)(ad,{className:"mx-auto h-12 w-12 text-red-400 mb-4"}),(0,li.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Quiz result not found"}),(0,li.jsx)("p",{className:"text-gray-600",children:"This quiz result may have been deleted or you don't have access to it."})]})});const h=Math.round(n.score/n.total_points*100),f=i.time_limit?i.time_limit-(n.time_left||0):null;return(0,li.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,li.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,li.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,li.jsxs)("div",{className:"flex items-center py-4",children:[(0,li.jsx)("button",{onClick:()=>r("/classroom/".concat(i.classroom_id)),className:"mr-4 p-2 hover:bg-gray-100 rounded-lg",children:(0,li.jsx)(ku,{className:"h-5 w-5"})}),(0,li.jsxs)("div",{className:"flex-1",children:[(0,li.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Quiz Results"}),(0,li.jsx)("p",{className:"text-gray-600",children:i.title})]})]})})}),(0,li.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,li.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,li.jsxs)("div",{className:"text-center",children:[(0,li.jsx)("div",{className:"mx-auto w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center mb-4",children:(0,li.jsx)(sd,{className:"h-12 w-12 text-primary-600"})}),(0,li.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:[n.score," / ",n.total_points]}),(0,li.jsxs)("p",{className:"text-xl text-gray-600 mb-4",children:[h,"% Correct"]}),(0,li.jsxs)("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-500",children:[(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)(Ru,{className:"h-4 w-4 mr-1"}),"Submitted: ",new Date(n.submitted_at).toLocaleDateString()]}),f&&(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)(Ru,{className:"h-4 w-4 mr-1"}),"Time used: ",Math.floor(f/60),":",(f%60).toString().padStart(2,"0")]})]})]})}),i.description&&(0,li.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Quiz Description"}),(0,li.jsx)("p",{className:"text-gray-700",children:i.description})]}),(0,li.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,li.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Question Review"}),(0,li.jsx)("div",{className:"space-y-6",children:l.map((e,t)=>{const r=e.quiz_questions,n=e.is_correct;return(0,li.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,li.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,li.jsxs)("div",{className:"flex-1",children:[(0,li.jsxs)("h4",{className:"font-medium text-gray-900 mb-2",children:["Question ",t+1]}),(0,li.jsx)("p",{className:"text-gray-700 mb-3",children:r.question_text})]}),(0,li.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,li.jsxs)("span",{className:"text-sm text-gray-500",children:[r.points," point",1!==r.points?"s":""]}),n?(0,li.jsx)(Xu,{className:"h-5 w-5 text-green-500"}):(0,li.jsx)(ad,{className:"h-5 w-5 text-red-500"})]})]}),(0,li.jsxs)("div",{className:"space-y-2",children:["multiple_choice"===r.question_type&&r.quiz_options.sort((e,t)=>e.order_index-t.order_index).map(t=>{const r=e.selected_option_id===t.id,n=t.is_correct;return(0,li.jsx)("div",{className:"p-3 rounded-lg border ".concat(n?"bg-green-50 border-green-200 text-green-800":r&&!n?"bg-red-50 border-red-200 text-red-800":"bg-gray-50 border-gray-200 text-gray-700"),children:(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)("span",{className:"font-medium",children:t.option_text}),n&&(0,li.jsx)(Xu,{className:"h-4 w-4 ml-2 text-green-500"}),r&&!n&&(0,li.jsx)(ad,{className:"h-4 w-4 ml-2 text-red-500"})]})},t.id)}),"true_false"===r.question_type&&(0,li.jsx)("div",{className:"space-y-2",children:r.quiz_options.sort((e,t)=>e.order_index-t.order_index).map(t=>{const r=e.answer_text===t.option_text,n=t.is_correct;return(0,li.jsx)("div",{className:"p-3 rounded-lg border ".concat(n?"bg-green-50 border-green-200 text-green-800":r&&!n?"bg-red-50 border-red-200 text-red-800":"bg-gray-50 border-gray-200 text-gray-700"),children:(0,li.jsxs)("div",{className:"flex items-center",children:[(0,li.jsx)("span",{className:"font-medium",children:t.option_text}),n&&(0,li.jsx)(Xu,{className:"h-4 w-4 ml-2 text-green-500"}),r&&!n&&(0,li.jsx)(ad,{className:"h-4 w-4 ml-2 text-red-500"})]})},t.id)})}),"short_answer"===r.question_type&&(0,li.jsxs)("div",{className:"space-y-3",children:[(0,li.jsxs)("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,li.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Your answer:"}),(0,li.jsx)("p",{className:"text-gray-900",children:e.answer_text||"No answer provided"})]}),n?(0,li.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,li.jsx)(Xu,{className:"h-4 w-4 mr-1"}),(0,li.jsx)("span",{className:"text-sm",children:"Correct answer"})]}):(0,li.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,li.jsx)(ad,{className:"h-4 w-4 mr-1"}),(0,li.jsx)("span",{className:"text-sm",children:"Incorrect answer"})]})]})]}),(0,li.jsxs)("div",{className:"mt-3 text-sm text-gray-500",children:["Points earned: ",e.points_earned," / ",r.points]})]},e.id)})})]}),(0,li.jsx)("div",{className:"mt-6 flex justify-center",children:(0,li.jsx)("button",{onClick:()=>r("/classroom/".concat(i.classroom_id)),className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Back to Classroom"})})]})]})}function od(e){let{children:t}=e;const{currentUser:r}=ui();return r?t:(0,li.jsx)(ge,{to:"/login"})}function ld(e){let{children:t}=e;const{currentUser:r}=ui();return r?(0,li.jsx)(ge,{to:"/dashboard"}):t}const cd=function(){return(0,a.useEffect)(()=>{try{const e="dark"===localStorage.getItem("theme");document.documentElement.classList.toggle("dark",e)}catch(e){}},[]),(0,li.jsx)(di,{children:(0,li.jsx)(Ee,{children:(0,li.jsxs)("div",{className:"App",children:[(0,li.jsxs)(be,{children:[(0,li.jsx)(ye,{path:"/login",element:(0,li.jsx)(ld,{children:(0,li.jsx)(Si,{})})}),(0,li.jsx)(ye,{path:"/signup",element:(0,li.jsx)(ld,{children:(0,li.jsx)(Zc,{})})}),(0,li.jsx)(ye,{path:"/dashboard",element:(0,li.jsx)(od,{children:(0,li.jsx)(xu,{})})}),(0,li.jsx)(ye,{path:"/classroom/:classroomId",element:(0,li.jsx)(od,{children:(0,li.jsx)(qu,{})})}),(0,li.jsx)(ye,{path:"/assignment/:assignmentId",element:(0,li.jsx)(od,{children:(0,li.jsx)(Zu,{})})}),(0,li.jsx)(ye,{path:"/quiz/:quizId",element:(0,li.jsx)(od,{children:(0,li.jsx)(nd,{})})}),(0,li.jsx)(ye,{path:"/quiz-result/:attemptId",element:(0,li.jsx)(od,{children:(0,li.jsx)(id,{})})}),(0,li.jsx)(ye,{path:"/",element:(0,li.jsx)(ge,{to:"/dashboard"})})]}),(0,li.jsx)(ud,{})]})})})};function ud(){const e=X();return"/dashboard"===e.pathname||"/login"===e.pathname||"/signup"===e.pathname?null:(0,li.jsx)(Ie,{to:"/dashboard",title:"Home",className:"fixed right-6 bottom-6 z-50 h-12 w-12 rounded-full bg-primary-600 text-white shadow-lg hover:bg-primary-700 focus:outline-none flex items-center justify-center border border-primary-700",children:(0,li.jsx)(Nu,{className:"h-6 w-6"})})}i.createRoot(document.getElementById("root")).render((0,li.jsx)(a.StrictMode,{children:(0,li.jsx)(cd,{})}))})();
//# sourceMappingURL=main.be4c22e3.js.map